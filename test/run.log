+ main
+ local pattern=.
++ dirname ./run.sh
+ cd .
+ . ./shunit.sh
++ n_tests=0
++ n_failed=0
+++ /bin/echo -n x
++ '[' x = -n ']'
++ rm -f core
+ '[' 0 -gt 0 ']'
+ '[' 0 -eq 0 ']'
+ load_tests test_cbc.sh
+ local file
+ for file in "$@"
+ . ./test_cbc.sh
++ CBC=../bin/cbc
+ '[' . = . ']'
+ defined_tests
+ sort
+ run_tests
+ defined_functions
+ local pattern=
+ local f
+ read f
+ grep '^test_'
+ typeset +f
+ awk '/^[^ ]+ \(\)/ { print $1 }'
+ echo

++ echo test_01_exec
++ sed 's/^test_//'
+ print 01_exec
+ /bin/echo -n 01_exec
01_exec+ test_01_exec
+ assert_stat 0 ./zero
+ st=0
+ shift
+ assert_compile_success ./zero.cb
+ assert_status 0 ../bin/cbc ./zero.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 0 + 1
+ n_tests=1
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./zero.cb
+ '[' '' = true ']'
+ ../bin/cbc ./zero.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1 + 1
+ n_tests=2
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./zero
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 2 + 1
+ n_tests=3
+ expected=0
+ shift
+ shunit_invoke ./zero
+ '[' '' = true ']'
+ ./zero
+ really=0
+ assert_not_coredump ./zero
+ local cmd=./zero
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 3 + 1
+ n_tests=4
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stat 1 ./one
+ st=1
+ shift
+ assert_compile_success ./one.cb
+ assert_status 0 ../bin/cbc ./one.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 4 + 1
+ n_tests=5
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./one.cb
+ '[' '' = true ']'
+ ../bin/cbc ./one.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 5 + 1
+ n_tests=6
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 1 ./one
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 6 + 1
+ n_tests=7
+ expected=1
+ shift
+ shunit_invoke ./one
+ '[' '' = true ']'
+ ./one
+ really=1
+ assert_not_coredump ./one
+ local cmd=./one
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 7 + 1
+ n_tests=8
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 1 ']'
+ return 0
+ read f
+ echo

++ echo test_02_print
++ sed 's/^test_//'
+ print 02_print
+ /bin/echo -n 02_print
02_print+ test_02_print
+ assert_out 'Hello, World!' ./hello
+ msg='Hello, World!'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./hello.cb
+ assert_status 0 ../bin/cbc ./hello.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 8 + 1
+ n_tests=9
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./hello.cb
+ '[' '' = true ']'
+ ../bin/cbc ./hello.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 9 + 1
+ n_tests=10
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 10 + 1
+ n_tests=11
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello
./shunit.sh: line 150:  1885 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello
+ local cmd=./hello
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 11 + 1
+ n_tests=12
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello"'
stdout differ: string "Hello, World!" and cmd "./hello"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:51.753031443 +0900
+++ tc.out.real	2023-04-23 23:59:51.753031443 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 0 + 1
+ n_failed=1
+ return 0
+ assert_compile_success -O ./hello.cb
+ assert_status 0 ../bin/cbc -O ./hello.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 12 + 1
+ n_tests=13
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./hello.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./hello.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 13 + 1
+ n_tests=14
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 14 + 1
+ n_tests=15
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello
./shunit.sh: line 150:  1924 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello
+ local cmd=./hello
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 15 + 1
+ n_tests=16
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello"'
stdout differ: string "Hello, World!" and cmd "./hello"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:51.883031384 +0900
+++ tc.out.real	2023-04-23 23:59:51.883031384 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 1 + 1
+ n_failed=2
+ return 0
+ assert_compile_success -fPIC ./hello.cb
+ assert_status 0 ../bin/cbc -fPIC ./hello.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 16 + 1
+ n_tests=17
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./hello.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./hello.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 17 + 1
+ n_tests=18
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './hello.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./hello.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 2 + 1
+ n_failed=3
+ return 1
+ assert_out 'Hello, World!' ./hello2
+ msg='Hello, World!'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./hello2.cb
+ assert_status 0 ../bin/cbc ./hello2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 18 + 1
+ n_tests=19
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./hello2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./hello2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 19 + 1
+ n_tests=20
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 20 + 1
+ n_tests=21
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello2
./shunit.sh: line 150:  1994 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello2
+ local cmd=./hello2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 21 + 1
+ n_tests=22
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello2"'
stdout differ: string "Hello, World!" and cmd "./hello2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:52.123031276 +0900
+++ tc.out.real	2023-04-23 23:59:52.123031276 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 3 + 1
+ n_failed=4
+ return 0
+ assert_compile_success -O ./hello2.cb
+ assert_status 0 ../bin/cbc -O ./hello2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 22 + 1
+ n_tests=23
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./hello2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./hello2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 23 + 1
+ n_tests=24
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 24 + 1
+ n_tests=25
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello2
./shunit.sh: line 150:  2033 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello2
+ local cmd=./hello2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 25 + 1
+ n_tests=26
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello2"'
stdout differ: string "Hello, World!" and cmd "./hello2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:52.243031221 +0900
+++ tc.out.real	2023-04-23 23:59:52.243031221 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 4 + 1
+ n_failed=5
+ return 0
+ assert_compile_success -fPIC ./hello2.cb
+ assert_status 0 ../bin/cbc -fPIC ./hello2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 26 + 1
+ n_tests=27
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./hello2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./hello2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 27 + 1
+ n_tests=28
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './hello2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./hello2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 5 + 1
+ n_failed=6
+ return 1
+ assert_out 'Hello, World!' ./hello3
+ msg='Hello, World!'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./hello3.cb
+ assert_status 0 ../bin/cbc ./hello3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 28 + 1
+ n_tests=29
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./hello3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./hello3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 29 + 1
+ n_tests=30
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 30 + 1
+ n_tests=31
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello3
./shunit.sh: line 150:  2104 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello3
+ local cmd=./hello3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 31 + 1
+ n_tests=32
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello3"'
stdout differ: string "Hello, World!" and cmd "./hello3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:52.493031107 +0900
+++ tc.out.real	2023-04-23 23:59:52.493031107 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 6 + 1
+ n_failed=7
+ return 0
+ assert_compile_success -O ./hello3.cb
+ assert_status 0 ../bin/cbc -O ./hello3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 32 + 1
+ n_tests=33
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./hello3.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./hello3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 33 + 1
+ n_tests=34
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 34 + 1
+ n_tests=35
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello3
./shunit.sh: line 150:  2143 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello3
+ local cmd=./hello3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 35 + 1
+ n_tests=36
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello3"'
stdout differ: string "Hello, World!" and cmd "./hello3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:52.613031054 +0900
+++ tc.out.real	2023-04-23 23:59:52.613031054 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 7 + 1
+ n_failed=8
+ return 0
+ assert_compile_success -fPIC ./hello3.cb
+ assert_status 0 ../bin/cbc -fPIC ./hello3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 36 + 1
+ n_tests=37
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./hello3.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./hello3.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 37 + 1
+ n_tests=38
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './hello3.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./hello3.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 8 + 1
+ n_failed=9
+ return 1
+ assert_out 'Hello, World!' ./hello4
+ msg='Hello, World!'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./hello4.cb
+ assert_status 0 ../bin/cbc ./hello4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 38 + 1
+ n_tests=39
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./hello4.cb
+ '[' '' = true ']'
+ ../bin/cbc ./hello4.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 39 + 1
+ n_tests=40
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello4
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 40 + 1
+ n_tests=41
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello4
./shunit.sh: line 150:  2214 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello4
+ local cmd=./hello4
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 41 + 1
+ n_tests=42
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello4"'
stdout differ: string "Hello, World!" and cmd "./hello4"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:52.863030941 +0900
+++ tc.out.real	2023-04-23 23:59:52.863030941 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 9 + 1
+ n_failed=10
+ return 0
+ assert_compile_success -O ./hello4.cb
+ assert_status 0 ../bin/cbc -O ./hello4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 42 + 1
+ n_tests=43
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./hello4.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./hello4.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 43 + 1
+ n_tests=44
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'Hello, World!' ./hello4
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 44 + 1
+ n_tests=45
+ expected='Hello, World!'
+ shift
+ echo 'Hello, World!'
+ ./hello4
./shunit.sh: line 150:  2253 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./hello4
+ local cmd=./hello4
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 45 + 1
+ n_tests=46
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "Hello, World!" and cmd "./hello4"'
stdout differ: string "Hello, World!" and cmd "./hello4"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:52.993030883 +0900
+++ tc.out.real	2023-04-23 23:59:52.993030883 +0900
@@ -1 +0,0 @@
-Hello, World!
+ echo ----
----
+ shunit_test_failed
++ expr 10 + 1
+ n_failed=11
+ return 0
+ assert_compile_success -fPIC ./hello4.cb
+ assert_status 0 ../bin/cbc -fPIC ./hello4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 46 + 1
+ n_tests=47
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./hello4.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./hello4.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 47 + 1
+ n_tests=48
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './hello4.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./hello4.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 11 + 1
+ n_failed=12
+ return 1
+ read f
+ echo

++ echo test_03_integer
++ sed 's/^test_//'
+ print 03_integer
+ /bin/echo -n 03_integer
03_integer+ test_03_integer
+ assert_out '0;0;0;1;1;1;9;9;9;17;17;17' ./integer
+ msg='0;0;0;1;1;1;9;9;9;17;17;17'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./integer.cb
+ assert_status 0 ../bin/cbc ./integer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 48 + 1
+ n_tests=49
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./integer.cb
+ '[' '' = true ']'
+ ../bin/cbc ./integer.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 49 + 1
+ n_tests=50
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;0;1;1;1;9;9;9;17;17;17' ./integer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 50 + 1
+ n_tests=51
+ expected='0;0;0;1;1;1;9;9;9;17;17;17'
+ shift
+ echo '0;0;0;1;1;1;9;9;9;17;17;17'
+ ./integer
./shunit.sh: line 150:  2329 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./integer
+ local cmd=./integer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 51 + 1
+ n_tests=52
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;0;1;1;1;9;9;9;17;17;17" and cmd "./integer"'
stdout differ: string "0;0;0;1;1;1;9;9;9;17;17;17" and cmd "./integer"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:53.233030772 +0900
+++ tc.out.real	2023-04-23 23:59:53.233030772 +0900
@@ -1 +0,0 @@
-0;0;0;1;1;1;9;9;9;17;17;17
+ echo ----
----
+ shunit_test_failed
++ expr 12 + 1
+ n_failed=13
+ return 0
+ assert_compile_success -O ./integer.cb
+ assert_status 0 ../bin/cbc -O ./integer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 52 + 1
+ n_tests=53
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./integer.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./integer.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 53 + 1
+ n_tests=54
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;0;1;1;1;9;9;9;17;17;17' ./integer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 54 + 1
+ n_tests=55
+ expected='0;0;0;1;1;1;9;9;9;17;17;17'
+ shift
+ echo '0;0;0;1;1;1;9;9;9;17;17;17'
+ ./integer
./shunit.sh: line 150:  2367 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./integer
+ local cmd=./integer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 55 + 1
+ n_tests=56
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;0;1;1;1;9;9;9;17;17;17" and cmd "./integer"'
stdout differ: string "0;0;0;1;1;1;9;9;9;17;17;17" and cmd "./integer"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:53.353030719 +0900
+++ tc.out.real	2023-04-23 23:59:53.353030719 +0900
@@ -1 +0,0 @@
-0;0;0;1;1;1;9;9;9;17;17;17
+ echo ----
----
+ shunit_test_failed
++ expr 13 + 1
+ n_failed=14
+ return 0
+ assert_compile_success -fPIC ./integer.cb
+ assert_status 0 ../bin/cbc -fPIC ./integer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 56 + 1
+ n_tests=57
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./integer.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./integer.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 57 + 1
+ n_tests=58
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './integer.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./integer.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 14 + 1
+ n_failed=15
+ return 1
+ read f
+ echo

++ echo test_04_funcall
++ sed 's/^test_//'
+ print 04_funcall
+ /bin/echo -n 04_funcall
04_funcall+ test_04_funcall
+ assert_stat 0 ./funcall0
+ st=0
+ shift
+ assert_compile_success ./funcall0.cb
+ assert_status 0 ../bin/cbc ./funcall0.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 58 + 1
+ n_tests=59
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcall0.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcall0.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 59 + 1
+ n_tests=60
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./funcall0
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 60 + 1
+ n_tests=61
+ expected=0
+ shift
+ shunit_invoke ./funcall0
+ '[' '' = true ']'
+ ./funcall0
+ really=0
+ assert_not_coredump ./funcall0
+ local cmd=./funcall0
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 61 + 1
+ n_tests=62
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stat 0 ./funcall1
+ st=0
+ shift
+ assert_compile_success ./funcall1.cb
+ assert_status 0 ../bin/cbc ./funcall1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 62 + 1
+ n_tests=63
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcall1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcall1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 63 + 1
+ n_tests=64
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./funcall1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 64 + 1
+ n_tests=65
+ expected=0
+ shift
+ shunit_invoke ./funcall1
+ '[' '' = true ']'
+ ./funcall1
+ really=106
+ assert_not_coredump ./funcall1
+ local cmd=./funcall1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 65 + 1
+ n_tests=66
+ '[' -f core ']'
+ return 0
+ '[' 106 '!=' 0 ']'
+ echo 'shunit[./funcall1]: status 0 expected but was: 106'
shunit[./funcall1]: status 0 expected but was: 106
+ shunit_test_failed
++ expr 15 + 1
+ n_failed=16
+ return 1
+ assert_stat 0 ./funcall2
+ st=0
+ shift
+ assert_compile_success ./funcall2.cb
+ assert_status 0 ../bin/cbc ./funcall2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 66 + 1
+ n_tests=67
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcall2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcall2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 67 + 1
+ n_tests=68
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./funcall2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 68 + 1
+ n_tests=69
+ expected=0
+ shift
+ shunit_invoke ./funcall2
+ '[' '' = true ']'
+ ./funcall2
+ really=0
+ assert_not_coredump ./funcall2
+ local cmd=./funcall2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 69 + 1
+ n_tests=70
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stat 0 ./funcall3
+ st=0
+ shift
+ assert_compile_success ./funcall3.cb
+ assert_status 0 ../bin/cbc ./funcall3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 70 + 1
+ n_tests=71
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcall3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcall3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 71 + 1
+ n_tests=72
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./funcall3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 72 + 1
+ n_tests=73
+ expected=0
+ shift
+ shunit_invoke ./funcall3
+ '[' '' = true ']'
+ ./funcall3
+ really=230
+ assert_not_coredump ./funcall3
+ local cmd=./funcall3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 73 + 1
+ n_tests=74
+ '[' -f core ']'
+ return 0
+ '[' 230 '!=' 0 ']'
+ echo 'shunit[./funcall3]: status 0 expected but was: 230'
shunit[./funcall3]: status 0 expected but was: 230
+ shunit_test_failed
++ expr 16 + 1
+ n_failed=17
+ return 1
+ assert_stat 0 ./funcall4
+ st=0
+ shift
+ assert_compile_success ./funcall4.cb
+ assert_status 0 ../bin/cbc ./funcall4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 74 + 1
+ n_tests=75
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcall4.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcall4.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 75 + 1
+ n_tests=76
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./funcall4
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 76 + 1
+ n_tests=77
+ expected=0
+ shift
+ shunit_invoke ./funcall4
+ '[' '' = true ']'
+ ./funcall4
+ really=255
+ assert_not_coredump ./funcall4
+ local cmd=./funcall4
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 77 + 1
+ n_tests=78
+ '[' -f core ']'
+ return 0
+ '[' 255 '!=' 0 ']'
+ echo 'shunit[./funcall4]: status 0 expected but was: 255'
shunit[./funcall4]: status 0 expected but was: 255
+ shunit_test_failed
++ expr 17 + 1
+ n_failed=18
+ return 1
+ assert_out '1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55' ./funcall5
+ msg='1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./funcall5.cb
+ assert_status 0 ../bin/cbc ./funcall5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 78 + 1
+ n_tests=79
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcall5.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcall5.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 79 + 1
+ n_tests=80
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55' ./funcall5
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 80 + 1
+ n_tests=81
+ expected='1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55'
+ shift
+ echo '1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55'
+ ./funcall5
./shunit.sh: line 150:  2625 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./funcall5
+ local cmd=./funcall5
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 81 + 1
+ n_tests=82
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55" and cmd "./funcall5"'
stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55" and cmd "./funcall5"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:54.193030340 +0900
+++ tc.out.real	2023-04-23 23:59:54.193030340 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55
+ echo ----
----
+ shunit_test_failed
++ expr 18 + 1
+ n_failed=19
+ return 0
+ assert_compile_success -O ./funcall5.cb
+ assert_status 0 ../bin/cbc -O ./funcall5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 82 + 1
+ n_tests=83
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./funcall5.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./funcall5.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 83 + 1
+ n_tests=84
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55' ./funcall5
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 84 + 1
+ n_tests=85
+ expected='1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55'
+ shift
+ echo '1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55'
+ ./funcall5
./shunit.sh: line 150:  2665 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./funcall5
+ local cmd=./funcall5
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 85 + 1
+ n_tests=86
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55" and cmd "./funcall5"'
stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55" and cmd "./funcall5"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:54.323030279 +0900
+++ tc.out.real	2023-04-23 23:59:54.323030279 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55
+ echo ----
----
+ shunit_test_failed
++ expr 19 + 1
+ n_failed=20
+ return 0
+ assert_compile_success -fPIC ./funcall5.cb
+ assert_status 0 ../bin/cbc -fPIC ./funcall5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 86 + 1
+ n_tests=87
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./funcall5.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./funcall5.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 87 + 1
+ n_tests=88
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './funcall5.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./funcall5.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 20 + 1
+ n_failed=21
+ return 1
+ read f
+ echo

++ echo test_05_string
++ sed 's/^test_//'
+ print 05_string
+ /bin/echo -n 05_string
05_string+ test_05_string
++ /bin/echo -e ';;a;aa;b;";'\'';\a\b\0033\f\n\r\t\v;ABCabc'
+ assert_out ';;a;aa;b;";'\'';
	;ABCabc' ./string
+ msg=';;a;aa;b;";'\'';
	;ABCabc'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./string.cb
+ assert_status 0 ../bin/cbc ./string.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 88 + 1
+ n_tests=89
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./string.cb
+ '[' '' = true ']'
+ ../bin/cbc ./string.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 89 + 1
+ n_tests=90
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout ';;a;aa;b;";'\'';
	;ABCabc' ./string
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 90 + 1
+ n_tests=91
+ expected=';;a;aa;b;";'\'';
	;ABCabc'
+ shift
+ echo ';;a;aa;b;";'\'';
	;ABCabc'
+ ./string
./shunit.sh: line 150:  2741 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./string
+ local cmd=./string
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 91 + 1
+ n_tests=92
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string ";;a;aa;b;";'\'';
	;ABCabc" and cmd "./string"'
stdout differ: string ";;a;aa;b;";';
	;ABCabc" and cmd "./string"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:54.583030163 +0900
+++ tc.out.real	2023-04-23 23:59:54.583030163 +0900
@@ -1,2 +0,0 @@
-;;a;aa;b;";';
-	;ABCabc
+ echo ----
----
+ shunit_test_failed
++ expr 21 + 1
+ n_failed=22
+ return 0
+ assert_compile_success -O ./string.cb
+ assert_status 0 ../bin/cbc -O ./string.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 92 + 1
+ n_tests=93
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./string.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./string.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 93 + 1
+ n_tests=94
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout ';;a;aa;b;";'\'';
	;ABCabc' ./string
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 94 + 1
+ n_tests=95
+ expected=';;a;aa;b;";'\'';
	;ABCabc'
+ shift
+ echo ';;a;aa;b;";'\'';
	;ABCabc'
+ ./string
./shunit.sh: line 150:  2780 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./string
+ local cmd=./string
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 95 + 1
+ n_tests=96
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string ";;a;aa;b;";'\'';
	;ABCabc" and cmd "./string"'
stdout differ: string ";;a;aa;b;";';
	;ABCabc" and cmd "./string"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:54.703030107 +0900
+++ tc.out.real	2023-04-23 23:59:54.703030107 +0900
@@ -1,2 +0,0 @@
-;;a;aa;b;";';
-	;ABCabc
+ echo ----
----
+ shunit_test_failed
++ expr 22 + 1
+ n_failed=23
+ return 0
+ assert_compile_success -fPIC ./string.cb
+ assert_status 0 ../bin/cbc -fPIC ./string.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 96 + 1
+ n_tests=97
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./string.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./string.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 97 + 1
+ n_tests=98
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './string.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./string.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 23 + 1
+ n_failed=24
+ return 1
++ cat utf.out
cat: utf.out: No such file or directory
+ assert_out '' ./utf
+ msg=
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./utf.cb
+ assert_status 0 ../bin/cbc ./utf.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 98 + 1
+ n_tests=99
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./utf.cb
+ '[' '' = true ']'
+ ../bin/cbc ./utf.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 99 + 1
+ n_tests=100
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '' ./utf
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 100 + 1
+ n_tests=101
+ expected=
+ shift
+ echo ''
+ ./utf
./shunit.sh: line 150:  2852 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./utf
+ local cmd=./utf
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 101 + 1
+ n_tests=102
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "" and cmd "./utf"'
stdout differ: string "" and cmd "./utf"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:54.953029969 +0900
+++ tc.out.real	2023-04-23 23:59:54.953029969 +0900
@@ -1 +0,0 @@
-
+ echo ----
----
+ shunit_test_failed
++ expr 24 + 1
+ n_failed=25
+ return 0
+ assert_compile_success -O ./utf.cb
+ assert_status 0 ../bin/cbc -O ./utf.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 102 + 1
+ n_tests=103
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./utf.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./utf.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 103 + 1
+ n_tests=104
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '' ./utf
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 104 + 1
+ n_tests=105
+ expected=
+ shift
+ echo ''
+ ./utf
./shunit.sh: line 150:  2892 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./utf
+ local cmd=./utf
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 105 + 1
+ n_tests=106
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "" and cmd "./utf"'
stdout differ: string "" and cmd "./utf"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:55.083029889 +0900
+++ tc.out.real	2023-04-23 23:59:55.083029889 +0900
@@ -1 +0,0 @@
-
+ echo ----
----
+ shunit_test_failed
++ expr 25 + 1
+ n_failed=26
+ return 0
+ assert_compile_success -fPIC ./utf.cb
+ assert_status 0 ../bin/cbc -fPIC ./utf.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 106 + 1
+ n_tests=107
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./utf.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./utf.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 107 + 1
+ n_tests=108
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './utf.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./utf.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 26 + 1
+ n_failed=27
+ return 1
+ read f
+ echo

++ echo test_06_variables
++ sed 's/^test_//'
+ print 06_variables
+ /bin/echo -n 06_variables
06_variables+ test_06_variables
+ assert_out '1;2' ./param
+ msg='1;2'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./param.cb
+ assert_status 0 ../bin/cbc ./param.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 108 + 1
+ n_tests=109
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./param.cb
+ '[' '' = true ']'
+ ../bin/cbc ./param.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 109 + 1
+ n_tests=110
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2' ./param
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 110 + 1
+ n_tests=111
+ expected='1;2'
+ shift
+ echo '1;2'
+ ./param
./shunit.sh: line 150:  2967 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./param
+ local cmd=./param
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 111 + 1
+ n_tests=112
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2" and cmd "./param"'
stdout differ: string "1;2" and cmd "./param"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:55.333029733 +0900
+++ tc.out.real	2023-04-23 23:59:55.333029733 +0900
@@ -1 +0,0 @@
-1;2
+ echo ----
----
+ shunit_test_failed
++ expr 27 + 1
+ n_failed=28
+ return 0
+ assert_compile_success -O ./param.cb
+ assert_status 0 ../bin/cbc -O ./param.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 112 + 1
+ n_tests=113
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./param.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./param.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 113 + 1
+ n_tests=114
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2' ./param
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 114 + 1
+ n_tests=115
+ expected='1;2'
+ shift
+ echo '1;2'
+ ./param
./shunit.sh: line 150:  3006 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./param
+ local cmd=./param
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 115 + 1
+ n_tests=116
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2" and cmd "./param"'
stdout differ: string "1;2" and cmd "./param"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:55.463029652 +0900
+++ tc.out.real	2023-04-23 23:59:55.463029652 +0900
@@ -1 +0,0 @@
-1;2
+ echo ----
----
+ shunit_test_failed
++ expr 28 + 1
+ n_failed=29
+ return 0
+ assert_compile_success -fPIC ./param.cb
+ assert_status 0 ../bin/cbc -fPIC ./param.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 116 + 1
+ n_tests=117
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./param.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./param.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 117 + 1
+ n_tests=118
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './param.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./param.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 29 + 1
+ n_failed=30
+ return 1
+ assert_out '1;2' ./lvar1
+ msg='1;2'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./lvar1.cb
+ assert_status 0 ../bin/cbc ./lvar1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 118 + 1
+ n_tests=119
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./lvar1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./lvar1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 119 + 1
+ n_tests=120
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2' ./lvar1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 120 + 1
+ n_tests=121
+ expected='1;2'
+ shift
+ echo '1;2'
+ ./lvar1
./shunit.sh: line 150:  3078 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lvar1
+ local cmd=./lvar1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 121 + 1
+ n_tests=122
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2" and cmd "./lvar1"'
stdout differ: string "1;2" and cmd "./lvar1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:55.713029497 +0900
+++ tc.out.real	2023-04-23 23:59:55.713029497 +0900
@@ -1 +0,0 @@
-1;2
+ echo ----
----
+ shunit_test_failed
++ expr 30 + 1
+ n_failed=31
+ return 0
+ assert_compile_success -O ./lvar1.cb
+ assert_status 0 ../bin/cbc -O ./lvar1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 122 + 1
+ n_tests=123
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./lvar1.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./lvar1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 123 + 1
+ n_tests=124
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2' ./lvar1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 124 + 1
+ n_tests=125
+ expected='1;2'
+ shift
+ echo '1;2'
+ ./lvar1
./shunit.sh: line 150:  3116 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lvar1
+ local cmd=./lvar1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 125 + 1
+ n_tests=126
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2" and cmd "./lvar1"'
stdout differ: string "1;2" and cmd "./lvar1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:55.833029422 +0900
+++ tc.out.real	2023-04-23 23:59:55.833029422 +0900
@@ -1 +0,0 @@
-1;2
+ echo ----
----
+ shunit_test_failed
++ expr 31 + 1
+ n_failed=32
+ return 0
+ assert_compile_success -fPIC ./lvar1.cb
+ assert_status 0 ../bin/cbc -fPIC ./lvar1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 126 + 1
+ n_tests=127
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./lvar1.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./lvar1.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 127 + 1
+ n_tests=128
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './lvar1.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./lvar1.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 32 + 1
+ n_failed=33
+ return 1
+ assert_out '1;2;3;4;5' ./lvar2
+ msg='1;2;3;4;5'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./lvar2.cb
+ assert_status 0 ../bin/cbc ./lvar2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 128 + 1
+ n_tests=129
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./lvar2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./lvar2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 129 + 1
+ n_tests=130
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5' ./lvar2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 130 + 1
+ n_tests=131
+ expected='1;2;3;4;5'
+ shift
+ echo '1;2;3;4;5'
+ ./lvar2
./shunit.sh: line 150:  3187 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lvar2
+ local cmd=./lvar2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 131 + 1
+ n_tests=132
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5" and cmd "./lvar2"'
stdout differ: string "1;2;3;4;5" and cmd "./lvar2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:56.073029272 +0900
+++ tc.out.real	2023-04-23 23:59:56.073029272 +0900
@@ -1 +0,0 @@
-1;2;3;4;5
+ echo ----
----
+ shunit_test_failed
++ expr 33 + 1
+ n_failed=34
+ return 0
+ assert_compile_success -O ./lvar2.cb
+ assert_status 0 ../bin/cbc -O ./lvar2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 132 + 1
+ n_tests=133
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./lvar2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./lvar2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 133 + 1
+ n_tests=134
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5' ./lvar2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 134 + 1
+ n_tests=135
+ expected='1;2;3;4;5'
+ shift
+ echo '1;2;3;4;5'
+ ./lvar2
./shunit.sh: line 150:  3226 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lvar2
+ local cmd=./lvar2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 135 + 1
+ n_tests=136
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5" and cmd "./lvar2"'
stdout differ: string "1;2;3;4;5" and cmd "./lvar2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:56.203029192 +0900
+++ tc.out.real	2023-04-23 23:59:56.203029192 +0900
@@ -1 +0,0 @@
-1;2;3;4;5
+ echo ----
----
+ shunit_test_failed
++ expr 34 + 1
+ n_failed=35
+ return 0
+ assert_compile_success -fPIC ./lvar2.cb
+ assert_status 0 ../bin/cbc -fPIC ./lvar2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 136 + 1
+ n_tests=137
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./lvar2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./lvar2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 137 + 1
+ n_tests=138
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './lvar2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./lvar2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 35 + 1
+ n_failed=36
+ return 1
+ assert_out '4;80;0;local' ./initializer
+ msg='4;80;0;local'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./initializer.cb
+ assert_status 0 ../bin/cbc ./initializer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 138 + 1
+ n_tests=139
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./initializer.cb
+ '[' '' = true ']'
+ ../bin/cbc ./initializer.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 139 + 1
+ n_tests=140
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '4;80;0;local' ./initializer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 140 + 1
+ n_tests=141
+ expected='4;80;0;local'
+ shift
+ echo '4;80;0;local'
+ ./initializer
./shunit.sh: line 150:  3298 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./initializer
+ local cmd=./initializer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 141 + 1
+ n_tests=142
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "4;80;0;local" and cmd "./initializer"'
stdout differ: string "4;80;0;local" and cmd "./initializer"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:56.463029030 +0900
+++ tc.out.real	2023-04-23 23:59:56.463029030 +0900
@@ -1 +0,0 @@
-4;80;0;local
+ echo ----
----
+ shunit_test_failed
++ expr 36 + 1
+ n_failed=37
+ return 0
+ assert_compile_success -O ./initializer.cb
+ assert_status 0 ../bin/cbc -O ./initializer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 142 + 1
+ n_tests=143
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./initializer.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./initializer.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 143 + 1
+ n_tests=144
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '4;80;0;local' ./initializer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 144 + 1
+ n_tests=145
+ expected='4;80;0;local'
+ shift
+ echo '4;80;0;local'
+ ./initializer
./shunit.sh: line 150:  3338 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./initializer
+ local cmd=./initializer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 145 + 1
+ n_tests=146
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "4;80;0;local" and cmd "./initializer"'
stdout differ: string "4;80;0;local" and cmd "./initializer"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:56.583028955 +0900
+++ tc.out.real	2023-04-23 23:59:56.583028955 +0900
@@ -1 +0,0 @@
-4;80;0;local
+ echo ----
----
+ shunit_test_failed
++ expr 37 + 1
+ n_failed=38
+ return 0
+ assert_compile_success -fPIC ./initializer.cb
+ assert_status 0 ../bin/cbc -fPIC ./initializer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 146 + 1
+ n_tests=147
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./initializer.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./initializer.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 147 + 1
+ n_tests=148
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './initializer.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./initializer.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 38 + 1
+ n_failed=39
+ return 1
+ assert_out '16;16;16;msgstring' ./const
+ msg='16;16;16;msgstring'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./const.cb
+ assert_status 0 ../bin/cbc ./const.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 148 + 1
+ n_tests=149
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./const.cb
+ '[' '' = true ']'
+ ../bin/cbc ./const.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 149 + 1
+ n_tests=150
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '16;16;16;msgstring' ./const
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 150 + 1
+ n_tests=151
+ expected='16;16;16;msgstring'
+ shift
+ echo '16;16;16;msgstring'
+ ./const
./shunit.sh: line 150:  3409 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./const
+ local cmd=./const
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 151 + 1
+ n_tests=152
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "16;16;16;msgstring" and cmd "./const"'
stdout differ: string "16;16;16;msgstring" and cmd "./const"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:56.853028788 +0900
+++ tc.out.real	2023-04-23 23:59:56.853028788 +0900
@@ -1 +0,0 @@
-16;16;16;msgstring
+ echo ----
----
+ shunit_test_failed
++ expr 39 + 1
+ n_failed=40
+ return 0
+ assert_compile_success -O ./const.cb
+ assert_status 0 ../bin/cbc -O ./const.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 152 + 1
+ n_tests=153
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./const.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./const.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 153 + 1
+ n_tests=154
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '16;16;16;msgstring' ./const
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 154 + 1
+ n_tests=155
+ expected='16;16;16;msgstring'
+ shift
+ echo '16;16;16;msgstring'
+ ./const
./shunit.sh: line 150:  3448 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./const
+ local cmd=./const
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 155 + 1
+ n_tests=156
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "16;16;16;msgstring" and cmd "./const"'
stdout differ: string "16;16;16;msgstring" and cmd "./const"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:56.983028706 +0900
+++ tc.out.real	2023-04-23 23:59:56.983028706 +0900
@@ -1 +0,0 @@
-16;16;16;msgstring
+ echo ----
----
+ shunit_test_failed
++ expr 40 + 1
+ n_failed=41
+ return 0
+ assert_compile_success -fPIC ./const.cb
+ assert_status 0 ../bin/cbc -fPIC ./const.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 156 + 1
+ n_tests=157
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./const.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./const.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 157 + 1
+ n_tests=158
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './const.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./const.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 41 + 1
+ n_failed=42
+ return 1
+ assert_compile_error var-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 158 + 1
+ n_tests=159
+ ../bin/cbc var-semcheck.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 159 + 1
+ n_tests=160
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_out '1;2;OK;NEW' ./comm
+ msg='1;2;OK;NEW'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./comm.cb
+ assert_status 0 ../bin/cbc ./comm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 160 + 1
+ n_tests=161
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./comm.cb
+ '[' '' = true ']'
+ ../bin/cbc ./comm.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 161 + 1
+ n_tests=162
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./comm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 162 + 1
+ n_tests=163
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./comm
./shunit.sh: line 150:  3550 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./comm
+ local cmd=./comm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 163 + 1
+ n_tests=164
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./comm"'
stdout differ: string "1;2;OK;NEW" and cmd "./comm"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:57.343028483 +0900
+++ tc.out.real	2023-04-23 23:59:57.343028483 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 42 + 1
+ n_failed=43
+ return 0
+ assert_compile_success -O ./comm.cb
+ assert_status 0 ../bin/cbc -O ./comm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 164 + 1
+ n_tests=165
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./comm.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./comm.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 165 + 1
+ n_tests=166
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./comm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 166 + 1
+ n_tests=167
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./comm
./shunit.sh: line 150:  3590 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./comm
+ local cmd=./comm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 167 + 1
+ n_tests=168
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./comm"'
stdout differ: string "1;2;OK;NEW" and cmd "./comm"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:57.483028395 +0900
+++ tc.out.real	2023-04-23 23:59:57.483028395 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 43 + 1
+ n_failed=44
+ return 0
+ assert_compile_success -fPIC ./comm.cb
+ assert_status 0 ../bin/cbc -fPIC ./comm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 168 + 1
+ n_tests=169
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./comm.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./comm.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 169 + 1
+ n_tests=170
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './comm.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./comm.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 44 + 1
+ n_failed=45
+ return 1
+ assert_out '1;2;OK;NEW' ./scomm
+ msg='1;2;OK;NEW'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./scomm.cb
+ assert_status 0 ../bin/cbc ./scomm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 170 + 1
+ n_tests=171
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./scomm.cb
+ '[' '' = true ']'
+ ../bin/cbc ./scomm.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 171 + 1
+ n_tests=172
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./scomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 172 + 1
+ n_tests=173
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./scomm
./shunit.sh: line 150:  3663 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./scomm
+ local cmd=./scomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 173 + 1
+ n_tests=174
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./scomm"'
stdout differ: string "1;2;OK;NEW" and cmd "./scomm"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:57.743028233 +0900
+++ tc.out.real	2023-04-23 23:59:57.743028233 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 45 + 1
+ n_failed=46
+ return 0
+ assert_compile_success -O ./scomm.cb
+ assert_status 0 ../bin/cbc -O ./scomm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 174 + 1
+ n_tests=175
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./scomm.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./scomm.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 175 + 1
+ n_tests=176
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./scomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 176 + 1
+ n_tests=177
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./scomm
./shunit.sh: line 150:  3704 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./scomm
+ local cmd=./scomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 177 + 1
+ n_tests=178
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./scomm"'
stdout differ: string "1;2;OK;NEW" and cmd "./scomm"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:57.903028134 +0900
+++ tc.out.real	2023-04-23 23:59:57.903028134 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 46 + 1
+ n_failed=47
+ return 0
+ assert_compile_success -fPIC ./scomm.cb
+ assert_status 0 ../bin/cbc -fPIC ./scomm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 178 + 1
+ n_tests=179
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./scomm.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./scomm.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 179 + 1
+ n_tests=180
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './scomm.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./scomm.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 47 + 1
+ n_failed=48
+ return 1
+ assert_out '1;2;OK;NEW' ./gvar
+ msg='1;2;OK;NEW'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./gvar.cb
+ assert_status 0 ../bin/cbc ./gvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 180 + 1
+ n_tests=181
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./gvar.cb
+ '[' '' = true ']'
+ ../bin/cbc ./gvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 181 + 1
+ n_tests=182
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./gvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 182 + 1
+ n_tests=183
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./gvar
./shunit.sh: line 150:  3776 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./gvar
+ local cmd=./gvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 183 + 1
+ n_tests=184
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./gvar"'
stdout differ: string "1;2;OK;NEW" and cmd "./gvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:58.163027972 +0900
+++ tc.out.real	2023-04-23 23:59:58.163027972 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 48 + 1
+ n_failed=49
+ return 0
+ assert_compile_success -O ./gvar.cb
+ assert_status 0 ../bin/cbc -O ./gvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 184 + 1
+ n_tests=185
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./gvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./gvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 185 + 1
+ n_tests=186
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./gvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 186 + 1
+ n_tests=187
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./gvar
./shunit.sh: line 150:  3815 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./gvar
+ local cmd=./gvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 187 + 1
+ n_tests=188
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./gvar"'
stdout differ: string "1;2;OK;NEW" and cmd "./gvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:58.293027891 +0900
+++ tc.out.real	2023-04-23 23:59:58.293027891 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 49 + 1
+ n_failed=50
+ return 0
+ assert_compile_success -fPIC ./gvar.cb
+ assert_status 0 ../bin/cbc -fPIC ./gvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 188 + 1
+ n_tests=189
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./gvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./gvar.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 189 + 1
+ n_tests=190
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './gvar.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./gvar.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 50 + 1
+ n_failed=51
+ return 1
+ assert_out '1;2;OK;NEW' ./sgvar
+ msg='1;2;OK;NEW'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./sgvar.cb
+ assert_status 0 ../bin/cbc ./sgvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 190 + 1
+ n_tests=191
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./sgvar.cb
+ '[' '' = true ']'
+ ../bin/cbc ./sgvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 191 + 1
+ n_tests=192
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./sgvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 192 + 1
+ n_tests=193
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./sgvar
./shunit.sh: line 150:  3886 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sgvar
+ local cmd=./sgvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 193 + 1
+ n_tests=194
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./sgvar"'
stdout differ: string "1;2;OK;NEW" and cmd "./sgvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:58.553027730 +0900
+++ tc.out.real	2023-04-23 23:59:58.553027730 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 51 + 1
+ n_failed=52
+ return 0
+ assert_compile_success -O ./sgvar.cb
+ assert_status 0 ../bin/cbc -O ./sgvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 194 + 1
+ n_tests=195
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./sgvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./sgvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 195 + 1
+ n_tests=196
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./sgvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 196 + 1
+ n_tests=197
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./sgvar
./shunit.sh: line 150:  3927 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sgvar
+ local cmd=./sgvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 197 + 1
+ n_tests=198
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./sgvar"'
stdout differ: string "1;2;OK;NEW" and cmd "./sgvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:58.683027649 +0900
+++ tc.out.real	2023-04-23 23:59:58.683027649 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 52 + 1
+ n_failed=53
+ return 0
+ assert_compile_success -fPIC ./sgvar.cb
+ assert_status 0 ../bin/cbc -fPIC ./sgvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 198 + 1
+ n_tests=199
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./sgvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./sgvar.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 199 + 1
+ n_tests=200
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './sgvar.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./sgvar.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 53 + 1
+ n_failed=54
+ return 1
+ assert_out '1;2;OK;NEW' ./slvar
+ msg='1;2;OK;NEW'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./slvar.cb
+ assert_status 0 ../bin/cbc ./slvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 200 + 1
+ n_tests=201
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./slvar.cb
+ '[' '' = true ']'
+ ../bin/cbc ./slvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 201 + 1
+ n_tests=202
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./slvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 202 + 1
+ n_tests=203
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./slvar
./shunit.sh: line 150:  3999 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./slvar
+ local cmd=./slvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 203 + 1
+ n_tests=204
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./slvar"'
stdout differ: string "1;2;OK;NEW" and cmd "./slvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:58.943027485 +0900
+++ tc.out.real	2023-04-23 23:59:58.943027485 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 54 + 1
+ n_failed=55
+ return 0
+ assert_compile_success -O ./slvar.cb
+ assert_status 0 ../bin/cbc -O ./slvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 204 + 1
+ n_tests=205
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./slvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./slvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 205 + 1
+ n_tests=206
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./slvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 206 + 1
+ n_tests=207
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./slvar
./shunit.sh: line 150:  4039 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./slvar
+ local cmd=./slvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 207 + 1
+ n_tests=208
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./slvar"'
stdout differ: string "1;2;OK;NEW" and cmd "./slvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:59.083027400 +0900
+++ tc.out.real	2023-04-23 23:59:59.083027400 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 55 + 1
+ n_failed=56
+ return 0
+ assert_compile_success -fPIC ./slvar.cb
+ assert_status 0 ../bin/cbc -fPIC ./slvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 208 + 1
+ n_tests=209
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./slvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./slvar.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 209 + 1
+ n_tests=210
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './slvar.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./slvar.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 56 + 1
+ n_failed=57
+ return 1
+ assert_out '1;2;OK;NEW' ./slcomm
+ msg='1;2;OK;NEW'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./slcomm.cb
+ assert_status 0 ../bin/cbc ./slcomm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 210 + 1
+ n_tests=211
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./slcomm.cb
+ '[' '' = true ']'
+ ../bin/cbc ./slcomm.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 211 + 1
+ n_tests=212
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./slcomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 212 + 1
+ n_tests=213
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./slcomm
./shunit.sh: line 150:  4111 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./slcomm
+ local cmd=./slcomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 213 + 1
+ n_tests=214
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./slcomm"'
stdout differ: string "1;2;OK;NEW" and cmd "./slcomm"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:59.343027238 +0900
+++ tc.out.real	2023-04-23 23:59:59.343027238 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 57 + 1
+ n_failed=58
+ return 0
+ assert_compile_success -O ./slcomm.cb
+ assert_status 0 ../bin/cbc -O ./slcomm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 214 + 1
+ n_tests=215
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./slcomm.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./slcomm.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 215 + 1
+ n_tests=216
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;OK;NEW' ./slcomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 216 + 1
+ n_tests=217
+ expected='1;2;OK;NEW'
+ shift
+ echo '1;2;OK;NEW'
+ ./slcomm
./shunit.sh: line 150:  4151 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./slcomm
+ local cmd=./slcomm
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 217 + 1
+ n_tests=218
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;OK;NEW" and cmd "./slcomm"'
stdout differ: string "1;2;OK;NEW" and cmd "./slcomm"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:59.483027150 +0900
+++ tc.out.real	2023-04-23 23:59:59.483027150 +0900
@@ -1 +0,0 @@
-1;2;OK;NEW
+ echo ----
----
+ shunit_test_failed
++ expr 58 + 1
+ n_failed=59
+ return 0
+ assert_compile_success -fPIC ./slcomm.cb
+ assert_status 0 ../bin/cbc -fPIC ./slcomm.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 218 + 1
+ n_tests=219
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./slcomm.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./slcomm.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 219 + 1
+ n_tests=220
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './slcomm.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./slcomm.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 59 + 1
+ n_failed=60
+ return 1
+ read f
+ echo

++ echo test_07_arithmetic
++ sed 's/^test_//'
+ print 07_arithmetic
+ /bin/echo -n 07_arithmetic
07_arithmetic+ test_07_arithmetic
+ assert_out '-1;0;1' ./unaryminus
+ msg='-1;0;1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./unaryminus.cb
+ assert_status 0 ../bin/cbc ./unaryminus.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 220 + 1
+ n_tests=221
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./unaryminus.cb
+ '[' '' = true ']'
+ ../bin/cbc ./unaryminus.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 221 + 1
+ n_tests=222
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-1;0;1' ./unaryminus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 222 + 1
+ n_tests=223
+ expected='-1;0;1'
+ shift
+ echo '-1;0;1'
+ ./unaryminus
./shunit.sh: line 150:  4227 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./unaryminus
+ local cmd=./unaryminus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 223 + 1
+ n_tests=224
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-1;0;1" and cmd "./unaryminus"'
stdout differ: string "-1;0;1" and cmd "./unaryminus"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:59.743026989 +0900
+++ tc.out.real	2023-04-23 23:59:59.743026989 +0900
@@ -1 +0,0 @@
--1;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 60 + 1
+ n_failed=61
+ return 0
+ assert_compile_success -O ./unaryminus.cb
+ assert_status 0 ../bin/cbc -O ./unaryminus.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 224 + 1
+ n_tests=225
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./unaryminus.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./unaryminus.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 225 + 1
+ n_tests=226
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-1;0;1' ./unaryminus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 226 + 1
+ n_tests=227
+ expected='-1;0;1'
+ shift
+ echo '-1;0;1'
+ ./unaryminus
./shunit.sh: line 150:  4266 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./unaryminus
+ local cmd=./unaryminus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 227 + 1
+ n_tests=228
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-1;0;1" and cmd "./unaryminus"'
stdout differ: string "-1;0;1" and cmd "./unaryminus"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-23 23:59:59.863026914 +0900
+++ tc.out.real	2023-04-23 23:59:59.863026914 +0900
@@ -1 +0,0 @@
--1;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 61 + 1
+ n_failed=62
+ return 0
+ assert_compile_success -fPIC ./unaryminus.cb
+ assert_status 0 ../bin/cbc -fPIC ./unaryminus.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 228 + 1
+ n_tests=229
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./unaryminus.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./unaryminus.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 229 + 1
+ n_tests=230
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './unaryminus.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./unaryminus.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 62 + 1
+ n_failed=63
+ return 1
+ assert_out '1;0;-1' ./unaryplus
+ msg='1;0;-1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./unaryplus.cb
+ assert_status 0 ../bin/cbc ./unaryplus.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 230 + 1
+ n_tests=231
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./unaryplus.cb
+ '[' '' = true ']'
+ ../bin/cbc ./unaryplus.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 231 + 1
+ n_tests=232
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;-1' ./unaryplus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 232 + 1
+ n_tests=233
+ expected='1;0;-1'
+ shift
+ echo '1;0;-1'
+ ./unaryplus
./shunit.sh: line 150:  4337 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./unaryplus
+ local cmd=./unaryplus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 233 + 1
+ n_tests=234
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;-1" and cmd "./unaryplus"'
stdout differ: string "1;0;-1" and cmd "./unaryplus"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:00.123026753 +0900
+++ tc.out.real	2023-04-24 00:00:00.123026753 +0900
@@ -1 +0,0 @@
-1;0;-1
+ echo ----
----
+ shunit_test_failed
++ expr 63 + 1
+ n_failed=64
+ return 0
+ assert_compile_success -O ./unaryplus.cb
+ assert_status 0 ../bin/cbc -O ./unaryplus.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 234 + 1
+ n_tests=235
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./unaryplus.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./unaryplus.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 235 + 1
+ n_tests=236
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;-1' ./unaryplus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 236 + 1
+ n_tests=237
+ expected='1;0;-1'
+ shift
+ echo '1;0;-1'
+ ./unaryplus
./shunit.sh: line 150:  4375 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./unaryplus
+ local cmd=./unaryplus
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 237 + 1
+ n_tests=238
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;-1" and cmd "./unaryplus"'
stdout differ: string "1;0;-1" and cmd "./unaryplus"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:00.243026678 +0900
+++ tc.out.real	2023-04-24 00:00:00.243026678 +0900
@@ -1 +0,0 @@
-1;0;-1
+ echo ----
----
+ shunit_test_failed
++ expr 64 + 1
+ n_failed=65
+ return 0
+ assert_compile_success -fPIC ./unaryplus.cb
+ assert_status 0 ../bin/cbc -fPIC ./unaryplus.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 238 + 1
+ n_tests=239
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./unaryplus.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./unaryplus.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 239 + 1
+ n_tests=240
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './unaryplus.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./unaryplus.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 65 + 1
+ n_failed=66
+ return 1
+ assert_out '1;2;3;4;5;6;7;8;9;10;11' ./add
+ msg='1;2;3;4;5;6;7;8;9;10;11'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./add.cb
+ assert_status 0 ../bin/cbc ./add.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 240 + 1
+ n_tests=241
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./add.cb
+ '[' '' = true ']'
+ ../bin/cbc ./add.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 241 + 1
+ n_tests=242
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;7;8;9;10;11' ./add
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 242 + 1
+ n_tests=243
+ expected='1;2;3;4;5;6;7;8;9;10;11'
+ shift
+ echo '1;2;3;4;5;6;7;8;9;10;11'
+ ./add
./shunit.sh: line 150:  4447 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./add
+ local cmd=./add
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 243 + 1
+ n_tests=244
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;7;8;9;10;11" and cmd "./add"'
stdout differ: string "1;2;3;4;5;6;7;8;9;10;11" and cmd "./add"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:00.503026516 +0900
+++ tc.out.real	2023-04-24 00:00:00.503026516 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;7;8;9;10;11
+ echo ----
----
+ shunit_test_failed
++ expr 66 + 1
+ n_failed=67
+ return 0
+ assert_compile_success -O ./add.cb
+ assert_status 0 ../bin/cbc -O ./add.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 244 + 1
+ n_tests=245
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./add.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./add.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 245 + 1
+ n_tests=246
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;7;8;9;10;11' ./add
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 246 + 1
+ n_tests=247
+ expected='1;2;3;4;5;6;7;8;9;10;11'
+ shift
+ echo '1;2;3;4;5;6;7;8;9;10;11'
+ ./add
./shunit.sh: line 150:  4487 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./add
+ local cmd=./add
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 247 + 1
+ n_tests=248
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;7;8;9;10;11" and cmd "./add"'
stdout differ: string "1;2;3;4;5;6;7;8;9;10;11" and cmd "./add"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:00.643026430 +0900
+++ tc.out.real	2023-04-24 00:00:00.643026430 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;7;8;9;10;11
+ echo ----
----
+ shunit_test_failed
++ expr 67 + 1
+ n_failed=68
+ return 0
+ assert_compile_success -fPIC ./add.cb
+ assert_status 0 ../bin/cbc -fPIC ./add.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 248 + 1
+ n_tests=249
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./add.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./add.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 249 + 1
+ n_tests=250
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './add.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./add.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 68 + 1
+ n_failed=69
+ return 1
+ assert_out '1;2;3;4;5;6;7;8;9;10;11;12;13' ./sub
+ msg='1;2;3;4;5;6;7;8;9;10;11;12;13'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./sub.cb
+ assert_status 0 ../bin/cbc ./sub.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 250 + 1
+ n_tests=251
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./sub.cb
+ '[' '' = true ']'
+ ../bin/cbc ./sub.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 251 + 1
+ n_tests=252
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;7;8;9;10;11;12;13' ./sub
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 252 + 1
+ n_tests=253
+ expected='1;2;3;4;5;6;7;8;9;10;11;12;13'
+ shift
+ echo '1;2;3;4;5;6;7;8;9;10;11;12;13'
+ ./sub
./shunit.sh: line 150:  4560 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sub
+ local cmd=./sub
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 253 + 1
+ n_tests=254
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13" and cmd "./sub"'
stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13" and cmd "./sub"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:00.933026249 +0900
+++ tc.out.real	2023-04-24 00:00:00.933026249 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;7;8;9;10;11;12;13
+ echo ----
----
+ shunit_test_failed
++ expr 69 + 1
+ n_failed=70
+ return 0
+ assert_compile_success -O ./sub.cb
+ assert_status 0 ../bin/cbc -O ./sub.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 254 + 1
+ n_tests=255
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./sub.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./sub.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 255 + 1
+ n_tests=256
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;7;8;9;10;11;12;13' ./sub
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 256 + 1
+ n_tests=257
+ expected='1;2;3;4;5;6;7;8;9;10;11;12;13'
+ shift
+ echo '1;2;3;4;5;6;7;8;9;10;11;12;13'
+ ./sub
./shunit.sh: line 150:  4600 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sub
+ local cmd=./sub
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 257 + 1
+ n_tests=258
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13" and cmd "./sub"'
stdout differ: string "1;2;3;4;5;6;7;8;9;10;11;12;13" and cmd "./sub"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:01.083026155 +0900
+++ tc.out.real	2023-04-24 00:00:01.083026155 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;7;8;9;10;11;12;13
+ echo ----
----
+ shunit_test_failed
++ expr 70 + 1
+ n_failed=71
+ return 0
+ assert_compile_success -fPIC ./sub.cb
+ assert_status 0 ../bin/cbc -fPIC ./sub.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 258 + 1
+ n_tests=259
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./sub.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./sub.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 259 + 1
+ n_tests=260
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './sub.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./sub.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 71 + 1
+ n_failed=72
+ return 1
+ assert_out '1;4;15' ./mul
+ msg='1;4;15'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./mul.cb
+ assert_status 0 ../bin/cbc ./mul.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 260 + 1
+ n_tests=261
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./mul.cb
+ '[' '' = true ']'
+ ../bin/cbc ./mul.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 261 + 1
+ n_tests=262
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;4;15' ./mul
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 262 + 1
+ n_tests=263
+ expected='1;4;15'
+ shift
+ echo '1;4;15'
+ ./mul
./shunit.sh: line 150:  4671 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./mul
+ local cmd=./mul
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 263 + 1
+ n_tests=264
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;4;15" and cmd "./mul"'
stdout differ: string "1;4;15" and cmd "./mul"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:01.363025981 +0900
+++ tc.out.real	2023-04-24 00:00:01.363025981 +0900
@@ -1 +0,0 @@
-1;4;15
+ echo ----
----
+ shunit_test_failed
++ expr 72 + 1
+ n_failed=73
+ return 0
+ assert_compile_success -O ./mul.cb
+ assert_status 0 ../bin/cbc -O ./mul.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 264 + 1
+ n_tests=265
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./mul.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./mul.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 265 + 1
+ n_tests=266
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;4;15' ./mul
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 266 + 1
+ n_tests=267
+ expected='1;4;15'
+ shift
+ echo '1;4;15'
+ ./mul
./shunit.sh: line 150:  4710 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./mul
+ local cmd=./mul
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 267 + 1
+ n_tests=268
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;4;15" and cmd "./mul"'
stdout differ: string "1;4;15" and cmd "./mul"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:01.493025900 +0900
+++ tc.out.real	2023-04-24 00:00:01.493025900 +0900
@@ -1 +0,0 @@
-1;4;15
+ echo ----
----
+ shunit_test_failed
++ expr 73 + 1
+ n_failed=74
+ return 0
+ assert_compile_success -fPIC ./mul.cb
+ assert_status 0 ../bin/cbc -fPIC ./mul.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 268 + 1
+ n_tests=269
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./mul.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./mul.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 269 + 1
+ n_tests=270
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './mul.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./mul.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 74 + 1
+ n_failed=75
+ return 1
+ assert_out '1;2;2;2;4' ./div
+ msg='1;2;2;2;4'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./div.cb
+ assert_status 0 ../bin/cbc ./div.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 270 + 1
+ n_tests=271
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./div.cb
+ '[' '' = true ']'
+ ../bin/cbc ./div.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 271 + 1
+ n_tests=272
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;2;2;4' ./div
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 272 + 1
+ n_tests=273
+ expected='1;2;2;2;4'
+ shift
+ echo '1;2;2;2;4'
+ ./div
./shunit.sh: line 150:  4782 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./div
+ local cmd=./div
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 273 + 1
+ n_tests=274
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;2;2;4" and cmd "./div"'
stdout differ: string "1;2;2;2;4" and cmd "./div"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:01.753025739 +0900
+++ tc.out.real	2023-04-24 00:00:01.753025739 +0900
@@ -1 +0,0 @@
-1;2;2;2;4
+ echo ----
----
+ shunit_test_failed
++ expr 75 + 1
+ n_failed=76
+ return 0
+ assert_compile_success -O ./div.cb
+ assert_status 0 ../bin/cbc -O ./div.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 274 + 1
+ n_tests=275
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./div.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./div.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 275 + 1
+ n_tests=276
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;2;2;4' ./div
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 276 + 1
+ n_tests=277
+ expected='1;2;2;2;4'
+ shift
+ echo '1;2;2;2;4'
+ ./div
./shunit.sh: line 150:  4822 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./div
+ local cmd=./div
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 277 + 1
+ n_tests=278
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;2;2;4" and cmd "./div"'
stdout differ: string "1;2;2;2;4" and cmd "./div"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:01.893025652 +0900
+++ tc.out.real	2023-04-24 00:00:01.893025652 +0900
@@ -1 +0,0 @@
-1;2;2;2;4
+ echo ----
----
+ shunit_test_failed
++ expr 76 + 1
+ n_failed=77
+ return 0
+ assert_compile_success -fPIC ./div.cb
+ assert_status 0 ../bin/cbc -fPIC ./div.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 278 + 1
+ n_tests=279
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./div.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./div.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 279 + 1
+ n_tests=280
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './div.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./div.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 77 + 1
+ n_failed=78
+ return 1
+ assert_out '0;0;1;4;7' ./mod
+ msg='0;0;1;4;7'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./mod.cb
+ assert_status 0 ../bin/cbc ./mod.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 280 + 1
+ n_tests=281
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./mod.cb
+ '[' '' = true ']'
+ ../bin/cbc ./mod.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 281 + 1
+ n_tests=282
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' './mod.cb]: status 0 expected but was: 1'
shunit[../bin/cbc ./mod.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 78 + 1
+ n_failed=79
+ return 1
+ assert_out 3 ./assoc
+ msg=3
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./assoc.cb
+ assert_status 0 ../bin/cbc ./assoc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 282 + 1
+ n_tests=283
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./assoc.cb
+ '[' '' = true ']'
+ ../bin/cbc ./assoc.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 283 + 1
+ n_tests=284
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 3 ./assoc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 284 + 1
+ n_tests=285
+ expected=3
+ shift
+ echo 3
+ ./assoc
./shunit.sh: line 150:  4926 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./assoc
+ local cmd=./assoc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 285 + 1
+ n_tests=286
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3" and cmd "./assoc"'
stdout differ: string "3" and cmd "./assoc"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:02.263025420 +0900
+++ tc.out.real	2023-04-24 00:00:02.263025420 +0900
@@ -1 +0,0 @@
-3
+ echo ----
----
+ shunit_test_failed
++ expr 79 + 1
+ n_failed=80
+ return 0
+ assert_compile_success -O ./assoc.cb
+ assert_status 0 ../bin/cbc -O ./assoc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 286 + 1
+ n_tests=287
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./assoc.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./assoc.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 287 + 1
+ n_tests=288
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 3 ./assoc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 288 + 1
+ n_tests=289
+ expected=3
+ shift
+ echo 3
+ ./assoc
./shunit.sh: line 150:  4966 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./assoc
+ local cmd=./assoc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 289 + 1
+ n_tests=290
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3" and cmd "./assoc"'
stdout differ: string "3" and cmd "./assoc"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:02.403025334 +0900
+++ tc.out.real	2023-04-24 00:00:02.413025328 +0900
@@ -1 +0,0 @@
-3
+ echo ----
----
+ shunit_test_failed
++ expr 80 + 1
+ n_failed=81
+ return 0
+ assert_compile_success -fPIC ./assoc.cb
+ assert_status 0 ../bin/cbc -fPIC ./assoc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 290 + 1
+ n_tests=291
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./assoc.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./assoc.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 291 + 1
+ n_tests=292
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './assoc.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./assoc.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 81 + 1
+ n_failed=82
+ return 1
+ read f
+ echo

++ echo test_08_bitop
++ sed 's/^test_//'
+ print 08_bitop
+ /bin/echo -n 08_bitop
08_bitop+ test_08_bitop
+ assert_out '0;1;2;3;4' ./bitand
+ msg='0;1;2;3;4'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./bitand.cb
+ assert_status 0 ../bin/cbc ./bitand.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 292 + 1
+ n_tests=293
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./bitand.cb
+ '[' '' = true ']'
+ ../bin/cbc ./bitand.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 293 + 1
+ n_tests=294
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;2;3;4' ./bitand
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 294 + 1
+ n_tests=295
+ expected='0;1;2;3;4'
+ shift
+ echo '0;1;2;3;4'
+ ./bitand
./shunit.sh: line 150:  5041 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitand
+ local cmd=./bitand
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 295 + 1
+ n_tests=296
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;2;3;4" and cmd "./bitand"'
stdout differ: string "0;1;2;3;4" and cmd "./bitand"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:02.673025166 +0900
+++ tc.out.real	2023-04-24 00:00:02.673025166 +0900
@@ -1 +0,0 @@
-0;1;2;3;4
+ echo ----
----
+ shunit_test_failed
++ expr 82 + 1
+ n_failed=83
+ return 0
+ assert_compile_success -O ./bitand.cb
+ assert_status 0 ../bin/cbc -O ./bitand.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 296 + 1
+ n_tests=297
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./bitand.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./bitand.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 297 + 1
+ n_tests=298
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;2;3;4' ./bitand
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 298 + 1
+ n_tests=299
+ expected='0;1;2;3;4'
+ shift
+ echo '0;1;2;3;4'
+ ./bitand
./shunit.sh: line 150:  5080 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitand
+ local cmd=./bitand
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 299 + 1
+ n_tests=300
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;2;3;4" and cmd "./bitand"'
stdout differ: string "0;1;2;3;4" and cmd "./bitand"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:02.793025091 +0900
+++ tc.out.real	2023-04-24 00:00:02.793025091 +0900
@@ -1 +0,0 @@
-0;1;2;3;4
+ echo ----
----
+ shunit_test_failed
++ expr 83 + 1
+ n_failed=84
+ return 0
+ assert_compile_success -fPIC ./bitand.cb
+ assert_status 0 ../bin/cbc -fPIC ./bitand.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 300 + 1
+ n_tests=301
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./bitand.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./bitand.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 301 + 1
+ n_tests=302
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './bitand.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./bitand.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 84 + 1
+ n_failed=85
+ return 1
+ assert_out '0;1;2;3;2;6;8;10' ./bitor
+ msg='0;1;2;3;2;6;8;10'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./bitor.cb
+ assert_status 0 ../bin/cbc ./bitor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 302 + 1
+ n_tests=303
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./bitor.cb
+ '[' '' = true ']'
+ ../bin/cbc ./bitor.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 303 + 1
+ n_tests=304
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;2;3;2;6;8;10' ./bitor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 304 + 1
+ n_tests=305
+ expected='0;1;2;3;2;6;8;10'
+ shift
+ echo '0;1;2;3;2;6;8;10'
+ ./bitor
./shunit.sh: line 150:  5151 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitor
+ local cmd=./bitor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 305 + 1
+ n_tests=306
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;2;3;2;6;8;10" and cmd "./bitor"'
stdout differ: string "0;1;2;3;2;6;8;10" and cmd "./bitor"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:03.033024992 +0900
+++ tc.out.real	2023-04-24 00:00:03.033024992 +0900
@@ -1 +0,0 @@
-0;1;2;3;2;6;8;10
+ echo ----
----
+ shunit_test_failed
++ expr 85 + 1
+ n_failed=86
+ return 0
+ assert_compile_success -O ./bitor.cb
+ assert_status 0 ../bin/cbc -O ./bitor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 306 + 1
+ n_tests=307
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./bitor.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./bitor.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 307 + 1
+ n_tests=308
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;2;3;2;6;8;10' ./bitor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 308 + 1
+ n_tests=309
+ expected='0;1;2;3;2;6;8;10'
+ shift
+ echo '0;1;2;3;2;6;8;10'
+ ./bitor
./shunit.sh: line 150:  5190 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitor
+ local cmd=./bitor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 309 + 1
+ n_tests=310
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;2;3;2;6;8;10" and cmd "./bitor"'
stdout differ: string "0;1;2;3;2;6;8;10" and cmd "./bitor"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:03.163024941 +0900
+++ tc.out.real	2023-04-24 00:00:03.163024941 +0900
@@ -1 +0,0 @@
-0;1;2;3;2;6;8;10
+ echo ----
----
+ shunit_test_failed
++ expr 86 + 1
+ n_failed=87
+ return 0
+ assert_compile_success -fPIC ./bitor.cb
+ assert_status 0 ../bin/cbc -fPIC ./bitor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 310 + 1
+ n_tests=311
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./bitor.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./bitor.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 311 + 1
+ n_tests=312
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './bitor.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./bitor.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 87 + 1
+ n_failed=88
+ return 1
+ assert_out '1;2;0;0;2' ./bitxor
+ msg='1;2;0;0;2'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./bitxor.cb
+ assert_status 0 ../bin/cbc ./bitxor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 312 + 1
+ n_tests=313
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./bitxor.cb
+ '[' '' = true ']'
+ ../bin/cbc ./bitxor.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 313 + 1
+ n_tests=314
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;0;0;2' ./bitxor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 314 + 1
+ n_tests=315
+ expected='1;2;0;0;2'
+ shift
+ echo '1;2;0;0;2'
+ ./bitxor
./shunit.sh: line 150:  5262 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitxor
+ local cmd=./bitxor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 315 + 1
+ n_tests=316
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;0;0;2" and cmd "./bitxor"'
stdout differ: string "1;2;0;0;2" and cmd "./bitxor"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:03.413024843 +0900
+++ tc.out.real	2023-04-24 00:00:03.413024843 +0900
@@ -1 +0,0 @@
-1;2;0;0;2
+ echo ----
----
+ shunit_test_failed
++ expr 88 + 1
+ n_failed=89
+ return 0
+ assert_compile_success -O ./bitxor.cb
+ assert_status 0 ../bin/cbc -O ./bitxor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 316 + 1
+ n_tests=317
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./bitxor.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./bitxor.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 317 + 1
+ n_tests=318
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;0;0;2' ./bitxor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 318 + 1
+ n_tests=319
+ expected='1;2;0;0;2'
+ shift
+ echo '1;2;0;0;2'
+ ./bitxor
./shunit.sh: line 150:  5300 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitxor
+ local cmd=./bitxor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 319 + 1
+ n_tests=320
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;0;0;2" and cmd "./bitxor"'
stdout differ: string "1;2;0;0;2" and cmd "./bitxor"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:03.533024795 +0900
+++ tc.out.real	2023-04-24 00:00:03.533024795 +0900
@@ -1 +0,0 @@
-1;2;0;0;2
+ echo ----
----
+ shunit_test_failed
++ expr 89 + 1
+ n_failed=90
+ return 0
+ assert_compile_success -fPIC ./bitxor.cb
+ assert_status 0 ../bin/cbc -fPIC ./bitxor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 320 + 1
+ n_tests=321
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./bitxor.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./bitxor.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 321 + 1
+ n_tests=322
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './bitxor.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./bitxor.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 90 + 1
+ n_failed=91
+ return 1
+ assert_out '-1;-2;0' ./bitnot
+ msg='-1;-2;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./bitnot.cb
+ assert_status 0 ../bin/cbc ./bitnot.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 322 + 1
+ n_tests=323
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./bitnot.cb
+ '[' '' = true ']'
+ ../bin/cbc ./bitnot.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 323 + 1
+ n_tests=324
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-1;-2;0' ./bitnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 324 + 1
+ n_tests=325
+ expected='-1;-2;0'
+ shift
+ echo '-1;-2;0'
+ ./bitnot
./shunit.sh: line 150:  5371 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitnot
+ local cmd=./bitnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 325 + 1
+ n_tests=326
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-1;-2;0" and cmd "./bitnot"'
stdout differ: string "-1;-2;0" and cmd "./bitnot"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:03.783024699 +0900
+++ tc.out.real	2023-04-24 00:00:03.783024699 +0900
@@ -1 +0,0 @@
--1;-2;0
+ echo ----
----
+ shunit_test_failed
++ expr 91 + 1
+ n_failed=92
+ return 0
+ assert_compile_success -O ./bitnot.cb
+ assert_status 0 ../bin/cbc -O ./bitnot.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 326 + 1
+ n_tests=327
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./bitnot.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./bitnot.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 327 + 1
+ n_tests=328
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-1;-2;0' ./bitnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 328 + 1
+ n_tests=329
+ expected='-1;-2;0'
+ shift
+ echo '-1;-2;0'
+ ./bitnot
./shunit.sh: line 150:  5409 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./bitnot
+ local cmd=./bitnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 329 + 1
+ n_tests=330
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-1;-2;0" and cmd "./bitnot"'
stdout differ: string "-1;-2;0" and cmd "./bitnot"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:03.893024655 +0900
+++ tc.out.real	2023-04-24 00:00:03.893024655 +0900
@@ -1 +0,0 @@
--1;-2;0
+ echo ----
----
+ shunit_test_failed
++ expr 92 + 1
+ n_failed=93
+ return 0
+ assert_compile_success -fPIC ./bitnot.cb
+ assert_status 0 ../bin/cbc -fPIC ./bitnot.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 330 + 1
+ n_tests=331
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./bitnot.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./bitnot.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 331 + 1
+ n_tests=332
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './bitnot.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./bitnot.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 93 + 1
+ n_failed=94
+ return 1
+ assert_out '1;2;4;8;16' ./lshift
+ msg='1;2;4;8;16'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./lshift.cb
+ assert_status 0 ../bin/cbc ./lshift.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 332 + 1
+ n_tests=333
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./lshift.cb
+ '[' '' = true ']'
+ ../bin/cbc ./lshift.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 333 + 1
+ n_tests=334
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;4;8;16' ./lshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 334 + 1
+ n_tests=335
+ expected='1;2;4;8;16'
+ shift
+ echo '1;2;4;8;16'
+ ./lshift
./shunit.sh: line 150:  5480 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lshift
+ local cmd=./lshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 335 + 1
+ n_tests=336
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;4;8;16" and cmd "./lshift"'
stdout differ: string "1;2;4;8;16" and cmd "./lshift"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:04.153024553 +0900
+++ tc.out.real	2023-04-24 00:00:04.153024553 +0900
@@ -1 +0,0 @@
-1;2;4;8;16
+ echo ----
----
+ shunit_test_failed
++ expr 94 + 1
+ n_failed=95
+ return 0
+ assert_compile_success -O ./lshift.cb
+ assert_status 0 ../bin/cbc -O ./lshift.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 336 + 1
+ n_tests=337
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./lshift.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./lshift.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 337 + 1
+ n_tests=338
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;4;8;16' ./lshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 338 + 1
+ n_tests=339
+ expected='1;2;4;8;16'
+ shift
+ echo '1;2;4;8;16'
+ ./lshift
./shunit.sh: line 150:  5519 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lshift
+ local cmd=./lshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 339 + 1
+ n_tests=340
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;4;8;16" and cmd "./lshift"'
stdout differ: string "1;2;4;8;16" and cmd "./lshift"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:04.273024506 +0900
+++ tc.out.real	2023-04-24 00:00:04.273024506 +0900
@@ -1 +0,0 @@
-1;2;4;8;16
+ echo ----
----
+ shunit_test_failed
++ expr 95 + 1
+ n_failed=96
+ return 0
+ assert_compile_success -fPIC ./lshift.cb
+ assert_status 0 ../bin/cbc -fPIC ./lshift.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 340 + 1
+ n_tests=341
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./lshift.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./lshift.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 341 + 1
+ n_tests=342
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './lshift.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./lshift.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 96 + 1
+ n_failed=97
+ return 1
+ assert_out '16;8;4;2;1' ./rshift
+ msg='16;8;4;2;1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./rshift.cb
+ assert_status 0 ../bin/cbc ./rshift.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 342 + 1
+ n_tests=343
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./rshift.cb
+ '[' '' = true ']'
+ ../bin/cbc ./rshift.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 343 + 1
+ n_tests=344
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '16;8;4;2;1' ./rshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 344 + 1
+ n_tests=345
+ expected='16;8;4;2;1'
+ shift
+ echo '16;8;4;2;1'
+ ./rshift
./shunit.sh: line 150:  5589 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./rshift
+ local cmd=./rshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 345 + 1
+ n_tests=346
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "16;8;4;2;1" and cmd "./rshift"'
stdout differ: string "16;8;4;2;1" and cmd "./rshift"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:04.513024413 +0900
+++ tc.out.real	2023-04-24 00:00:04.513024413 +0900
@@ -1 +0,0 @@
-16;8;4;2;1
+ echo ----
----
+ shunit_test_failed
++ expr 97 + 1
+ n_failed=98
+ return 0
+ assert_compile_success -O ./rshift.cb
+ assert_status 0 ../bin/cbc -O ./rshift.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 346 + 1
+ n_tests=347
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./rshift.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./rshift.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 347 + 1
+ n_tests=348
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '16;8;4;2;1' ./rshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 348 + 1
+ n_tests=349
+ expected='16;8;4;2;1'
+ shift
+ echo '16;8;4;2;1'
+ ./rshift
./shunit.sh: line 150:  5628 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./rshift
+ local cmd=./rshift
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 349 + 1
+ n_tests=350
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "16;8;4;2;1" and cmd "./rshift"'
stdout differ: string "16;8;4;2;1" and cmd "./rshift"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:04.643024362 +0900
+++ tc.out.real	2023-04-24 00:00:04.643024362 +0900
@@ -1 +0,0 @@
-16;8;4;2;1
+ echo ----
----
+ shunit_test_failed
++ expr 98 + 1
+ n_failed=99
+ return 0
+ assert_compile_success -fPIC ./rshift.cb
+ assert_status 0 ../bin/cbc -fPIC ./rshift.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 350 + 1
+ n_tests=351
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./rshift.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./rshift.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 351 + 1
+ n_tests=352
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './rshift.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./rshift.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 99 + 1
+ n_failed=100
+ return 1
+ read f
+ echo

++ echo test_09_cmp
++ sed 's/^test_//'
+ print 09_cmp
+ /bin/echo -n 09_cmp
09_cmp+ test_09_cmp
+ assert_out '0;1;0;0;1;0' ./eq
+ msg='0;1;0;0;1;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./eq.cb
+ assert_status 0 ../bin/cbc ./eq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 352 + 1
+ n_tests=353
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./eq.cb
+ '[' '' = true ']'
+ ../bin/cbc ./eq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 353 + 1
+ n_tests=354
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;0;0;1;0' ./eq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 354 + 1
+ n_tests=355
+ expected='0;1;0;0;1;0'
+ shift
+ echo '0;1;0;0;1;0'
+ ./eq
./shunit.sh: line 150:  5703 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./eq
+ local cmd=./eq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 355 + 1
+ n_tests=356
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;0;0;1;0" and cmd "./eq"'
stdout differ: string "0;1;0;0;1;0" and cmd "./eq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:04.903024261 +0900
+++ tc.out.real	2023-04-24 00:00:04.903024261 +0900
@@ -1 +0,0 @@
-0;1;0;0;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 100 + 1
+ n_failed=101
+ return 0
+ assert_compile_success -O ./eq.cb
+ assert_status 0 ../bin/cbc -O ./eq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 356 + 1
+ n_tests=357
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./eq.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./eq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 357 + 1
+ n_tests=358
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;0;0;1;0' ./eq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 358 + 1
+ n_tests=359
+ expected='0;1;0;0;1;0'
+ shift
+ echo '0;1;0;0;1;0'
+ ./eq
./shunit.sh: line 150:  5742 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./eq
+ local cmd=./eq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 359 + 1
+ n_tests=360
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;0;0;1;0" and cmd "./eq"'
stdout differ: string "0;1;0;0;1;0" and cmd "./eq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:05.033024210 +0900
+++ tc.out.real	2023-04-24 00:00:05.033024210 +0900
@@ -1 +0,0 @@
-0;1;0;0;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 101 + 1
+ n_failed=102
+ return 0
+ assert_compile_success -fPIC ./eq.cb
+ assert_status 0 ../bin/cbc -fPIC ./eq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 360 + 1
+ n_tests=361
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./eq.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./eq.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 361 + 1
+ n_tests=362
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './eq.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./eq.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 102 + 1
+ n_failed=103
+ return 1
+ assert_out '1;0;1;1;0;1' ./neq
+ msg='1;0;1;1;0;1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./neq.cb
+ assert_status 0 ../bin/cbc ./neq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 362 + 1
+ n_tests=363
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./neq.cb
+ '[' '' = true ']'
+ ../bin/cbc ./neq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 363 + 1
+ n_tests=364
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;1;1;0;1' ./neq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 364 + 1
+ n_tests=365
+ expected='1;0;1;1;0;1'
+ shift
+ echo '1;0;1;1;0;1'
+ ./neq
./shunit.sh: line 150:  5813 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./neq
+ local cmd=./neq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 365 + 1
+ n_tests=366
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;1;1;0;1" and cmd "./neq"'
stdout differ: string "1;0;1;1;0;1" and cmd "./neq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:05.293024107 +0900
+++ tc.out.real	2023-04-24 00:00:05.293024107 +0900
@@ -1 +0,0 @@
-1;0;1;1;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 103 + 1
+ n_failed=104
+ return 0
+ assert_compile_success -O ./neq.cb
+ assert_status 0 ../bin/cbc -O ./neq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 366 + 1
+ n_tests=367
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./neq.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./neq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 367 + 1
+ n_tests=368
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;1;1;0;1' ./neq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 368 + 1
+ n_tests=369
+ expected='1;0;1;1;0;1'
+ shift
+ echo '1;0;1;1;0;1'
+ ./neq
./shunit.sh: line 150:  5852 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./neq
+ local cmd=./neq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 369 + 1
+ n_tests=370
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;1;1;0;1" and cmd "./neq"'
stdout differ: string "1;0;1;1;0;1" and cmd "./neq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:05.423024056 +0900
+++ tc.out.real	2023-04-24 00:00:05.423024056 +0900
@@ -1 +0,0 @@
-1;0;1;1;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 104 + 1
+ n_failed=105
+ return 0
+ assert_compile_success -fPIC ./neq.cb
+ assert_status 0 ../bin/cbc -fPIC ./neq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 370 + 1
+ n_tests=371
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./neq.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./neq.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 371 + 1
+ n_tests=372
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './neq.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./neq.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 105 + 1
+ n_failed=106
+ return 1
+ assert_out '1;0;0' ./gt
+ msg='1;0;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./gt.cb
+ assert_status 0 ../bin/cbc ./gt.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 372 + 1
+ n_tests=373
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./gt.cb
+ '[' '' = true ']'
+ ../bin/cbc ./gt.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 373 + 1
+ n_tests=374
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;0' ./gt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 374 + 1
+ n_tests=375
+ expected='1;0;0'
+ shift
+ echo '1;0;0'
+ ./gt
./shunit.sh: line 150:  5923 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./gt
+ local cmd=./gt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 375 + 1
+ n_tests=376
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;0" and cmd "./gt"'
stdout differ: string "1;0;0" and cmd "./gt"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:05.683023954 +0900
+++ tc.out.real	2023-04-24 00:00:05.683023954 +0900
@@ -1 +0,0 @@
-1;0;0
+ echo ----
----
+ shunit_test_failed
++ expr 106 + 1
+ n_failed=107
+ return 0
+ assert_compile_success -O ./gt.cb
+ assert_status 0 ../bin/cbc -O ./gt.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 376 + 1
+ n_tests=377
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./gt.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./gt.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 377 + 1
+ n_tests=378
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;0' ./gt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 378 + 1
+ n_tests=379
+ expected='1;0;0'
+ shift
+ echo '1;0;0'
+ ./gt
./shunit.sh: line 150:  5961 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./gt
+ local cmd=./gt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 379 + 1
+ n_tests=380
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;0" and cmd "./gt"'
stdout differ: string "1;0;0" and cmd "./gt"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:05.803023906 +0900
+++ tc.out.real	2023-04-24 00:00:05.803023906 +0900
@@ -1 +0,0 @@
-1;0;0
+ echo ----
----
+ shunit_test_failed
++ expr 107 + 1
+ n_failed=108
+ return 0
+ assert_compile_success -fPIC ./gt.cb
+ assert_status 0 ../bin/cbc -fPIC ./gt.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 380 + 1
+ n_tests=381
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./gt.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./gt.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 381 + 1
+ n_tests=382
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './gt.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./gt.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 108 + 1
+ n_failed=109
+ return 1
+ assert_out '0;0;1' ./lt
+ msg='0;0;1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./lt.cb
+ assert_status 0 ../bin/cbc ./lt.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 382 + 1
+ n_tests=383
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./lt.cb
+ '[' '' = true ']'
+ ../bin/cbc ./lt.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 383 + 1
+ n_tests=384
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;1' ./lt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 384 + 1
+ n_tests=385
+ expected='0;0;1'
+ shift
+ echo '0;0;1'
+ ./lt
./shunit.sh: line 150:  6033 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lt
+ local cmd=./lt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 385 + 1
+ n_tests=386
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;1" and cmd "./lt"'
stdout differ: string "0;0;1" and cmd "./lt"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:06.053023808 +0900
+++ tc.out.real	2023-04-24 00:00:06.053023808 +0900
@@ -1 +0,0 @@
-0;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 109 + 1
+ n_failed=110
+ return 0
+ assert_compile_success -O ./lt.cb
+ assert_status 0 ../bin/cbc -O ./lt.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 386 + 1
+ n_tests=387
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./lt.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./lt.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 387 + 1
+ n_tests=388
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;1' ./lt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 388 + 1
+ n_tests=389
+ expected='0;0;1'
+ shift
+ echo '0;0;1'
+ ./lt
./shunit.sh: line 150:  6072 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lt
+ local cmd=./lt
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 389 + 1
+ n_tests=390
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;1" and cmd "./lt"'
stdout differ: string "0;0;1" and cmd "./lt"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:06.183023757 +0900
+++ tc.out.real	2023-04-24 00:00:06.183023757 +0900
@@ -1 +0,0 @@
-0;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 110 + 1
+ n_failed=111
+ return 0
+ assert_compile_success -fPIC ./lt.cb
+ assert_status 0 ../bin/cbc -fPIC ./lt.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 390 + 1
+ n_tests=391
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./lt.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./lt.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 391 + 1
+ n_tests=392
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './lt.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./lt.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 111 + 1
+ n_failed=112
+ return 1
+ assert_out '1;1;0' ./gteq
+ msg='1;1;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./gteq.cb
+ assert_status 0 ../bin/cbc ./gteq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 392 + 1
+ n_tests=393
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./gteq.cb
+ '[' '' = true ']'
+ ../bin/cbc ./gteq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 393 + 1
+ n_tests=394
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;1;0' ./gteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 394 + 1
+ n_tests=395
+ expected='1;1;0'
+ shift
+ echo '1;1;0'
+ ./gteq
./shunit.sh: line 150:  6144 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./gteq
+ local cmd=./gteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 395 + 1
+ n_tests=396
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;1;0" and cmd "./gteq"'
stdout differ: string "1;1;0" and cmd "./gteq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:06.433023659 +0900
+++ tc.out.real	2023-04-24 00:00:06.433023659 +0900
@@ -1 +0,0 @@
-1;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 112 + 1
+ n_failed=113
+ return 0
+ assert_compile_success -O ./gteq.cb
+ assert_status 0 ../bin/cbc -O ./gteq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 396 + 1
+ n_tests=397
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./gteq.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./gteq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 397 + 1
+ n_tests=398
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;1;0' ./gteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 398 + 1
+ n_tests=399
+ expected='1;1;0'
+ shift
+ echo '1;1;0'
+ ./gteq
./shunit.sh: line 150:  6182 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./gteq
+ local cmd=./gteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 399 + 1
+ n_tests=400
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;1;0" and cmd "./gteq"'
stdout differ: string "1;1;0" and cmd "./gteq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:06.553023612 +0900
+++ tc.out.real	2023-04-24 00:00:06.553023612 +0900
@@ -1 +0,0 @@
-1;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 113 + 1
+ n_failed=114
+ return 0
+ assert_compile_success -fPIC ./gteq.cb
+ assert_status 0 ../bin/cbc -fPIC ./gteq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 400 + 1
+ n_tests=401
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./gteq.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./gteq.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 401 + 1
+ n_tests=402
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './gteq.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./gteq.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 114 + 1
+ n_failed=115
+ return 1
+ assert_out '0;1;1' ./lteq
+ msg='0;1;1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./lteq.cb
+ assert_status 0 ../bin/cbc ./lteq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 402 + 1
+ n_tests=403
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./lteq.cb
+ '[' '' = true ']'
+ ../bin/cbc ./lteq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 403 + 1
+ n_tests=404
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;1' ./lteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 404 + 1
+ n_tests=405
+ expected='0;1;1'
+ shift
+ echo '0;1;1'
+ ./lteq
./shunit.sh: line 150:  6253 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lteq
+ local cmd=./lteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 405 + 1
+ n_tests=406
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;1" and cmd "./lteq"'
stdout differ: string "0;1;1" and cmd "./lteq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:06.793023519 +0900
+++ tc.out.real	2023-04-24 00:00:06.793023519 +0900
@@ -1 +0,0 @@
-0;1;1
+ echo ----
----
+ shunit_test_failed
++ expr 115 + 1
+ n_failed=116
+ return 0
+ assert_compile_success -O ./lteq.cb
+ assert_status 0 ../bin/cbc -O ./lteq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 406 + 1
+ n_tests=407
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./lteq.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./lteq.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 407 + 1
+ n_tests=408
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;1' ./lteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 408 + 1
+ n_tests=409
+ expected='0;1;1'
+ shift
+ echo '0;1;1'
+ ./lteq
./shunit.sh: line 150:  6292 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./lteq
+ local cmd=./lteq
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 409 + 1
+ n_tests=410
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;1" and cmd "./lteq"'
stdout differ: string "0;1;1" and cmd "./lteq"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:06.913023471 +0900
+++ tc.out.real	2023-04-24 00:00:06.913023471 +0900
@@ -1 +0,0 @@
-0;1;1
+ echo ----
----
+ shunit_test_failed
++ expr 116 + 1
+ n_failed=117
+ return 0
+ assert_compile_success -fPIC ./lteq.cb
+ assert_status 0 ../bin/cbc -fPIC ./lteq.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 410 + 1
+ n_tests=411
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./lteq.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./lteq.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 411 + 1
+ n_tests=412
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './lteq.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./lteq.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 117 + 1
+ n_failed=118
+ return 1
+ read f
+ echo

++ echo test_10_assign
++ sed 's/^test_//'
+ print 10_assign
+ /bin/echo -n 10_assign
10_assign+ test_10_assign
+ assert_out '1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12' ./assign
+ msg='1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./assign.cb
+ assert_status 0 ../bin/cbc ./assign.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 412 + 1
+ n_tests=413
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./assign.cb
+ '[' '' = true ']'
+ ../bin/cbc ./assign.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 413 + 1
+ n_tests=414
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12' ./assign
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 414 + 1
+ n_tests=415
+ expected='1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12'
+ shift
+ echo '1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12'
+ ./assign
./shunit.sh: line 150:  6369 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./assign
+ local cmd=./assign
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 415 + 1
+ n_tests=416
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12" and cmd "./assign"'
stdout differ: string "1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12" and cmd "./assign"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:07.193023362 +0900
+++ tc.out.real	2023-04-24 00:00:07.193023362 +0900
@@ -1 +0,0 @@
-1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12
+ echo ----
----
+ shunit_test_failed
++ expr 118 + 1
+ n_failed=119
+ return 0
+ assert_compile_success -O ./assign.cb
+ assert_status 0 ../bin/cbc -O ./assign.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 416 + 1
+ n_tests=417
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./assign.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./assign.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 417 + 1
+ n_tests=418
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12' ./assign
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 418 + 1
+ n_tests=419
+ expected='1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12'
+ shift
+ echo '1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12'
+ ./assign
./shunit.sh: line 150:  6409 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./assign
+ local cmd=./assign
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 419 + 1
+ n_tests=420
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12" and cmd "./assign"'
stdout differ: string "1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12" and cmd "./assign"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:07.333023308 +0900
+++ tc.out.real	2023-04-24 00:00:07.343023302 +0900
@@ -1 +0,0 @@
-1;2;2;3;4;5;6;7;8;8;9;10;11;777;S;12
+ echo ----
----
+ shunit_test_failed
++ expr 119 + 1
+ n_failed=120
+ return 0
+ assert_compile_success -fPIC ./assign.cb
+ assert_status 0 ../bin/cbc -fPIC ./assign.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 420 + 1
+ n_tests=421
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./assign.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./assign.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 421 + 1
+ n_tests=422
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './assign.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./assign.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 120 + 1
+ n_failed=121
+ return 1
+ assert_out '3;4;3;12;4;1;1;7;5;1;4;e;H;76;75;1;3;6;82;81' ./opassign
+ msg='3;4;3;12;4;1;1;7;5;1;4;e;H;76;75;1;3;6;82;81'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./opassign.cb
+ assert_status 0 ../bin/cbc ./opassign.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 422 + 1
+ n_tests=423
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./opassign.cb
+ '[' '' = true ']'
+ ../bin/cbc ./opassign.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 423 + 1
+ n_tests=424
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' './opassign.cb]: status 0 expected but was: 1'
shunit[../bin/cbc ./opassign.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 121 + 1
+ n_failed=122
+ return 1
+ assert_out '0;1;2;2;3;3;4;5;5' ./inc
+ msg='0;1;2;2;3;3;4;5;5'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./inc.cb
+ assert_status 0 ../bin/cbc ./inc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 424 + 1
+ n_tests=425
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./inc.cb
+ '[' '' = true ']'
+ ../bin/cbc ./inc.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 425 + 1
+ n_tests=426
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;2;2;3;3;4;5;5' ./inc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 426 + 1
+ n_tests=427
+ expected='0;1;2;2;3;3;4;5;5'
+ shift
+ echo '0;1;2;2;3;3;4;5;5'
+ ./inc
./shunit.sh: line 150:  6514 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./inc
+ local cmd=./inc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 427 + 1
+ n_tests=428
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;2;2;3;3;4;5;5" and cmd "./inc"'
stdout differ: string "0;1;2;2;3;3;4;5;5" and cmd "./inc"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:07.743023146 +0900
+++ tc.out.real	2023-04-24 00:00:07.743023146 +0900
@@ -1 +0,0 @@
-0;1;2;2;3;3;4;5;5
+ echo ----
----
+ shunit_test_failed
++ expr 122 + 1
+ n_failed=123
+ return 0
+ assert_compile_success -O ./inc.cb
+ assert_status 0 ../bin/cbc -O ./inc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 428 + 1
+ n_tests=429
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./inc.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./inc.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 429 + 1
+ n_tests=430
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;2;2;3;3;4;5;5' ./inc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 430 + 1
+ n_tests=431
+ expected='0;1;2;2;3;3;4;5;5'
+ shift
+ echo '0;1;2;2;3;3;4;5;5'
+ ./inc
./shunit.sh: line 150:  6553 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./inc
+ local cmd=./inc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 431 + 1
+ n_tests=432
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;2;2;3;3;4;5;5" and cmd "./inc"'
stdout differ: string "0;1;2;2;3;3;4;5;5" and cmd "./inc"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:07.883023091 +0900
+++ tc.out.real	2023-04-24 00:00:07.883023091 +0900
@@ -1 +0,0 @@
-0;1;2;2;3;3;4;5;5
+ echo ----
----
+ shunit_test_failed
++ expr 123 + 1
+ n_failed=124
+ return 0
+ assert_compile_success -fPIC ./inc.cb
+ assert_status 0 ../bin/cbc -fPIC ./inc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 432 + 1
+ n_tests=433
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./inc.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./inc.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 433 + 1
+ n_tests=434
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './inc.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./inc.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 124 + 1
+ n_failed=125
+ return 1
+ assert_out '4;3;2;2;1;1;0' ./dec
+ msg='4;3;2;2;1;1;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./dec.cb
+ assert_status 0 ../bin/cbc ./dec.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 434 + 1
+ n_tests=435
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./dec.cb
+ '[' '' = true ']'
+ ../bin/cbc ./dec.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 435 + 1
+ n_tests=436
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '4;3;2;2;1;1;0' ./dec
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 436 + 1
+ n_tests=437
+ expected='4;3;2;2;1;1;0'
+ shift
+ echo '4;3;2;2;1;1;0'
+ ./dec
./shunit.sh: line 150:  6624 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dec
+ local cmd=./dec
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 437 + 1
+ n_tests=438
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "4;3;2;2;1;1;0" and cmd "./dec"'
stdout differ: string "4;3;2;2;1;1;0" and cmd "./dec"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:08.133022993 +0900
+++ tc.out.real	2023-04-24 00:00:08.133022993 +0900
@@ -1 +0,0 @@
-4;3;2;2;1;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 125 + 1
+ n_failed=126
+ return 0
+ assert_compile_success -O ./dec.cb
+ assert_status 0 ../bin/cbc -O ./dec.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 438 + 1
+ n_tests=439
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./dec.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./dec.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 439 + 1
+ n_tests=440
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '4;3;2;2;1;1;0' ./dec
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 440 + 1
+ n_tests=441
+ expected='4;3;2;2;1;1;0'
+ shift
+ echo '4;3;2;2;1;1;0'
+ ./dec
./shunit.sh: line 150:  6663 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dec
+ local cmd=./dec
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 441 + 1
+ n_tests=442
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "4;3;2;2;1;1;0" and cmd "./dec"'
stdout differ: string "4;3;2;2;1;1;0" and cmd "./dec"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:08.263022942 +0900
+++ tc.out.real	2023-04-24 00:00:08.263022942 +0900
@@ -1 +0,0 @@
-4;3;2;2;1;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 126 + 1
+ n_failed=127
+ return 0
+ assert_compile_success -fPIC ./dec.cb
+ assert_status 0 ../bin/cbc -fPIC ./dec.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 442 + 1
+ n_tests=443
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./dec.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./dec.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 443 + 1
+ n_tests=444
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './dec.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./dec.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 127 + 1
+ n_failed=128
+ return 1
+ assert_compile_error textwrite.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 444 + 1
+ n_tests=445
+ ../bin/cbc textwrite.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 445 + 1
+ n_tests=446
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_12_if
++ sed 's/^test_//'
+ print 12_if
+ /bin/echo -n 12_if
12_if+ test_12_if
+ assert_ok ./if1
+ assert_out OK ./if1
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./if1.cb
+ assert_status 0 ../bin/cbc ./if1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 446 + 1
+ n_tests=447
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./if1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./if1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 447 + 1
+ n_tests=448
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./if1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 448 + 1
+ n_tests=449
+ expected=OK
+ shift
+ echo OK
+ ./if1
./shunit.sh: line 150:  6766 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./if1
+ local cmd=./if1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 449 + 1
+ n_tests=450
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./if1"'
stdout differ: string "OK" and cmd "./if1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:08.603022809 +0900
+++ tc.out.real	2023-04-24 00:00:08.603022809 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 128 + 1
+ n_failed=129
+ return 0
+ assert_compile_success -O ./if1.cb
+ assert_status 0 ../bin/cbc -O ./if1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 450 + 1
+ n_tests=451
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./if1.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./if1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 451 + 1
+ n_tests=452
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./if1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 452 + 1
+ n_tests=453
+ expected=OK
+ shift
+ echo OK
+ ./if1
./shunit.sh: line 150:  6805 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./if1
+ local cmd=./if1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 453 + 1
+ n_tests=454
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./if1"'
stdout differ: string "OK" and cmd "./if1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:08.723022761 +0900
+++ tc.out.real	2023-04-24 00:00:08.723022761 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 129 + 1
+ n_failed=130
+ return 0
+ assert_compile_success -fPIC ./if1.cb
+ assert_status 0 ../bin/cbc -fPIC ./if1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 454 + 1
+ n_tests=455
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./if1.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./if1.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 455 + 1
+ n_tests=456
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './if1.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./if1.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 130 + 1
+ n_failed=131
+ return 1
+ assert_ok ./if2
+ assert_out OK ./if2
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./if2.cb
+ assert_status 0 ../bin/cbc ./if2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 456 + 1
+ n_tests=457
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./if2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./if2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 457 + 1
+ n_tests=458
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./if2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 458 + 1
+ n_tests=459
+ expected=OK
+ shift
+ echo OK
+ ./if2
./shunit.sh: line 150:  6876 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./if2
+ local cmd=./if2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 459 + 1
+ n_tests=460
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./if2"'
stdout differ: string "OK" and cmd "./if2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:08.963022668 +0900
+++ tc.out.real	2023-04-24 00:00:08.963022668 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 131 + 1
+ n_failed=132
+ return 0
+ assert_compile_success -O ./if2.cb
+ assert_status 0 ../bin/cbc -O ./if2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 460 + 1
+ n_tests=461
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./if2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./if2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 461 + 1
+ n_tests=462
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./if2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 462 + 1
+ n_tests=463
+ expected=OK
+ shift
+ echo OK
+ ./if2
./shunit.sh: line 150:  6914 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./if2
+ local cmd=./if2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 463 + 1
+ n_tests=464
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./if2"'
stdout differ: string "OK" and cmd "./if2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:09.073022625 +0900
+++ tc.out.real	2023-04-24 00:00:09.073022625 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 132 + 1
+ n_failed=133
+ return 0
+ assert_compile_success -fPIC ./if2.cb
+ assert_status 0 ../bin/cbc -fPIC ./if2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 464 + 1
+ n_tests=465
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./if2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./if2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 465 + 1
+ n_tests=466
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './if2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./if2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 133 + 1
+ n_failed=134
+ return 1
+ read f
+ echo

++ echo test_13_logical
++ sed 's/^test_//'
+ print 13_logical
+ /bin/echo -n 13_logical
13_logical+ test_13_logical
+ assert_out '1;0;0;0;1' ./logicalnot
+ msg='1;0;0;0;1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./logicalnot.cb
+ assert_status 0 ../bin/cbc ./logicalnot.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 466 + 1
+ n_tests=467
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./logicalnot.cb
+ '[' '' = true ']'
+ ../bin/cbc ./logicalnot.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 467 + 1
+ n_tests=468
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;0;0;1' ./logicalnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 468 + 1
+ n_tests=469
+ expected='1;0;0;0;1'
+ shift
+ echo '1;0;0;0;1'
+ ./logicalnot
./shunit.sh: line 150:  6988 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./logicalnot
+ local cmd=./logicalnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 469 + 1
+ n_tests=470
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;0;0;1" and cmd "./logicalnot"'
stdout differ: string "1;0;0;0;1" and cmd "./logicalnot"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:09.313022532 +0900
+++ tc.out.real	2023-04-24 00:00:09.313022532 +0900
@@ -1 +0,0 @@
-1;0;0;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 134 + 1
+ n_failed=135
+ return 0
+ assert_compile_success -O ./logicalnot.cb
+ assert_status 0 ../bin/cbc -O ./logicalnot.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 470 + 1
+ n_tests=471
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./logicalnot.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./logicalnot.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 471 + 1
+ n_tests=472
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;0;0;0;1' ./logicalnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 472 + 1
+ n_tests=473
+ expected='1;0;0;0;1'
+ shift
+ echo '1;0;0;0;1'
+ ./logicalnot
./shunit.sh: line 150:  7027 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./logicalnot
+ local cmd=./logicalnot
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 473 + 1
+ n_tests=474
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;0;0;0;1" and cmd "./logicalnot"'
stdout differ: string "1;0;0;0;1" and cmd "./logicalnot"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:09.443022481 +0900
+++ tc.out.real	2023-04-24 00:00:09.443022481 +0900
@@ -1 +0,0 @@
-1;0;0;0;1
+ echo ----
----
+ shunit_test_failed
++ expr 135 + 1
+ n_failed=136
+ return 0
+ assert_compile_success -fPIC ./logicalnot.cb
+ assert_status 0 ../bin/cbc -fPIC ./logicalnot.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 474 + 1
+ n_tests=475
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./logicalnot.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./logicalnot.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 475 + 1
+ n_tests=476
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './logicalnot.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./logicalnot.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 136 + 1
+ n_failed=137
+ return 1
+ assert_out 'OK;OK;OK;OK;OK' ./condexpr
+ msg='OK;OK;OK;OK;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./condexpr.cb
+ assert_status 0 ../bin/cbc ./condexpr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 476 + 1
+ n_tests=477
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./condexpr.cb
+ '[' '' = true ']'
+ ../bin/cbc ./condexpr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 477 + 1
+ n_tests=478
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'OK;OK;OK;OK;OK' ./condexpr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 478 + 1
+ n_tests=479
+ expected='OK;OK;OK;OK;OK'
+ shift
+ echo 'OK;OK;OK;OK;OK'
+ ./condexpr
./shunit.sh: line 150:  7099 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./condexpr
+ local cmd=./condexpr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 479 + 1
+ n_tests=480
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK;OK;OK;OK;OK" and cmd "./condexpr"'
stdout differ: string "OK;OK;OK;OK;OK" and cmd "./condexpr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:09.703022380 +0900
+++ tc.out.real	2023-04-24 00:00:09.703022380 +0900
@@ -1 +0,0 @@
-OK;OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 137 + 1
+ n_failed=138
+ return 0
+ assert_compile_success -O ./condexpr.cb
+ assert_status 0 ../bin/cbc -O ./condexpr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 480 + 1
+ n_tests=481
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./condexpr.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./condexpr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 481 + 1
+ n_tests=482
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'OK;OK;OK;OK;OK' ./condexpr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 482 + 1
+ n_tests=483
+ expected='OK;OK;OK;OK;OK'
+ shift
+ echo 'OK;OK;OK;OK;OK'
+ ./condexpr
./shunit.sh: line 150:  7138 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./condexpr
+ local cmd=./condexpr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 483 + 1
+ n_tests=484
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK;OK;OK;OK;OK" and cmd "./condexpr"'
stdout differ: string "OK;OK;OK;OK;OK" and cmd "./condexpr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:09.833022329 +0900
+++ tc.out.real	2023-04-24 00:00:09.833022329 +0900
@@ -1 +0,0 @@
-OK;OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 138 + 1
+ n_failed=139
+ return 0
+ assert_compile_success -fPIC ./condexpr.cb
+ assert_status 0 ../bin/cbc -fPIC ./condexpr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 484 + 1
+ n_tests=485
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./condexpr.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./condexpr.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 485 + 1
+ n_tests=486
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './condexpr.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./condexpr.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 139 + 1
+ n_failed=140
+ return 1
+ assert_out '0;0;0;2;OK' ./logicaland
+ msg='0;0;0;2;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./logicaland.cb
+ assert_status 0 ../bin/cbc ./logicaland.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 486 + 1
+ n_tests=487
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./logicaland.cb
+ '[' '' = true ']'
+ ../bin/cbc ./logicaland.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 487 + 1
+ n_tests=488
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;0;2;OK' ./logicaland
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 488 + 1
+ n_tests=489
+ expected='0;0;0;2;OK'
+ shift
+ echo '0;0;0;2;OK'
+ ./logicaland
./shunit.sh: line 150:  7210 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./logicaland
+ local cmd=./logicaland
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 489 + 1
+ n_tests=490
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;0;2;OK" and cmd "./logicaland"'
stdout differ: string "0;0;0;2;OK" and cmd "./logicaland"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:10.093022227 +0900
+++ tc.out.real	2023-04-24 00:00:10.093022227 +0900
@@ -1 +0,0 @@
-0;0;0;2;OK
+ echo ----
----
+ shunit_test_failed
++ expr 140 + 1
+ n_failed=141
+ return 0
+ assert_compile_success -O ./logicaland.cb
+ assert_status 0 ../bin/cbc -O ./logicaland.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 490 + 1
+ n_tests=491
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./logicaland.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./logicaland.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 491 + 1
+ n_tests=492
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;0;2;OK' ./logicaland
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 492 + 1
+ n_tests=493
+ expected='0;0;0;2;OK'
+ shift
+ echo '0;0;0;2;OK'
+ ./logicaland
./shunit.sh: line 150:  7249 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./logicaland
+ local cmd=./logicaland
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 493 + 1
+ n_tests=494
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;0;2;OK" and cmd "./logicaland"'
stdout differ: string "0;0;0;2;OK" and cmd "./logicaland"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:10.223022175 +0900
+++ tc.out.real	2023-04-24 00:00:10.223022175 +0900
@@ -1 +0,0 @@
-0;0;0;2;OK
+ echo ----
----
+ shunit_test_failed
++ expr 141 + 1
+ n_failed=142
+ return 0
+ assert_compile_success -fPIC ./logicaland.cb
+ assert_status 0 ../bin/cbc -fPIC ./logicaland.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 494 + 1
+ n_tests=495
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./logicaland.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./logicaland.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 495 + 1
+ n_tests=496
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './logicaland.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./logicaland.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 142 + 1
+ n_failed=143
+ return 1
+ assert_out '0;1;1;1;OK' ./logicalor
+ msg='0;1;1;1;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./logicalor.cb
+ assert_status 0 ../bin/cbc ./logicalor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 496 + 1
+ n_tests=497
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./logicalor.cb
+ '[' '' = true ']'
+ ../bin/cbc ./logicalor.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 497 + 1
+ n_tests=498
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;1;1;OK' ./logicalor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 498 + 1
+ n_tests=499
+ expected='0;1;1;1;OK'
+ shift
+ echo '0;1;1;1;OK'
+ ./logicalor
./shunit.sh: line 150:  7321 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./logicalor
+ local cmd=./logicalor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 499 + 1
+ n_tests=500
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;1;1;OK" and cmd "./logicalor"'
stdout differ: string "0;1;1;1;OK" and cmd "./logicalor"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:10.483022073 +0900
+++ tc.out.real	2023-04-24 00:00:10.483022073 +0900
@@ -1 +0,0 @@
-0;1;1;1;OK
+ echo ----
----
+ shunit_test_failed
++ expr 143 + 1
+ n_failed=144
+ return 0
+ assert_compile_success -O ./logicalor.cb
+ assert_status 0 ../bin/cbc -O ./logicalor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 500 + 1
+ n_tests=501
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./logicalor.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./logicalor.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 501 + 1
+ n_tests=502
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;1;1;1;OK' ./logicalor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 502 + 1
+ n_tests=503
+ expected='0;1;1;1;OK'
+ shift
+ echo '0;1;1;1;OK'
+ ./logicalor
./shunit.sh: line 150:  7361 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./logicalor
+ local cmd=./logicalor
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 503 + 1
+ n_tests=504
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;1;1;1;OK" and cmd "./logicalor"'
stdout differ: string "0;1;1;1;OK" and cmd "./logicalor"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:10.613022022 +0900
+++ tc.out.real	2023-04-24 00:00:10.613022022 +0900
@@ -1 +0,0 @@
-0;1;1;1;OK
+ echo ----
----
+ shunit_test_failed
++ expr 144 + 1
+ n_failed=145
+ return 0
+ assert_compile_success -fPIC ./logicalor.cb
+ assert_status 0 ../bin/cbc -fPIC ./logicalor.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 504 + 1
+ n_tests=505
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./logicalor.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./logicalor.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 505 + 1
+ n_tests=506
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './logicalor.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./logicalor.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 145 + 1
+ n_failed=146
+ return 1
+ read f
+ echo

++ echo test_14_while
++ sed 's/^test_//'
+ print 14_while
+ /bin/echo -n 14_while
14_while+ test_14_while
+ assert_ok ./while1
+ assert_out OK ./while1
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./while1.cb
+ assert_status 0 ../bin/cbc ./while1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 506 + 1
+ n_tests=507
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./while1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./while1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 507 + 1
+ n_tests=508
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 508 + 1
+ n_tests=509
+ expected=OK
+ shift
+ echo OK
+ ./while1
./shunit.sh: line 150:  7437 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while1
+ local cmd=./while1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 509 + 1
+ n_tests=510
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while1"'
stdout differ: string "OK" and cmd "./while1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:10.873021920 +0900
+++ tc.out.real	2023-04-24 00:00:10.873021920 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 146 + 1
+ n_failed=147
+ return 0
+ assert_compile_success -O ./while1.cb
+ assert_status 0 ../bin/cbc -O ./while1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 510 + 1
+ n_tests=511
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./while1.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./while1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 511 + 1
+ n_tests=512
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 512 + 1
+ n_tests=513
+ expected=OK
+ shift
+ echo OK
+ ./while1
./shunit.sh: line 150:  7475 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while1
+ local cmd=./while1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 513 + 1
+ n_tests=514
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while1"'
stdout differ: string "OK" and cmd "./while1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:10.983021878 +0900
+++ tc.out.real	2023-04-24 00:00:10.983021878 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 147 + 1
+ n_failed=148
+ return 0
+ assert_compile_success -fPIC ./while1.cb
+ assert_status 0 ../bin/cbc -fPIC ./while1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 514 + 1
+ n_tests=515
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./while1.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./while1.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 515 + 1
+ n_tests=516
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './while1.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./while1.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 148 + 1
+ n_failed=149
+ return 1
+ assert_ok ./while2
+ assert_out OK ./while2
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./while2.cb
+ assert_status 0 ../bin/cbc ./while2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 516 + 1
+ n_tests=517
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./while2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./while2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 517 + 1
+ n_tests=518
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 518 + 1
+ n_tests=519
+ expected=OK
+ shift
+ echo OK
+ ./while2
./shunit.sh: line 150:  7546 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while2
+ local cmd=./while2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 519 + 1
+ n_tests=520
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while2"'
stdout differ: string "OK" and cmd "./while2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:11.243021778 +0900
+++ tc.out.real	2023-04-24 00:00:11.243021778 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 149 + 1
+ n_failed=150
+ return 0
+ assert_compile_success -O ./while2.cb
+ assert_status 0 ../bin/cbc -O ./while2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 520 + 1
+ n_tests=521
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./while2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./while2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 521 + 1
+ n_tests=522
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 522 + 1
+ n_tests=523
+ expected=OK
+ shift
+ echo OK
+ ./while2
./shunit.sh: line 150:  7584 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while2
+ local cmd=./while2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 523 + 1
+ n_tests=524
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while2"'
stdout differ: string "OK" and cmd "./while2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:11.353021737 +0900
+++ tc.out.real	2023-04-24 00:00:11.353021737 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 150 + 1
+ n_failed=151
+ return 0
+ assert_compile_success -fPIC ./while2.cb
+ assert_status 0 ../bin/cbc -fPIC ./while2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 524 + 1
+ n_tests=525
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./while2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./while2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 525 + 1
+ n_tests=526
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './while2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./while2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 151 + 1
+ n_failed=152
+ return 1
+ assert_out '3;3;2;1;0' ./while3
+ msg='3;3;2;1;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./while3.cb
+ assert_status 0 ../bin/cbc ./while3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 526 + 1
+ n_tests=527
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./while3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./while3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 527 + 1
+ n_tests=528
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;3;2;1;0' ./while3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 528 + 1
+ n_tests=529
+ expected='3;3;2;1;0'
+ shift
+ echo '3;3;2;1;0'
+ ./while3
./shunit.sh: line 150:  7655 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while3
+ local cmd=./while3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 529 + 1
+ n_tests=530
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;3;2;1;0" and cmd "./while3"'
stdout differ: string "3;3;2;1;0" and cmd "./while3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:11.613021638 +0900
+++ tc.out.real	2023-04-24 00:00:11.613021638 +0900
@@ -1 +0,0 @@
-3;3;2;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 152 + 1
+ n_failed=153
+ return 0
+ assert_compile_success -O ./while3.cb
+ assert_status 0 ../bin/cbc -O ./while3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 530 + 1
+ n_tests=531
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./while3.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./while3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 531 + 1
+ n_tests=532
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;3;2;1;0' ./while3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 532 + 1
+ n_tests=533
+ expected='3;3;2;1;0'
+ shift
+ echo '3;3;2;1;0'
+ ./while3
./shunit.sh: line 150:  7694 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while3
+ local cmd=./while3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 533 + 1
+ n_tests=534
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;3;2;1;0" and cmd "./while3"'
stdout differ: string "3;3;2;1;0" and cmd "./while3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:11.733021592 +0900
+++ tc.out.real	2023-04-24 00:00:11.733021592 +0900
@@ -1 +0,0 @@
-3;3;2;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 153 + 1
+ n_failed=154
+ return 0
+ assert_compile_success -fPIC ./while3.cb
+ assert_status 0 ../bin/cbc -fPIC ./while3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 534 + 1
+ n_tests=535
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./while3.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./while3.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 535 + 1
+ n_tests=536
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './while3.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./while3.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 154 + 1
+ n_failed=155
+ return 1
+ read f
+ echo

++ echo test_15_dowhile
++ sed 's/^test_//'
+ print 15_dowhile
+ /bin/echo -n 15_dowhile
15_dowhile+ test_15_dowhile
+ assert_ok ./dowhile1
+ assert_out OK ./dowhile1
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./dowhile1.cb
+ assert_status 0 ../bin/cbc ./dowhile1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 536 + 1
+ n_tests=537
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./dowhile1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./dowhile1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 537 + 1
+ n_tests=538
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 538 + 1
+ n_tests=539
+ expected=OK
+ shift
+ echo OK
+ ./dowhile1
./shunit.sh: line 150:  7769 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile1
+ local cmd=./dowhile1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 539 + 1
+ n_tests=540
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile1"'
stdout differ: string "OK" and cmd "./dowhile1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:11.983021496 +0900
+++ tc.out.real	2023-04-24 00:00:11.983021496 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 155 + 1
+ n_failed=156
+ return 0
+ assert_compile_success -O ./dowhile1.cb
+ assert_status 0 ../bin/cbc -O ./dowhile1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 540 + 1
+ n_tests=541
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./dowhile1.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./dowhile1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 541 + 1
+ n_tests=542
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 542 + 1
+ n_tests=543
+ expected=OK
+ shift
+ echo OK
+ ./dowhile1
./shunit.sh: line 150:  7807 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile1
+ local cmd=./dowhile1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 543 + 1
+ n_tests=544
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile1"'
stdout differ: string "OK" and cmd "./dowhile1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:12.103021450 +0900
+++ tc.out.real	2023-04-24 00:00:12.103021450 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 156 + 1
+ n_failed=157
+ return 0
+ assert_compile_success -fPIC ./dowhile1.cb
+ assert_status 0 ../bin/cbc -fPIC ./dowhile1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 544 + 1
+ n_tests=545
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./dowhile1.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./dowhile1.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 545 + 1
+ n_tests=546
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './dowhile1.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./dowhile1.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 157 + 1
+ n_failed=158
+ return 1
+ assert_ok ./dowhile2
+ assert_out OK ./dowhile2
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./dowhile2.cb
+ assert_status 0 ../bin/cbc ./dowhile2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 546 + 1
+ n_tests=547
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./dowhile2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./dowhile2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 547 + 1
+ n_tests=548
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 548 + 1
+ n_tests=549
+ expected=OK
+ shift
+ echo OK
+ ./dowhile2
./shunit.sh: line 150:  7877 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile2
+ local cmd=./dowhile2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 549 + 1
+ n_tests=550
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile2"'
stdout differ: string "OK" and cmd "./dowhile2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:12.343021358 +0900
+++ tc.out.real	2023-04-24 00:00:12.343021358 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 158 + 1
+ n_failed=159
+ return 0
+ assert_compile_success -O ./dowhile2.cb
+ assert_status 0 ../bin/cbc -O ./dowhile2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 550 + 1
+ n_tests=551
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./dowhile2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./dowhile2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 551 + 1
+ n_tests=552
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 552 + 1
+ n_tests=553
+ expected=OK
+ shift
+ echo OK
+ ./dowhile2
./shunit.sh: line 150:  7916 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile2
+ local cmd=./dowhile2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 553 + 1
+ n_tests=554
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile2"'
stdout differ: string "OK" and cmd "./dowhile2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:12.463021312 +0900
+++ tc.out.real	2023-04-24 00:00:12.463021312 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 159 + 1
+ n_failed=160
+ return 0
+ assert_compile_success -fPIC ./dowhile2.cb
+ assert_status 0 ../bin/cbc -fPIC ./dowhile2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 554 + 1
+ n_tests=555
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./dowhile2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./dowhile2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 555 + 1
+ n_tests=556
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './dowhile2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./dowhile2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 160 + 1
+ n_failed=161
+ return 1
+ assert_out '3;3;2;1;0' ./dowhile3
+ msg='3;3;2;1;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./dowhile3.cb
+ assert_status 0 ../bin/cbc ./dowhile3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 556 + 1
+ n_tests=557
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./dowhile3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./dowhile3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 557 + 1
+ n_tests=558
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;3;2;1;0' ./dowhile3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 558 + 1
+ n_tests=559
+ expected='3;3;2;1;0'
+ shift
+ echo '3;3;2;1;0'
+ ./dowhile3
./shunit.sh: line 150:  7987 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile3
+ local cmd=./dowhile3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 559 + 1
+ n_tests=560
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;3;2;1;0" and cmd "./dowhile3"'
stdout differ: string "3;3;2;1;0" and cmd "./dowhile3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:12.703021222 +0900
+++ tc.out.real	2023-04-24 00:00:12.703021222 +0900
@@ -1 +0,0 @@
-3;3;2;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 161 + 1
+ n_failed=162
+ return 0
+ assert_compile_success -O ./dowhile3.cb
+ assert_status 0 ../bin/cbc -O ./dowhile3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 560 + 1
+ n_tests=561
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./dowhile3.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./dowhile3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 561 + 1
+ n_tests=562
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;3;2;1;0' ./dowhile3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 562 + 1
+ n_tests=563
+ expected='3;3;2;1;0'
+ shift
+ echo '3;3;2;1;0'
+ ./dowhile3
./shunit.sh: line 150:  8026 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile3
+ local cmd=./dowhile3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 563 + 1
+ n_tests=564
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;3;2;1;0" and cmd "./dowhile3"'
stdout differ: string "3;3;2;1;0" and cmd "./dowhile3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:12.823021175 +0900
+++ tc.out.real	2023-04-24 00:00:12.823021175 +0900
@@ -1 +0,0 @@
-3;3;2;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 162 + 1
+ n_failed=163
+ return 0
+ assert_compile_success -fPIC ./dowhile3.cb
+ assert_status 0 ../bin/cbc -fPIC ./dowhile3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 564 + 1
+ n_tests=565
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./dowhile3.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./dowhile3.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 565 + 1
+ n_tests=566
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './dowhile3.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./dowhile3.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 163 + 1
+ n_failed=164
+ return 1
+ read f
+ echo

++ echo test_16_for
++ sed 's/^test_//'
+ print 16_for
+ /bin/echo -n 16_for
16_for+ test_16_for
+ assert_out '3;3;2;1;0' ./for1
+ msg='3;3;2;1;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./for1.cb
+ assert_status 0 ../bin/cbc ./for1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 566 + 1
+ n_tests=567
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./for1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./for1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 567 + 1
+ n_tests=568
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;3;2;1;0' ./for1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 568 + 1
+ n_tests=569
+ expected='3;3;2;1;0'
+ shift
+ echo '3;3;2;1;0'
+ ./for1
./shunit.sh: line 150:  8102 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./for1
+ local cmd=./for1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 569 + 1
+ n_tests=570
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;3;2;1;0" and cmd "./for1"'
stdout differ: string "3;3;2;1;0" and cmd "./for1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:13.063021083 +0900
+++ tc.out.real	2023-04-24 00:00:13.063021083 +0900
@@ -1 +0,0 @@
-3;3;2;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 164 + 1
+ n_failed=165
+ return 0
+ assert_compile_success -O ./for1.cb
+ assert_status 0 ../bin/cbc -O ./for1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 570 + 1
+ n_tests=571
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./for1.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./for1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 571 + 1
+ n_tests=572
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;3;2;1;0' ./for1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 572 + 1
+ n_tests=573
+ expected='3;3;2;1;0'
+ shift
+ echo '3;3;2;1;0'
+ ./for1
./shunit.sh: line 150:  8141 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./for1
+ local cmd=./for1
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 573 + 1
+ n_tests=574
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;3;2;1;0" and cmd "./for1"'
stdout differ: string "3;3;2;1;0" and cmd "./for1"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:13.213021026 +0900
+++ tc.out.real	2023-04-24 00:00:13.213021026 +0900
@@ -1 +0,0 @@
-3;3;2;1;0
+ echo ----
----
+ shunit_test_failed
++ expr 165 + 1
+ n_failed=166
+ return 0
+ assert_compile_success -fPIC ./for1.cb
+ assert_status 0 ../bin/cbc -fPIC ./for1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 574 + 1
+ n_tests=575
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./for1.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./for1.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 575 + 1
+ n_tests=576
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './for1.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./for1.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 166 + 1
+ n_failed=167
+ return 1
+ read f
+ echo

++ echo test_17_jump
++ sed 's/^test_//'
+ print 17_jump
+ /bin/echo -n 17_jump
17_jump+ test_17_jump
+ assert_ok ./while-break
+ assert_out OK ./while-break
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./while-break.cb
+ assert_status 0 ../bin/cbc ./while-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 576 + 1
+ n_tests=577
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./while-break.cb
+ '[' '' = true ']'
+ ../bin/cbc ./while-break.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 577 + 1
+ n_tests=578
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 578 + 1
+ n_tests=579
+ expected=OK
+ shift
+ echo OK
+ ./while-break
./shunit.sh: line 150:  8216 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while-break
+ local cmd=./while-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 579 + 1
+ n_tests=580
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while-break"'
stdout differ: string "OK" and cmd "./while-break"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:13.473020927 +0900
+++ tc.out.real	2023-04-24 00:00:13.473020927 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 167 + 1
+ n_failed=168
+ return 0
+ assert_compile_success -O ./while-break.cb
+ assert_status 0 ../bin/cbc -O ./while-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 580 + 1
+ n_tests=581
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./while-break.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./while-break.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 581 + 1
+ n_tests=582
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 582 + 1
+ n_tests=583
+ expected=OK
+ shift
+ echo OK
+ ./while-break
./shunit.sh: line 150:  8254 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while-break
+ local cmd=./while-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 583 + 1
+ n_tests=584
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while-break"'
stdout differ: string "OK" and cmd "./while-break"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:13.593020881 +0900
+++ tc.out.real	2023-04-24 00:00:13.593020881 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 168 + 1
+ n_failed=169
+ return 0
+ assert_compile_success -fPIC ./while-break.cb
+ assert_status 0 ../bin/cbc -fPIC ./while-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 584 + 1
+ n_tests=585
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./while-break.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./while-break.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 585 + 1
+ n_tests=586
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './while-break.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./while-break.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 169 + 1
+ n_failed=170
+ return 1
+ assert_ok ./dowhile-break
+ assert_out OK ./dowhile-break
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./dowhile-break.cb
+ assert_status 0 ../bin/cbc ./dowhile-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 586 + 1
+ n_tests=587
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./dowhile-break.cb
+ '[' '' = true ']'
+ ../bin/cbc ./dowhile-break.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 587 + 1
+ n_tests=588
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 588 + 1
+ n_tests=589
+ expected=OK
+ shift
+ echo OK
+ ./dowhile-break
./shunit.sh: line 150:  8325 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile-break
+ local cmd=./dowhile-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 589 + 1
+ n_tests=590
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile-break"'
stdout differ: string "OK" and cmd "./dowhile-break"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:13.853020781 +0900
+++ tc.out.real	2023-04-24 00:00:13.853020781 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 170 + 1
+ n_failed=171
+ return 0
+ assert_compile_success -O ./dowhile-break.cb
+ assert_status 0 ../bin/cbc -O ./dowhile-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 590 + 1
+ n_tests=591
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./dowhile-break.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./dowhile-break.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 591 + 1
+ n_tests=592
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 592 + 1
+ n_tests=593
+ expected=OK
+ shift
+ echo OK
+ ./dowhile-break
./shunit.sh: line 150:  8364 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile-break
+ local cmd=./dowhile-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 593 + 1
+ n_tests=594
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile-break"'
stdout differ: string "OK" and cmd "./dowhile-break"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:13.983020732 +0900
+++ tc.out.real	2023-04-24 00:00:13.983020732 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 171 + 1
+ n_failed=172
+ return 0
+ assert_compile_success -fPIC ./dowhile-break.cb
+ assert_status 0 ../bin/cbc -fPIC ./dowhile-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 594 + 1
+ n_tests=595
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./dowhile-break.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./dowhile-break.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 595 + 1
+ n_tests=596
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './dowhile-break.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./dowhile-break.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 172 + 1
+ n_failed=173
+ return 1
+ assert_ok ./for-break
+ assert_out OK ./for-break
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./for-break.cb
+ assert_status 0 ../bin/cbc ./for-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 596 + 1
+ n_tests=597
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./for-break.cb
+ '[' '' = true ']'
+ ../bin/cbc ./for-break.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 597 + 1
+ n_tests=598
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./for-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 598 + 1
+ n_tests=599
+ expected=OK
+ shift
+ echo OK
+ ./for-break
./shunit.sh: line 150:  8435 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./for-break
+ local cmd=./for-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 599 + 1
+ n_tests=600
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./for-break"'
stdout differ: string "OK" and cmd "./for-break"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:14.233020636 +0900
+++ tc.out.real	2023-04-24 00:00:14.233020636 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 173 + 1
+ n_failed=174
+ return 0
+ assert_compile_success -O ./for-break.cb
+ assert_status 0 ../bin/cbc -O ./for-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 600 + 1
+ n_tests=601
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./for-break.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./for-break.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 601 + 1
+ n_tests=602
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./for-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 602 + 1
+ n_tests=603
+ expected=OK
+ shift
+ echo OK
+ ./for-break
./shunit.sh: line 150:  8474 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./for-break
+ local cmd=./for-break
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 603 + 1
+ n_tests=604
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./for-break"'
stdout differ: string "OK" and cmd "./for-break"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:14.353020590 +0900
+++ tc.out.real	2023-04-24 00:00:14.353020590 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 174 + 1
+ n_failed=175
+ return 0
+ assert_compile_success -fPIC ./for-break.cb
+ assert_status 0 ../bin/cbc -fPIC ./for-break.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 604 + 1
+ n_tests=605
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./for-break.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./for-break.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 605 + 1
+ n_tests=606
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './for-break.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./for-break.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 175 + 1
+ n_failed=176
+ return 1
+ assert_compile_error break-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 606 + 1
+ n_tests=607
+ ../bin/cbc break-semcheck.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 607 + 1
+ n_tests=608
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_ok ./while-continue
+ assert_out OK ./while-continue
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./while-continue.cb
+ assert_status 0 ../bin/cbc ./while-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 608 + 1
+ n_tests=609
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./while-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc ./while-continue.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 609 + 1
+ n_tests=610
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 610 + 1
+ n_tests=611
+ expected=OK
+ shift
+ echo OK
+ ./while-continue
./shunit.sh: line 150:  8573 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while-continue
+ local cmd=./while-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 611 + 1
+ n_tests=612
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while-continue"'
stdout differ: string "OK" and cmd "./while-continue"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:14.683020464 +0900
+++ tc.out.real	2023-04-24 00:00:14.683020464 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 176 + 1
+ n_failed=177
+ return 0
+ assert_compile_success -O ./while-continue.cb
+ assert_status 0 ../bin/cbc -O ./while-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 612 + 1
+ n_tests=613
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./while-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./while-continue.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 613 + 1
+ n_tests=614
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./while-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 614 + 1
+ n_tests=615
+ expected=OK
+ shift
+ echo OK
+ ./while-continue
./shunit.sh: line 150:  8611 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./while-continue
+ local cmd=./while-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 615 + 1
+ n_tests=616
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./while-continue"'
stdout differ: string "OK" and cmd "./while-continue"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:14.803020418 +0900
+++ tc.out.real	2023-04-24 00:00:14.803020418 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 177 + 1
+ n_failed=178
+ return 0
+ assert_compile_success -fPIC ./while-continue.cb
+ assert_status 0 ../bin/cbc -fPIC ./while-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 616 + 1
+ n_tests=617
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./while-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./while-continue.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 617 + 1
+ n_tests=618
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './while-continue.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./while-continue.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 178 + 1
+ n_failed=179
+ return 1
+ assert_ok ./dowhile-continue
+ assert_out OK ./dowhile-continue
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./dowhile-continue.cb
+ assert_status 0 ../bin/cbc ./dowhile-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 618 + 1
+ n_tests=619
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./dowhile-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc ./dowhile-continue.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 619 + 1
+ n_tests=620
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 620 + 1
+ n_tests=621
+ expected=OK
+ shift
+ echo OK
+ ./dowhile-continue
./shunit.sh: line 150:  8683 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile-continue
+ local cmd=./dowhile-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 621 + 1
+ n_tests=622
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile-continue"'
stdout differ: string "OK" and cmd "./dowhile-continue"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:15.053020323 +0900
+++ tc.out.real	2023-04-24 00:00:15.053020323 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 179 + 1
+ n_failed=180
+ return 0
+ assert_compile_success -O ./dowhile-continue.cb
+ assert_status 0 ../bin/cbc -O ./dowhile-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 622 + 1
+ n_tests=623
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./dowhile-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./dowhile-continue.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 623 + 1
+ n_tests=624
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./dowhile-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 624 + 1
+ n_tests=625
+ expected=OK
+ shift
+ echo OK
+ ./dowhile-continue
./shunit.sh: line 150:  8722 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./dowhile-continue
+ local cmd=./dowhile-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 625 + 1
+ n_tests=626
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./dowhile-continue"'
stdout differ: string "OK" and cmd "./dowhile-continue"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:15.183020273 +0900
+++ tc.out.real	2023-04-24 00:00:15.183020273 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 180 + 1
+ n_failed=181
+ return 0
+ assert_compile_success -fPIC ./dowhile-continue.cb
+ assert_status 0 ../bin/cbc -fPIC ./dowhile-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 626 + 1
+ n_tests=627
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./dowhile-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./dowhile-continue.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 627 + 1
+ n_tests=628
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './dowhile-continue.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./dowhile-continue.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 181 + 1
+ n_failed=182
+ return 1
+ assert_ok ./for-continue
+ assert_out OK ./for-continue
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./for-continue.cb
+ assert_status 0 ../bin/cbc ./for-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 628 + 1
+ n_tests=629
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./for-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc ./for-continue.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 629 + 1
+ n_tests=630
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./for-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 630 + 1
+ n_tests=631
+ expected=OK
+ shift
+ echo OK
+ ./for-continue
./shunit.sh: line 150:  8793 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./for-continue
+ local cmd=./for-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 631 + 1
+ n_tests=632
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./for-continue"'
stdout differ: string "OK" and cmd "./for-continue"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:15.433020177 +0900
+++ tc.out.real	2023-04-24 00:00:15.433020177 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 182 + 1
+ n_failed=183
+ return 0
+ assert_compile_success -O ./for-continue.cb
+ assert_status 0 ../bin/cbc -O ./for-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 632 + 1
+ n_tests=633
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./for-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./for-continue.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 633 + 1
+ n_tests=634
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./for-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 634 + 1
+ n_tests=635
+ expected=OK
+ shift
+ echo OK
+ ./for-continue
./shunit.sh: line 150:  8832 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./for-continue
+ local cmd=./for-continue
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 635 + 1
+ n_tests=636
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./for-continue"'
stdout differ: string "OK" and cmd "./for-continue"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:15.553020131 +0900
+++ tc.out.real	2023-04-24 00:00:15.553020131 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 183 + 1
+ n_failed=184
+ return 0
+ assert_compile_success -fPIC ./for-continue.cb
+ assert_status 0 ../bin/cbc -fPIC ./for-continue.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 636 + 1
+ n_tests=637
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./for-continue.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./for-continue.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 637 + 1
+ n_tests=638
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './for-continue.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./for-continue.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 184 + 1
+ n_failed=185
+ return 1
+ assert_compile_error continue-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 638 + 1
+ n_tests=639
+ ../bin/cbc continue-semcheck.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 639 + 1
+ n_tests=640
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_18_array
++ sed 's/^test_//'
+ print 18_array
+ /bin/echo -n 18_array
18_array+ test_18_array
+ assert_out '1;5;9' ./array
+ msg='1;5;9'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./array.cb
+ assert_status 0 ../bin/cbc ./array.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 640 + 1
+ n_tests=641
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./array.cb
+ '[' '' = true ']'
+ ../bin/cbc ./array.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 641 + 1
+ n_tests=642
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;5;9' ./array
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 642 + 1
+ n_tests=643
+ expected='1;5;9'
+ shift
+ echo '1;5;9'
+ ./array
./shunit.sh: line 150:  8936 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./array
+ local cmd=./array
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 643 + 1
+ n_tests=644
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;5;9" and cmd "./array"'
stdout differ: string "1;5;9" and cmd "./array"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:15.903019998 +0900
+++ tc.out.real	2023-04-24 00:00:15.903019998 +0900
@@ -1 +0,0 @@
-1;5;9
+ echo ----
----
+ shunit_test_failed
++ expr 185 + 1
+ n_failed=186
+ return 0
+ assert_compile_success -O ./array.cb
+ assert_status 0 ../bin/cbc -O ./array.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 644 + 1
+ n_tests=645
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./array.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./array.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 645 + 1
+ n_tests=646
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;5;9' ./array
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 646 + 1
+ n_tests=647
+ expected='1;5;9'
+ shift
+ echo '1;5;9'
+ ./array
./shunit.sh: line 150:  8975 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./array
+ local cmd=./array
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 647 + 1
+ n_tests=648
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;5;9" and cmd "./array"'
stdout differ: string "1;5;9" and cmd "./array"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:16.033019949 +0900
+++ tc.out.real	2023-04-24 00:00:16.033019949 +0900
@@ -1 +0,0 @@
-1;5;9
+ echo ----
----
+ shunit_test_failed
++ expr 186 + 1
+ n_failed=187
+ return 0
+ assert_compile_success -fPIC ./array.cb
+ assert_status 0 ../bin/cbc -fPIC ./array.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 648 + 1
+ n_tests=649
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./array.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./array.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 649 + 1
+ n_tests=650
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './array.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./array.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 187 + 1
+ n_failed=188
+ return 1
+ assert_out '0;0;0' ./array2
+ msg='0;0;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./array2.cb
+ assert_status 0 ../bin/cbc ./array2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 650 + 1
+ n_tests=651
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./array2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./array2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 651 + 1
+ n_tests=652
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;0' ./array2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 652 + 1
+ n_tests=653
+ expected='0;0;0'
+ shift
+ echo '0;0;0'
+ ./array2
./shunit.sh: line 150:  9047 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./array2
+ local cmd=./array2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 653 + 1
+ n_tests=654
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;0" and cmd "./array2"'
stdout differ: string "0;0;0" and cmd "./array2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:16.293019849 +0900
+++ tc.out.real	2023-04-24 00:00:16.293019849 +0900
@@ -1 +0,0 @@
-0;0;0
+ echo ----
----
+ shunit_test_failed
++ expr 188 + 1
+ n_failed=189
+ return 0
+ assert_compile_success -O ./array2.cb
+ assert_status 0 ../bin/cbc -O ./array2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 654 + 1
+ n_tests=655
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./array2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./array2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 655 + 1
+ n_tests=656
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '0;0;0' ./array2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 656 + 1
+ n_tests=657
+ expected='0;0;0'
+ shift
+ echo '0;0;0'
+ ./array2
./shunit.sh: line 150:  9086 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./array2
+ local cmd=./array2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 657 + 1
+ n_tests=658
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "0;0;0" and cmd "./array2"'
stdout differ: string "0;0;0" and cmd "./array2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:16.423019800 +0900
+++ tc.out.real	2023-04-24 00:00:16.423019800 +0900
@@ -1 +0,0 @@
-0;0;0
+ echo ----
----
+ shunit_test_failed
++ expr 189 + 1
+ n_failed=190
+ return 0
+ assert_compile_success -fPIC ./array2.cb
+ assert_status 0 ../bin/cbc -fPIC ./array2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 658 + 1
+ n_tests=659
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./array2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./array2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 659 + 1
+ n_tests=660
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './array2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./array2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 190 + 1
+ n_failed=191
+ return 1
+ assert_out '3;4;5;6;7;8;9;10;11;' ./mdarray
+ msg='3;4;5;6;7;8;9;10;11;'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./mdarray.cb
+ assert_status 0 ../bin/cbc ./mdarray.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 660 + 1
+ n_tests=661
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./mdarray.cb
+ '[' '' = true ']'
+ ../bin/cbc ./mdarray.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 661 + 1
+ n_tests=662
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;4;5;6;7;8;9;10;11;' ./mdarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 662 + 1
+ n_tests=663
+ expected='3;4;5;6;7;8;9;10;11;'
+ shift
+ echo '3;4;5;6;7;8;9;10;11;'
+ ./mdarray
./shunit.sh: line 150:  9157 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./mdarray
+ local cmd=./mdarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 663 + 1
+ n_tests=664
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;4;5;6;7;8;9;10;11;" and cmd "./mdarray"'
stdout differ: string "3;4;5;6;7;8;9;10;11;" and cmd "./mdarray"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:16.693019696 +0900
+++ tc.out.real	2023-04-24 00:00:16.693019696 +0900
@@ -1 +0,0 @@
-3;4;5;6;7;8;9;10;11;
+ echo ----
----
+ shunit_test_failed
++ expr 191 + 1
+ n_failed=192
+ return 0
+ assert_compile_success -O ./mdarray.cb
+ assert_status 0 ../bin/cbc -O ./mdarray.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 664 + 1
+ n_tests=665
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./mdarray.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./mdarray.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 665 + 1
+ n_tests=666
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '3;4;5;6;7;8;9;10;11;' ./mdarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 666 + 1
+ n_tests=667
+ expected='3;4;5;6;7;8;9;10;11;'
+ shift
+ echo '3;4;5;6;7;8;9;10;11;'
+ ./mdarray
./shunit.sh: line 150:  9197 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./mdarray
+ local cmd=./mdarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 667 + 1
+ n_tests=668
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3;4;5;6;7;8;9;10;11;" and cmd "./mdarray"'
stdout differ: string "3;4;5;6;7;8;9;10;11;" and cmd "./mdarray"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:16.833019643 +0900
+++ tc.out.real	2023-04-24 00:00:16.833019643 +0900
@@ -1 +0,0 @@
-3;4;5;6;7;8;9;10;11;
+ echo ----
----
+ shunit_test_failed
++ expr 192 + 1
+ n_failed=193
+ return 0
+ assert_compile_success -fPIC ./mdarray.cb
+ assert_status 0 ../bin/cbc -fPIC ./mdarray.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 668 + 1
+ n_tests=669
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./mdarray.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./mdarray.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 669 + 1
+ n_tests=670
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './mdarray.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./mdarray.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 193 + 1
+ n_failed=194
+ return 1
+ assert_compile_success mdarray2.cb
+ assert_status 0 ../bin/cbc mdarray2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 670 + 1
+ n_tests=671
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc mdarray2.cb
+ '[' '' = true ']'
+ ../bin/cbc mdarray2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 671 + 1
+ n_tests=672
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ ruby_exists
+ ruby -e ''
+ assert_out '775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;' ./ptrarray
+ msg='775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ptrarray.cb
+ assert_status 0 ../bin/cbc ./ptrarray.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 672 + 1
+ n_tests=673
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ptrarray.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ptrarray.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 673 + 1
+ n_tests=674
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;' ./ptrarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 674 + 1
+ n_tests=675
+ expected='775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;'
+ shift
+ echo '775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;'
+ ./ptrarray
./shunit.sh: line 150:  9300 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrarray
+ local cmd=./ptrarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 675 + 1
+ n_tests=676
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;" and cmd "./ptrarray"'
stdout differ: string "775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;" and cmd "./ptrarray"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:17.283019470 +0900
+++ tc.out.real	2023-04-24 00:00:17.283019470 +0900
@@ -1 +0,0 @@
-775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;
+ echo ----
----
+ shunit_test_failed
++ expr 194 + 1
+ n_failed=195
+ return 0
+ assert_compile_success -O ./ptrarray.cb
+ assert_status 0 ../bin/cbc -O ./ptrarray.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 676 + 1
+ n_tests=677
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ptrarray.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ptrarray.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 677 + 1
+ n_tests=678
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;' ./ptrarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 678 + 1
+ n_tests=679
+ expected='775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;'
+ shift
+ echo '775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;'
+ ./ptrarray
./shunit.sh: line 150:  9340 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrarray
+ local cmd=./ptrarray
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 679 + 1
+ n_tests=680
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;" and cmd "./ptrarray"'
stdout differ: string "775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;" and cmd "./ptrarray"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:17.423019417 +0900
+++ tc.out.real	2023-04-24 00:00:17.423019417 +0900
@@ -1 +0,0 @@
-775;776;777;778;775;776;777;778;775;776;777;778;775;776;777;778;
+ echo ----
----
+ shunit_test_failed
++ expr 195 + 1
+ n_failed=196
+ return 0
+ assert_compile_success -fPIC ./ptrarray.cb
+ assert_status 0 ../bin/cbc -fPIC ./ptrarray.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 680 + 1
+ n_tests=681
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ptrarray.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ptrarray.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 681 + 1
+ n_tests=682
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ptrarray.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ptrarray.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 196 + 1
+ n_failed=197
+ return 1
+ assert_compile_error aref-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 682 + 1
+ n_tests=683
+ ../bin/cbc aref-semcheck.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 683 + 1
+ n_tests=684
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error aref-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 684 + 1
+ n_tests=685
+ ../bin/cbc aref-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 685 + 1
+ n_tests=686
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error array-semcheck1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 686 + 1
+ n_tests=687
+ ../bin/cbc array-semcheck1.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 687 + 1
+ n_tests=688
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error array-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 688 + 1
+ n_tests=689
+ ../bin/cbc array-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 689 + 1
+ n_tests=690
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_19_struct
++ sed 's/^test_//'
+ print 19_struct
+ /bin/echo -n 19_struct
19_struct+ test_19_struct
+ assert_out '11;22' ./struct
+ msg='11;22'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./struct.cb
+ assert_status 0 ../bin/cbc ./struct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 690 + 1
+ n_tests=691
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./struct.cb
+ '[' '' = true ']'
+ ../bin/cbc ./struct.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 691 + 1
+ n_tests=692
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '11;22' ./struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 692 + 1
+ n_tests=693
+ expected='11;22'
+ shift
+ echo '11;22'
+ ./struct
./shunit.sh: line 150:  9532 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./struct
+ local cmd=./struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 693 + 1
+ n_tests=694
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "11;22" and cmd "./struct"'
stdout differ: string "11;22" and cmd "./struct"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:18.023019188 +0900
+++ tc.out.real	2023-04-24 00:00:18.023019188 +0900
@@ -1 +0,0 @@
-11;22
+ echo ----
----
+ shunit_test_failed
++ expr 197 + 1
+ n_failed=198
+ return 0
+ assert_compile_success -O ./struct.cb
+ assert_status 0 ../bin/cbc -O ./struct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 694 + 1
+ n_tests=695
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./struct.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./struct.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 695 + 1
+ n_tests=696
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '11;22' ./struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 696 + 1
+ n_tests=697
+ expected='11;22'
+ shift
+ echo '11;22'
+ ./struct
./shunit.sh: line 150:  9571 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./struct
+ local cmd=./struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 697 + 1
+ n_tests=698
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "11;22" and cmd "./struct"'
stdout differ: string "11;22" and cmd "./struct"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:18.143019142 +0900
+++ tc.out.real	2023-04-24 00:00:18.143019142 +0900
@@ -1 +0,0 @@
-11;22
+ echo ----
----
+ shunit_test_failed
++ expr 198 + 1
+ n_failed=199
+ return 0
+ assert_compile_success -fPIC ./struct.cb
+ assert_status 0 ../bin/cbc -fPIC ./struct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 698 + 1
+ n_tests=699
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./struct.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./struct.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 699 + 1
+ n_tests=700
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './struct.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./struct.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 199 + 1
+ n_failed=200
+ return 1
+ assert_out '701;702;703;704' ./struct2
+ msg='701;702;703;704'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./struct2.cb
+ assert_status 0 ../bin/cbc ./struct2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 700 + 1
+ n_tests=701
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./struct2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./struct2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 701 + 1
+ n_tests=702
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '701;702;703;704' ./struct2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 702 + 1
+ n_tests=703
+ expected='701;702;703;704'
+ shift
+ echo '701;702;703;704'
+ ./struct2
./shunit.sh: line 150:  9644 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./struct2
+ local cmd=./struct2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 703 + 1
+ n_tests=704
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "701;702;703;704" and cmd "./struct2"'
stdout differ: string "701;702;703;704" and cmd "./struct2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:18.403019043 +0900
+++ tc.out.real	2023-04-24 00:00:18.403019043 +0900
@@ -1 +0,0 @@
-701;702;703;704
+ echo ----
----
+ shunit_test_failed
++ expr 200 + 1
+ n_failed=201
+ return 0
+ assert_compile_success -O ./struct2.cb
+ assert_status 0 ../bin/cbc -O ./struct2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 704 + 1
+ n_tests=705
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./struct2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./struct2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 705 + 1
+ n_tests=706
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '701;702;703;704' ./struct2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 706 + 1
+ n_tests=707
+ expected='701;702;703;704'
+ shift
+ echo '701;702;703;704'
+ ./struct2
./shunit.sh: line 150:  9684 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./struct2
+ local cmd=./struct2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 707 + 1
+ n_tests=708
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "701;702;703;704" and cmd "./struct2"'
stdout differ: string "701;702;703;704" and cmd "./struct2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:18.543018989 +0900
+++ tc.out.real	2023-04-24 00:00:18.543018989 +0900
@@ -1 +0,0 @@
-701;702;703;704
+ echo ----
----
+ shunit_test_failed
++ expr 201 + 1
+ n_failed=202
+ return 0
+ assert_compile_success -fPIC ./struct2.cb
+ assert_status 0 ../bin/cbc -fPIC ./struct2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 708 + 1
+ n_tests=709
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./struct2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./struct2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 709 + 1
+ n_tests=710
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './struct2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./struct2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 202 + 1
+ n_failed=203
+ return 1
+ assert_out 7 ./struct3
+ msg=7
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./struct3.cb
+ assert_status 0 ../bin/cbc ./struct3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 710 + 1
+ n_tests=711
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./struct3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./struct3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 711 + 1
+ n_tests=712
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 7 ./struct3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 712 + 1
+ n_tests=713
+ expected=7
+ shift
+ echo 7
+ ./struct3
./shunit.sh: line 150:  9757 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./struct3
+ local cmd=./struct3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 713 + 1
+ n_tests=714
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "7" and cmd "./struct3"'
stdout differ: string "7" and cmd "./struct3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:18.813018886 +0900
+++ tc.out.real	2023-04-24 00:00:18.813018886 +0900
@@ -1 +0,0 @@
-7
+ echo ----
----
+ shunit_test_failed
++ expr 203 + 1
+ n_failed=204
+ return 0
+ assert_compile_success -O ./struct3.cb
+ assert_status 0 ../bin/cbc -O ./struct3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 714 + 1
+ n_tests=715
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./struct3.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./struct3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 715 + 1
+ n_tests=716
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 7 ./struct3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 716 + 1
+ n_tests=717
+ expected=7
+ shift
+ echo 7
+ ./struct3
./shunit.sh: line 150:  9796 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./struct3
+ local cmd=./struct3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 717 + 1
+ n_tests=718
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "7" and cmd "./struct3"'
stdout differ: string "7" and cmd "./struct3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:18.943018839 +0900
+++ tc.out.real	2023-04-24 00:00:18.943018839 +0900
@@ -1 +0,0 @@
-7
+ echo ----
----
+ shunit_test_failed
++ expr 204 + 1
+ n_failed=205
+ return 0
+ assert_compile_success -fPIC ./struct3.cb
+ assert_status 0 ../bin/cbc -fPIC ./struct3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 718 + 1
+ n_tests=719
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./struct3.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./struct3.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 719 + 1
+ n_tests=720
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './struct3.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./struct3.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 205 + 1
+ n_failed=206
+ return 1
+ assert_stat 0 ./struct-semcheck
+ st=0
+ shift
+ assert_compile_success ./struct-semcheck.cb
+ assert_status 0 ../bin/cbc ./struct-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 720 + 1
+ n_tests=721
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./struct-semcheck.cb
+ '[' '' = true ']'
+ ../bin/cbc ./struct-semcheck.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 721 + 1
+ n_tests=722
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./struct-semcheck
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 722 + 1
+ n_tests=723
+ expected=0
+ shift
+ shunit_invoke ./struct-semcheck
+ '[' '' = true ']'
+ ./struct-semcheck
+ really=0
+ assert_not_coredump ./struct-semcheck
+ local cmd=./struct-semcheck
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 723 + 1
+ n_tests=724
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_compile_success empstruct.cb
+ assert_status 0 ../bin/cbc empstruct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 724 + 1
+ n_tests=725
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc empstruct.cb
+ '[' '' = true ']'
+ ../bin/cbc empstruct.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 725 + 1
+ n_tests=726
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_compile_error struct-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 726 + 1
+ n_tests=727
+ ../bin/cbc struct-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 727 + 1
+ n_tests=728
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 728 + 1
+ n_tests=729
+ ../bin/cbc struct-semcheck3.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 729 + 1
+ n_tests=730
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 730 + 1
+ n_tests=731
+ ../bin/cbc struct-semcheck4.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 731 + 1
+ n_tests=732
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 732 + 1
+ n_tests=733
+ ../bin/cbc struct-semcheck5.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 733 + 1
+ n_tests=734
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck6.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 734 + 1
+ n_tests=735
+ ../bin/cbc struct-semcheck6.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 735 + 1
+ n_tests=736
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck7.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 736 + 1
+ n_tests=737
+ ../bin/cbc struct-semcheck7.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 737 + 1
+ n_tests=738
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck8.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 738 + 1
+ n_tests=739
+ ../bin/cbc struct-semcheck8.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 739 + 1
+ n_tests=740
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck9.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 740 + 1
+ n_tests=741
+ ../bin/cbc struct-semcheck9.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 741 + 1
+ n_tests=742
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error struct-semcheck10.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 742 + 1
+ n_tests=743
+ ../bin/cbc struct-semcheck10.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 743 + 1
+ n_tests=744
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_20_union
++ sed 's/^test_//'
+ print 20_union
+ /bin/echo -n 20_union
20_union+ test_20_union
+ assert_out '1;2;513' ./union
+ msg='1;2;513'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./union.cb
+ assert_status 0 ../bin/cbc ./union.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 744 + 1
+ n_tests=745
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./union.cb
+ '[' '' = true ']'
+ ../bin/cbc ./union.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 745 + 1
+ n_tests=746
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;513' ./union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 746 + 1
+ n_tests=747
+ expected='1;2;513'
+ shift
+ echo '1;2;513'
+ ./union
./shunit.sh: line 150: 10195 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./union
+ local cmd=./union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 747 + 1
+ n_tests=748
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;513" and cmd "./union"'
stdout differ: string "1;2;513" and cmd "./union"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:20.263018350 +0900
+++ tc.out.real	2023-04-24 00:00:20.263018350 +0900
@@ -1 +0,0 @@
-1;2;513
+ echo ----
----
+ shunit_test_failed
++ expr 206 + 1
+ n_failed=207
+ return 0
+ assert_compile_success -O ./union.cb
+ assert_status 0 ../bin/cbc -O ./union.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 748 + 1
+ n_tests=749
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./union.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./union.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 749 + 1
+ n_tests=750
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;513' ./union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 750 + 1
+ n_tests=751
+ expected='1;2;513'
+ shift
+ echo '1;2;513'
+ ./union
./shunit.sh: line 150: 10235 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./union
+ local cmd=./union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 751 + 1
+ n_tests=752
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;513" and cmd "./union"'
stdout differ: string "1;2;513" and cmd "./union"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:20.393018301 +0900
+++ tc.out.real	2023-04-24 00:00:20.393018301 +0900
@@ -1 +0,0 @@
-1;2;513
+ echo ----
----
+ shunit_test_failed
++ expr 207 + 1
+ n_failed=208
+ return 0
+ assert_compile_success -fPIC ./union.cb
+ assert_status 0 ../bin/cbc -fPIC ./union.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 752 + 1
+ n_tests=753
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./union.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./union.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 753 + 1
+ n_tests=754
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './union.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./union.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 208 + 1
+ n_failed=209
+ return 1
+ assert_stat 0 ./union-semcheck
+ st=0
+ shift
+ assert_compile_success ./union-semcheck.cb
+ assert_status 0 ../bin/cbc ./union-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 754 + 1
+ n_tests=755
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./union-semcheck.cb
+ '[' '' = true ']'
+ ../bin/cbc ./union-semcheck.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 755 + 1
+ n_tests=756
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./union-semcheck
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 756 + 1
+ n_tests=757
+ expected=0
+ shift
+ shunit_invoke ./union-semcheck
+ '[' '' = true ']'
+ ./union-semcheck
+ really=0
+ assert_not_coredump ./union-semcheck
+ local cmd=./union-semcheck
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 757 + 1
+ n_tests=758
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_compile_error union-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 758 + 1
+ n_tests=759
+ ../bin/cbc union-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 759 + 1
+ n_tests=760
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 760 + 1
+ n_tests=761
+ ../bin/cbc union-semcheck3.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 761 + 1
+ n_tests=762
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 762 + 1
+ n_tests=763
+ ../bin/cbc union-semcheck4.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 763 + 1
+ n_tests=764
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 764 + 1
+ n_tests=765
+ ../bin/cbc union-semcheck5.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 765 + 1
+ n_tests=766
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck6.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 766 + 1
+ n_tests=767
+ ../bin/cbc union-semcheck6.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 767 + 1
+ n_tests=768
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck7.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 768 + 1
+ n_tests=769
+ ../bin/cbc union-semcheck7.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 769 + 1
+ n_tests=770
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck8.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 770 + 1
+ n_tests=771
+ ../bin/cbc union-semcheck8.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 771 + 1
+ n_tests=772
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck9.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 772 + 1
+ n_tests=773
+ ../bin/cbc union-semcheck9.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 773 + 1
+ n_tests=774
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error union-semcheck10.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 774 + 1
+ n_tests=775
+ ../bin/cbc union-semcheck10.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 775 + 1
+ n_tests=776
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_21_typedef
++ sed 's/^test_//'
+ print 21_typedef
+ /bin/echo -n 21_typedef
21_typedef+ test_21_typedef
+ assert_out '1;2;1;1;3;4;5;6;OK' ./usertype
+ msg='1;2;1;1;3;4;5;6;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./usertype.cb
+ assert_status 0 ../bin/cbc ./usertype.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 776 + 1
+ n_tests=777
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./usertype.cb
+ '[' '' = true ']'
+ ../bin/cbc ./usertype.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 777 + 1
+ n_tests=778
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;1;1;3;4;5;6;OK' ./usertype
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 778 + 1
+ n_tests=779
+ expected='1;2;1;1;3;4;5;6;OK'
+ shift
+ echo '1;2;1;1;3;4;5;6;OK'
+ ./usertype
./shunit.sh: line 150: 10603 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./usertype
+ local cmd=./usertype
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 779 + 1
+ n_tests=780
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;1;1;3;4;5;6;OK" and cmd "./usertype"'
stdout differ: string "1;2;1;1;3;4;5;6;OK" and cmd "./usertype"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:21.613017849 +0900
+++ tc.out.real	2023-04-24 00:00:21.613017849 +0900
@@ -1 +0,0 @@
-1;2;1;1;3;4;5;6;OK
+ echo ----
----
+ shunit_test_failed
++ expr 209 + 1
+ n_failed=210
+ return 0
+ assert_compile_success -O ./usertype.cb
+ assert_status 0 ../bin/cbc -O ./usertype.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 780 + 1
+ n_tests=781
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./usertype.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./usertype.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 781 + 1
+ n_tests=782
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;1;1;3;4;5;6;OK' ./usertype
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 782 + 1
+ n_tests=783
+ expected='1;2;1;1;3;4;5;6;OK'
+ shift
+ echo '1;2;1;1;3;4;5;6;OK'
+ ./usertype
./shunit.sh: line 150: 10642 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./usertype
+ local cmd=./usertype
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 783 + 1
+ n_tests=784
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;1;1;3;4;5;6;OK" and cmd "./usertype"'
stdout differ: string "1;2;1;1;3;4;5;6;OK" and cmd "./usertype"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:21.753017797 +0900
+++ tc.out.real	2023-04-24 00:00:21.753017797 +0900
@@ -1 +0,0 @@
-1;2;1;1;3;4;5;6;OK
+ echo ----
----
+ shunit_test_failed
++ expr 210 + 1
+ n_failed=211
+ return 0
+ assert_compile_success -fPIC ./usertype.cb
+ assert_status 0 ../bin/cbc -fPIC ./usertype.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 784 + 1
+ n_tests=785
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./usertype.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./usertype.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 785 + 1
+ n_tests=786
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './usertype.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./usertype.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 211 + 1
+ n_failed=212
+ return 1
+ assert_compile_error recursivetypedef.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 786 + 1
+ n_tests=787
+ ../bin/cbc recursivetypedef.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 787 + 1
+ n_tests=788
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_22_pointer
++ sed 's/^test_//'
+ print 22_pointer
+ /bin/echo -n 22_pointer
22_pointer+ test_22_pointer
+ assert_out '5;5' ./pointer
+ msg='5;5'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./pointer.cb
+ assert_status 0 ../bin/cbc ./pointer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 788 + 1
+ n_tests=789
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./pointer.cb
+ '[' '' = true ']'
+ ../bin/cbc ./pointer.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 789 + 1
+ n_tests=790
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '5;5' ./pointer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 790 + 1
+ n_tests=791
+ expected='5;5'
+ shift
+ echo '5;5'
+ ./pointer
./shunit.sh: line 150: 10745 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./pointer
+ local cmd=./pointer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 791 + 1
+ n_tests=792
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "5;5" and cmd "./pointer"'
stdout differ: string "5;5" and cmd "./pointer"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:22.103017668 +0900
+++ tc.out.real	2023-04-24 00:00:22.103017668 +0900
@@ -1 +0,0 @@
-5;5
+ echo ----
----
+ shunit_test_failed
++ expr 212 + 1
+ n_failed=213
+ return 0
+ assert_compile_success -O ./pointer.cb
+ assert_status 0 ../bin/cbc -O ./pointer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 792 + 1
+ n_tests=793
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./pointer.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./pointer.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 793 + 1
+ n_tests=794
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '5;5' ./pointer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 794 + 1
+ n_tests=795
+ expected='5;5'
+ shift
+ echo '5;5'
+ ./pointer
./shunit.sh: line 150: 10783 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./pointer
+ local cmd=./pointer
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 795 + 1
+ n_tests=796
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "5;5" and cmd "./pointer"'
stdout differ: string "5;5" and cmd "./pointer"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:22.223017623 +0900
+++ tc.out.real	2023-04-24 00:00:22.223017623 +0900
@@ -1 +0,0 @@
-5;5
+ echo ----
----
+ shunit_test_failed
++ expr 213 + 1
+ n_failed=214
+ return 0
+ assert_compile_success -fPIC ./pointer.cb
+ assert_status 0 ../bin/cbc -fPIC ./pointer.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 796 + 1
+ n_tests=797
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./pointer.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./pointer.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 797 + 1
+ n_tests=798
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './pointer.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./pointer.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 214 + 1
+ n_failed=215
+ return 1
+ assert_out 777 ./pointer2
+ msg=777
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./pointer2.cb
+ assert_status 0 ../bin/cbc ./pointer2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 798 + 1
+ n_tests=799
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./pointer2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./pointer2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 799 + 1
+ n_tests=800
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 777 ./pointer2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 800 + 1
+ n_tests=801
+ expected=777
+ shift
+ echo 777
+ ./pointer2
./shunit.sh: line 150: 10854 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./pointer2
+ local cmd=./pointer2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 801 + 1
+ n_tests=802
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "777" and cmd "./pointer2"'
stdout differ: string "777" and cmd "./pointer2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:22.473017530 +0900
+++ tc.out.real	2023-04-24 00:00:22.473017530 +0900
@@ -1 +0,0 @@
-777
+ echo ----
----
+ shunit_test_failed
++ expr 215 + 1
+ n_failed=216
+ return 0
+ assert_compile_success -O ./pointer2.cb
+ assert_status 0 ../bin/cbc -O ./pointer2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 802 + 1
+ n_tests=803
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./pointer2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./pointer2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 803 + 1
+ n_tests=804
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 777 ./pointer2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 804 + 1
+ n_tests=805
+ expected=777
+ shift
+ echo 777
+ ./pointer2
./shunit.sh: line 150: 10894 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./pointer2
+ local cmd=./pointer2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 805 + 1
+ n_tests=806
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "777" and cmd "./pointer2"'
stdout differ: string "777" and cmd "./pointer2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:22.603017482 +0900
+++ tc.out.real	2023-04-24 00:00:22.603017482 +0900
@@ -1 +0,0 @@
-777
+ echo ----
----
+ shunit_test_failed
++ expr 216 + 1
+ n_failed=217
+ return 0
+ assert_compile_success -fPIC ./pointer2.cb
+ assert_status 0 ../bin/cbc -fPIC ./pointer2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 806 + 1
+ n_tests=807
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./pointer2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./pointer2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 807 + 1
+ n_tests=808
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './pointer2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./pointer2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 217 + 1
+ n_failed=218
+ return 1
+ assert_out '1;777;3;4;1;777;3;4' ./pointer3
+ msg='1;777;3;4;1;777;3;4'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./pointer3.cb
+ assert_status 0 ../bin/cbc ./pointer3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 808 + 1
+ n_tests=809
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./pointer3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./pointer3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 809 + 1
+ n_tests=810
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;777;3;4;1;777;3;4' ./pointer3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 810 + 1
+ n_tests=811
+ expected='1;777;3;4;1;777;3;4'
+ shift
+ echo '1;777;3;4;1;777;3;4'
+ ./pointer3
./shunit.sh: line 150: 10966 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./pointer3
+ local cmd=./pointer3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 811 + 1
+ n_tests=812
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;777;3;4;1;777;3;4" and cmd "./pointer3"'
stdout differ: string "1;777;3;4;1;777;3;4" and cmd "./pointer3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:22.883017378 +0900
+++ tc.out.real	2023-04-24 00:00:22.883017378 +0900
@@ -1 +0,0 @@
-1;777;3;4;1;777;3;4
+ echo ----
----
+ shunit_test_failed
++ expr 218 + 1
+ n_failed=219
+ return 0
+ assert_compile_success -O ./pointer3.cb
+ assert_status 0 ../bin/cbc -O ./pointer3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 812 + 1
+ n_tests=813
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./pointer3.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./pointer3.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 813 + 1
+ n_tests=814
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;777;3;4;1;777;3;4' ./pointer3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 814 + 1
+ n_tests=815
+ expected='1;777;3;4;1;777;3;4'
+ shift
+ echo '1;777;3;4;1;777;3;4'
+ ./pointer3
./shunit.sh: line 150: 11005 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./pointer3
+ local cmd=./pointer3
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 815 + 1
+ n_tests=816
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;777;3;4;1;777;3;4" and cmd "./pointer3"'
stdout differ: string "1;777;3;4;1;777;3;4" and cmd "./pointer3"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:23.023017326 +0900
+++ tc.out.real	2023-04-24 00:00:23.023017326 +0900
@@ -1 +0,0 @@
-1;777;3;4;1;777;3;4
+ echo ----
----
+ shunit_test_failed
++ expr 219 + 1
+ n_failed=220
+ return 0
+ assert_compile_success -fPIC ./pointer3.cb
+ assert_status 0 ../bin/cbc -fPIC ./pointer3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 816 + 1
+ n_tests=817
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./pointer3.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./pointer3.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 817 + 1
+ n_tests=818
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './pointer3.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./pointer3.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 220 + 1
+ n_failed=221
+ return 1
+ assert_out 777 ./pointer4
+ msg=777
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./pointer4.cb
+ assert_status 0 ../bin/cbc ./pointer4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 818 + 1
+ n_tests=819
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./pointer4.cb
+ '[' '' = true ']'
+ ../bin/cbc ./pointer4.cb
+ really=130
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 819 + 1
+ n_tests=820
+ '[' -f core ']'
+ return 0
+ '[' 130 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' './pointer4.cb]: status 0 expected but was: 130'
shunit[../bin/cbc ./pointer4.cb]: status 0 expected but was: 130
+ shunit_test_failed
++ expr 221 + 1
+ n_failed=222
+ return 1
+ assert_out '1;2;3;4;5;6;77;78' ./ptrmemb
+ msg='1;2;3;4;5;6;77;78'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ptrmemb.cb
+ assert_status 0 ../bin/cbc ./ptrmemb.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 820 + 1
+ n_tests=821
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ptrmemb.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ptrmemb.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 821 + 1
+ n_tests=822
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;77;78' ./ptrmemb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 822 + 1
+ n_tests=823
+ expected='1;2;3;4;5;6;77;78'
+ shift
+ echo '1;2;3;4;5;6;77;78'
+ ./ptrmemb
./shunit.sh: line 150: 11103 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrmemb
+ local cmd=./ptrmemb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 823 + 1
+ n_tests=824
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;77;78" and cmd "./ptrmemb"'
stdout differ: string "1;2;3;4;5;6;77;78" and cmd "./ptrmemb"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:23.323017215 +0900
+++ tc.out.real	2023-04-24 00:00:23.323017215 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;77;78
+ echo ----
----
+ shunit_test_failed
++ expr 222 + 1
+ n_failed=223
+ return 0
+ assert_compile_success -O ./ptrmemb.cb
+ assert_status 0 ../bin/cbc -O ./ptrmemb.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 824 + 1
+ n_tests=825
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ptrmemb.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ptrmemb.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 825 + 1
+ n_tests=826
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;4;5;6;77;78' ./ptrmemb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 826 + 1
+ n_tests=827
+ expected='1;2;3;4;5;6;77;78'
+ shift
+ echo '1;2;3;4;5;6;77;78'
+ ./ptrmemb
./shunit.sh: line 150: 11143 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrmemb
+ local cmd=./ptrmemb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 827 + 1
+ n_tests=828
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;4;5;6;77;78" and cmd "./ptrmemb"'
stdout differ: string "1;2;3;4;5;6;77;78" and cmd "./ptrmemb"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:23.463017163 +0900
+++ tc.out.real	2023-04-24 00:00:23.463017163 +0900
@@ -1 +0,0 @@
-1;2;3;4;5;6;77;78
+ echo ----
----
+ shunit_test_failed
++ expr 223 + 1
+ n_failed=224
+ return 0
+ assert_compile_success -fPIC ./ptrmemb.cb
+ assert_status 0 ../bin/cbc -fPIC ./ptrmemb.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 828 + 1
+ n_tests=829
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ptrmemb.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ptrmemb.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 829 + 1
+ n_tests=830
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ptrmemb.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ptrmemb.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 224 + 1
+ n_failed=225
+ return 1
+ assert_out 7 ./ptrmemb2
+ msg=7
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ptrmemb2.cb
+ assert_status 0 ../bin/cbc ./ptrmemb2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 830 + 1
+ n_tests=831
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ptrmemb2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ptrmemb2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 831 + 1
+ n_tests=832
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 7 ./ptrmemb2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 832 + 1
+ n_tests=833
+ expected=7
+ shift
+ echo 7
+ ./ptrmemb2
./shunit.sh: line 150: 11216 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrmemb2
+ local cmd=./ptrmemb2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 833 + 1
+ n_tests=834
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "7" and cmd "./ptrmemb2"'
stdout differ: string "7" and cmd "./ptrmemb2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:23.733017062 +0900
+++ tc.out.real	2023-04-24 00:00:23.733017062 +0900
@@ -1 +0,0 @@
-7
+ echo ----
----
+ shunit_test_failed
++ expr 225 + 1
+ n_failed=226
+ return 0
+ assert_compile_success -O ./ptrmemb2.cb
+ assert_status 0 ../bin/cbc -O ./ptrmemb2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 834 + 1
+ n_tests=835
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ptrmemb2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ptrmemb2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 835 + 1
+ n_tests=836
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 7 ./ptrmemb2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 836 + 1
+ n_tests=837
+ expected=7
+ shift
+ echo 7
+ ./ptrmemb2
./shunit.sh: line 150: 11256 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrmemb2
+ local cmd=./ptrmemb2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 837 + 1
+ n_tests=838
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "7" and cmd "./ptrmemb2"'
stdout differ: string "7" and cmd "./ptrmemb2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:23.863017015 +0900
+++ tc.out.real	2023-04-24 00:00:23.863017015 +0900
@@ -1 +0,0 @@
-7
+ echo ----
----
+ shunit_test_failed
++ expr 226 + 1
+ n_failed=227
+ return 0
+ assert_compile_success -fPIC ./ptrmemb2.cb
+ assert_status 0 ../bin/cbc -fPIC ./ptrmemb2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 838 + 1
+ n_tests=839
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ptrmemb2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ptrmemb2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 839 + 1
+ n_tests=840
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ptrmemb2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ptrmemb2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 227 + 1
+ n_failed=228
+ return 1
+ assert_out 'OK;OK;OK;OK' ./addressof
+ msg='OK;OK;OK;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./addressof.cb
+ assert_status 0 ../bin/cbc ./addressof.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 840 + 1
+ n_tests=841
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./addressof.cb
+ '[' '' = true ']'
+ ../bin/cbc ./addressof.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 841 + 1
+ n_tests=842
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'OK;OK;OK;OK' ./addressof
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 842 + 1
+ n_tests=843
+ expected='OK;OK;OK;OK'
+ shift
+ echo 'OK;OK;OK;OK'
+ ./addressof
./shunit.sh: line 150: 11328 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./addressof
+ local cmd=./addressof
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 843 + 1
+ n_tests=844
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK;OK;OK;OK" and cmd "./addressof"'
stdout differ: string "OK;OK;OK;OK" and cmd "./addressof"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:24.133016915 +0900
+++ tc.out.real	2023-04-24 00:00:24.133016915 +0900
@@ -1 +0,0 @@
-OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 228 + 1
+ n_failed=229
+ return 0
+ assert_compile_success -O ./addressof.cb
+ assert_status 0 ../bin/cbc -O ./addressof.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 844 + 1
+ n_tests=845
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./addressof.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./addressof.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 845 + 1
+ n_tests=846
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'OK;OK;OK;OK' ./addressof
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 846 + 1
+ n_tests=847
+ expected='OK;OK;OK;OK'
+ shift
+ echo 'OK;OK;OK;OK'
+ ./addressof
./shunit.sh: line 150: 11368 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./addressof
+ local cmd=./addressof
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 847 + 1
+ n_tests=848
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK;OK;OK;OK" and cmd "./addressof"'
stdout differ: string "OK;OK;OK;OK" and cmd "./addressof"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:24.273016862 +0900
+++ tc.out.real	2023-04-24 00:00:24.273016862 +0900
@@ -1 +0,0 @@
-OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 229 + 1
+ n_failed=230
+ return 0
+ assert_compile_success -fPIC ./addressof.cb
+ assert_status 0 ../bin/cbc -fPIC ./addressof.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 848 + 1
+ n_tests=849
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./addressof.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./addressof.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 849 + 1
+ n_tests=850
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './addressof.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./addressof.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 230 + 1
+ n_failed=231
+ return 1
+ assert_out '-4;-5;-5;-3' ./ptrdiff
+ msg='-4;-5;-5;-3'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ptrdiff.cb
+ assert_status 0 ../bin/cbc ./ptrdiff.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 850 + 1
+ n_tests=851
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ptrdiff.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ptrdiff.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 851 + 1
+ n_tests=852
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-4;-5;-5;-3' ./ptrdiff
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 852 + 1
+ n_tests=853
+ expected='-4;-5;-5;-3'
+ shift
+ echo '-4;-5;-5;-3'
+ ./ptrdiff
./shunit.sh: line 150: 11440 Floating point exception"$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrdiff
+ local cmd=./ptrdiff
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 853 + 1
+ n_tests=854
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-4;-5;-5;-3" and cmd "./ptrdiff"'
stdout differ: string "-4;-5;-5;-3" and cmd "./ptrdiff"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:24.533016767 +0900
+++ tc.out.real	2023-04-24 00:00:24.533016767 +0900
@@ -1 +0,0 @@
--4;-5;-5;-3
+ echo ----
----
+ shunit_test_failed
++ expr 231 + 1
+ n_failed=232
+ return 0
+ assert_compile_success -O ./ptrdiff.cb
+ assert_status 0 ../bin/cbc -O ./ptrdiff.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 854 + 1
+ n_tests=855
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ptrdiff.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ptrdiff.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 855 + 1
+ n_tests=856
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-4;-5;-5;-3' ./ptrdiff
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 856 + 1
+ n_tests=857
+ expected='-4;-5;-5;-3'
+ shift
+ echo '-4;-5;-5;-3'
+ ./ptrdiff
./shunit.sh: line 150: 11479 Floating point exception"$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ptrdiff
+ local cmd=./ptrdiff
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 857 + 1
+ n_tests=858
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-4;-5;-5;-3" and cmd "./ptrdiff"'
stdout differ: string "-4;-5;-5;-3" and cmd "./ptrdiff"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:24.663016718 +0900
+++ tc.out.real	2023-04-24 00:00:24.663016718 +0900
@@ -1 +0,0 @@
--4;-5;-5;-3
+ echo ----
----
+ shunit_test_failed
++ expr 232 + 1
+ n_failed=233
+ return 0
+ assert_compile_success -fPIC ./ptrdiff.cb
+ assert_status 0 ../bin/cbc -fPIC ./ptrdiff.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 858 + 1
+ n_tests=859
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ptrdiff.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ptrdiff.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 859 + 1
+ n_tests=860
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ptrdiff.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ptrdiff.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 233 + 1
+ n_failed=234
+ return 1
+ assert_compile_error deref-semcheck1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 860 + 1
+ n_tests=861
+ ../bin/cbc deref-semcheck1.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 861 + 1
+ n_tests=862
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error deref-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 862 + 1
+ n_tests=863
+ ../bin/cbc deref-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 863 + 1
+ n_tests=864
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error deref-semcheck3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 864 + 1
+ n_tests=865
+ ../bin/cbc deref-semcheck3.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 865 + 1
+ n_tests=866
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error deref-semcheck4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 866 + 1
+ n_tests=867
+ ../bin/cbc deref-semcheck4.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 867 + 1
+ n_tests=868
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error deref-semcheck5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 868 + 1
+ n_tests=869
+ ../bin/cbc deref-semcheck5.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 869 + 1
+ n_tests=870
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_23_limits
++ sed 's/^test_//'
+ print 23_limits
+ /bin/echo -n 23_limits
23_limits+ test_23_limits
+ assert_out '2;64;-128;0' ./charops
+ msg='2;64;-128;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./charops.cb
+ assert_status 0 ../bin/cbc ./charops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 870 + 1
+ n_tests=871
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./charops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./charops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 871 + 1
+ n_tests=872
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;64;-128;0' ./charops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 872 + 1
+ n_tests=873
+ expected='2;64;-128;0'
+ shift
+ echo '2;64;-128;0'
+ ./charops
./shunit.sh: line 150: 11696 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./charops
+ local cmd=./charops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 873 + 1
+ n_tests=874
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;64;-128;0" and cmd "./charops"'
stdout differ: string "2;64;-128;0" and cmd "./charops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:25.363016459 +0900
+++ tc.out.real	2023-04-24 00:00:25.363016459 +0900
@@ -1 +0,0 @@
-2;64;-128;0
+ echo ----
----
+ shunit_test_failed
++ expr 234 + 1
+ n_failed=235
+ return 0
+ assert_compile_success -O ./charops.cb
+ assert_status 0 ../bin/cbc -O ./charops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 874 + 1
+ n_tests=875
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./charops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./charops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 875 + 1
+ n_tests=876
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;64;-128;0' ./charops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 876 + 1
+ n_tests=877
+ expected='2;64;-128;0'
+ shift
+ echo '2;64;-128;0'
+ ./charops
./shunit.sh: line 150: 11735 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./charops
+ local cmd=./charops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 877 + 1
+ n_tests=878
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;64;-128;0" and cmd "./charops"'
stdout differ: string "2;64;-128;0" and cmd "./charops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:25.483016414 +0900
+++ tc.out.real	2023-04-24 00:00:25.483016414 +0900
@@ -1 +0,0 @@
-2;64;-128;0
+ echo ----
----
+ shunit_test_failed
++ expr 235 + 1
+ n_failed=236
+ return 0
+ assert_compile_success -fPIC ./charops.cb
+ assert_status 0 ../bin/cbc -fPIC ./charops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 878 + 1
+ n_tests=879
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./charops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./charops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 879 + 1
+ n_tests=880
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './charops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./charops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 236 + 1
+ n_failed=237
+ return 1
+ assert_out '-2;-64;-128;0' ./charops2
+ msg='-2;-64;-128;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./charops2.cb
+ assert_status 0 ../bin/cbc ./charops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 880 + 1
+ n_tests=881
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./charops2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./charops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 881 + 1
+ n_tests=882
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-2;-64;-128;0' ./charops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 882 + 1
+ n_tests=883
+ expected='-2;-64;-128;0'
+ shift
+ echo '-2;-64;-128;0'
+ ./charops2
./shunit.sh: line 150: 11807 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./charops2
+ local cmd=./charops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 883 + 1
+ n_tests=884
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-2;-64;-128;0" and cmd "./charops2"'
stdout differ: string "-2;-64;-128;0" and cmd "./charops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:25.743016317 +0900
+++ tc.out.real	2023-04-24 00:00:25.743016317 +0900
@@ -1 +0,0 @@
--2;-64;-128;0
+ echo ----
----
+ shunit_test_failed
++ expr 237 + 1
+ n_failed=238
+ return 0
+ assert_compile_success -O ./charops2.cb
+ assert_status 0 ../bin/cbc -O ./charops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 884 + 1
+ n_tests=885
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./charops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./charops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 885 + 1
+ n_tests=886
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-2;-64;-128;0' ./charops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 886 + 1
+ n_tests=887
+ expected='-2;-64;-128;0'
+ shift
+ echo '-2;-64;-128;0'
+ ./charops2
./shunit.sh: line 150: 11847 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./charops2
+ local cmd=./charops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 887 + 1
+ n_tests=888
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-2;-64;-128;0" and cmd "./charops2"'
stdout differ: string "-2;-64;-128;0" and cmd "./charops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:25.883016266 +0900
+++ tc.out.real	2023-04-24 00:00:25.883016266 +0900
@@ -1 +0,0 @@
--2;-64;-128;0
+ echo ----
----
+ shunit_test_failed
++ expr 238 + 1
+ n_failed=239
+ return 0
+ assert_compile_success -fPIC ./charops2.cb
+ assert_status 0 ../bin/cbc -fPIC ./charops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 888 + 1
+ n_tests=889
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./charops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./charops2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 889 + 1
+ n_tests=890
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './charops2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./charops2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 239 + 1
+ n_failed=240
+ return 1
+ assert_out '2;64;128;0' ./ucharops
+ msg='2;64;128;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ucharops.cb
+ assert_status 0 ../bin/cbc ./ucharops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 890 + 1
+ n_tests=891
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ucharops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ucharops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 891 + 1
+ n_tests=892
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;64;128;0' ./ucharops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 892 + 1
+ n_tests=893
+ expected='2;64;128;0'
+ shift
+ echo '2;64;128;0'
+ ./ucharops
./shunit.sh: line 150: 11917 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ucharops
+ local cmd=./ucharops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 893 + 1
+ n_tests=894
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;64;128;0" and cmd "./ucharops"'
stdout differ: string "2;64;128;0" and cmd "./ucharops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:26.133016173 +0900
+++ tc.out.real	2023-04-24 00:00:26.133016173 +0900
@@ -1 +0,0 @@
-2;64;128;0
+ echo ----
----
+ shunit_test_failed
++ expr 240 + 1
+ n_failed=241
+ return 0
+ assert_compile_success -O ./ucharops.cb
+ assert_status 0 ../bin/cbc -O ./ucharops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 894 + 1
+ n_tests=895
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ucharops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ucharops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 895 + 1
+ n_tests=896
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;64;128;0' ./ucharops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 896 + 1
+ n_tests=897
+ expected='2;64;128;0'
+ shift
+ echo '2;64;128;0'
+ ./ucharops
./shunit.sh: line 150: 11956 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ucharops
+ local cmd=./ucharops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 897 + 1
+ n_tests=898
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;64;128;0" and cmd "./ucharops"'
stdout differ: string "2;64;128;0" and cmd "./ucharops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:26.253016128 +0900
+++ tc.out.real	2023-04-24 00:00:26.253016128 +0900
@@ -1 +0,0 @@
-2;64;128;0
+ echo ----
----
+ shunit_test_failed
++ expr 241 + 1
+ n_failed=242
+ return 0
+ assert_compile_success -fPIC ./ucharops.cb
+ assert_status 0 ../bin/cbc -fPIC ./ucharops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 898 + 1
+ n_tests=899
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ucharops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ucharops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 899 + 1
+ n_tests=900
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ucharops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ucharops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 242 + 1
+ n_failed=243
+ return 1
+ assert_out '254;192;128;0' ./ucharops2
+ msg='254;192;128;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ucharops2.cb
+ assert_status 0 ../bin/cbc ./ucharops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 900 + 1
+ n_tests=901
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ucharops2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ucharops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 901 + 1
+ n_tests=902
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '254;192;128;0' ./ucharops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 902 + 1
+ n_tests=903
+ expected='254;192;128;0'
+ shift
+ echo '254;192;128;0'
+ ./ucharops2
./shunit.sh: line 150: 12028 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ucharops2
+ local cmd=./ucharops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 903 + 1
+ n_tests=904
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "254;192;128;0" and cmd "./ucharops2"'
stdout differ: string "254;192;128;0" and cmd "./ucharops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:26.513016033 +0900
+++ tc.out.real	2023-04-24 00:00:26.513016033 +0900
@@ -1 +0,0 @@
-254;192;128;0
+ echo ----
----
+ shunit_test_failed
++ expr 243 + 1
+ n_failed=244
+ return 0
+ assert_compile_success -O ./ucharops2.cb
+ assert_status 0 ../bin/cbc -O ./ucharops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 904 + 1
+ n_tests=905
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ucharops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ucharops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 905 + 1
+ n_tests=906
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '254;192;128;0' ./ucharops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 906 + 1
+ n_tests=907
+ expected='254;192;128;0'
+ shift
+ echo '254;192;128;0'
+ ./ucharops2
./shunit.sh: line 150: 12068 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ucharops2
+ local cmd=./ucharops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 907 + 1
+ n_tests=908
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "254;192;128;0" and cmd "./ucharops2"'
stdout differ: string "254;192;128;0" and cmd "./ucharops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:26.653015980 +0900
+++ tc.out.real	2023-04-24 00:00:26.653015980 +0900
@@ -1 +0,0 @@
-254;192;128;0
+ echo ----
----
+ shunit_test_failed
++ expr 244 + 1
+ n_failed=245
+ return 0
+ assert_compile_success -fPIC ./ucharops2.cb
+ assert_status 0 ../bin/cbc -fPIC ./ucharops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 908 + 1
+ n_tests=909
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ucharops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ucharops2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 909 + 1
+ n_tests=910
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ucharops2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ucharops2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 245 + 1
+ n_failed=246
+ return 1
+ assert_out '2;16384;-32768;0' ./shortops
+ msg='2;16384;-32768;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./shortops.cb
+ assert_status 0 ../bin/cbc ./shortops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 910 + 1
+ n_tests=911
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./shortops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./shortops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 911 + 1
+ n_tests=912
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;16384;-32768;0' ./shortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 912 + 1
+ n_tests=913
+ expected='2;16384;-32768;0'
+ shift
+ echo '2;16384;-32768;0'
+ ./shortops
./shunit.sh: line 150: 12138 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./shortops
+ local cmd=./shortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 913 + 1
+ n_tests=914
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;16384;-32768;0" and cmd "./shortops"'
stdout differ: string "2;16384;-32768;0" and cmd "./shortops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:26.903015894 +0900
+++ tc.out.real	2023-04-24 00:00:26.903015894 +0900
@@ -1 +0,0 @@
-2;16384;-32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 246 + 1
+ n_failed=247
+ return 0
+ assert_compile_success -O ./shortops.cb
+ assert_status 0 ../bin/cbc -O ./shortops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 914 + 1
+ n_tests=915
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./shortops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./shortops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 915 + 1
+ n_tests=916
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;16384;-32768;0' ./shortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 916 + 1
+ n_tests=917
+ expected='2;16384;-32768;0'
+ shift
+ echo '2;16384;-32768;0'
+ ./shortops
./shunit.sh: line 150: 12176 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./shortops
+ local cmd=./shortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 917 + 1
+ n_tests=918
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;16384;-32768;0" and cmd "./shortops"'
stdout differ: string "2;16384;-32768;0" and cmd "./shortops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:27.043015858 +0900
+++ tc.out.real	2023-04-24 00:00:27.043015858 +0900
@@ -1 +0,0 @@
-2;16384;-32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 247 + 1
+ n_failed=248
+ return 0
+ assert_compile_success -fPIC ./shortops.cb
+ assert_status 0 ../bin/cbc -fPIC ./shortops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 918 + 1
+ n_tests=919
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./shortops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./shortops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 919 + 1
+ n_tests=920
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './shortops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./shortops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 248 + 1
+ n_failed=249
+ return 1
+ assert_out '-2;-16384;-32768;0' ./shortops2
+ msg='-2;-16384;-32768;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./shortops2.cb
+ assert_status 0 ../bin/cbc ./shortops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 920 + 1
+ n_tests=921
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./shortops2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./shortops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 921 + 1
+ n_tests=922
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-2;-16384;-32768;0' ./shortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 922 + 1
+ n_tests=923
+ expected='-2;-16384;-32768;0'
+ shift
+ echo '-2;-16384;-32768;0'
+ ./shortops2
./shunit.sh: line 150: 12247 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./shortops2
+ local cmd=./shortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 923 + 1
+ n_tests=924
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-2;-16384;-32768;0" and cmd "./shortops2"'
stdout differ: string "-2;-16384;-32768;0" and cmd "./shortops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:27.333015785 +0900
+++ tc.out.real	2023-04-24 00:00:27.333015785 +0900
@@ -1 +0,0 @@
--2;-16384;-32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 249 + 1
+ n_failed=250
+ return 0
+ assert_compile_success -O ./shortops2.cb
+ assert_status 0 ../bin/cbc -O ./shortops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 924 + 1
+ n_tests=925
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./shortops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./shortops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 925 + 1
+ n_tests=926
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '-2;-16384;-32768;0' ./shortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 926 + 1
+ n_tests=927
+ expected='-2;-16384;-32768;0'
+ shift
+ echo '-2;-16384;-32768;0'
+ ./shortops2
./shunit.sh: line 150: 12287 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./shortops2
+ local cmd=./shortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 927 + 1
+ n_tests=928
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "-2;-16384;-32768;0" and cmd "./shortops2"'
stdout differ: string "-2;-16384;-32768;0" and cmd "./shortops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:27.473015749 +0900
+++ tc.out.real	2023-04-24 00:00:27.473015749 +0900
@@ -1 +0,0 @@
--2;-16384;-32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 250 + 1
+ n_failed=251
+ return 0
+ assert_compile_success -fPIC ./shortops2.cb
+ assert_status 0 ../bin/cbc -fPIC ./shortops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 928 + 1
+ n_tests=929
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./shortops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./shortops2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 929 + 1
+ n_tests=930
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './shortops2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./shortops2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 251 + 1
+ n_failed=252
+ return 1
+ assert_out '2;16384;32768;0' ./ushortops
+ msg='2;16384;32768;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ushortops.cb
+ assert_status 0 ../bin/cbc ./ushortops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 930 + 1
+ n_tests=931
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ushortops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ushortops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 931 + 1
+ n_tests=932
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;16384;32768;0' ./ushortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 932 + 1
+ n_tests=933
+ expected='2;16384;32768;0'
+ shift
+ echo '2;16384;32768;0'
+ ./ushortops
./shunit.sh: line 150: 12358 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ushortops
+ local cmd=./ushortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 933 + 1
+ n_tests=934
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;16384;32768;0" and cmd "./ushortops"'
stdout differ: string "2;16384;32768;0" and cmd "./ushortops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:27.723015686 +0900
+++ tc.out.real	2023-04-24 00:00:27.723015686 +0900
@@ -1 +0,0 @@
-2;16384;32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 252 + 1
+ n_failed=253
+ return 0
+ assert_compile_success -O ./ushortops.cb
+ assert_status 0 ../bin/cbc -O ./ushortops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 934 + 1
+ n_tests=935
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ushortops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ushortops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 935 + 1
+ n_tests=936
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;16384;32768;0' ./ushortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 936 + 1
+ n_tests=937
+ expected='2;16384;32768;0'
+ shift
+ echo '2;16384;32768;0'
+ ./ushortops
./shunit.sh: line 150: 12396 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ushortops
+ local cmd=./ushortops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 937 + 1
+ n_tests=938
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;16384;32768;0" and cmd "./ushortops"'
stdout differ: string "2;16384;32768;0" and cmd "./ushortops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:27.843015657 +0900
+++ tc.out.real	2023-04-24 00:00:27.843015657 +0900
@@ -1 +0,0 @@
-2;16384;32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 253 + 1
+ n_failed=254
+ return 0
+ assert_compile_success -fPIC ./ushortops.cb
+ assert_status 0 ../bin/cbc -fPIC ./ushortops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 938 + 1
+ n_tests=939
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ushortops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ushortops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 939 + 1
+ n_tests=940
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ushortops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ushortops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 254 + 1
+ n_failed=255
+ return 1
+ assert_out '65534;49152;32768;0' ./ushortops2
+ msg='65534;49152;32768;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ushortops2.cb
+ assert_status 0 ../bin/cbc ./ushortops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 940 + 1
+ n_tests=941
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ushortops2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ushortops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 941 + 1
+ n_tests=942
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '65534;49152;32768;0' ./ushortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 942 + 1
+ n_tests=943
+ expected='65534;49152;32768;0'
+ shift
+ echo '65534;49152;32768;0'
+ ./ushortops2
./shunit.sh: line 150: 12469 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ushortops2
+ local cmd=./ushortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 943 + 1
+ n_tests=944
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "65534;49152;32768;0" and cmd "./ushortops2"'
stdout differ: string "65534;49152;32768;0" and cmd "./ushortops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:28.113015588 +0900
+++ tc.out.real	2023-04-24 00:00:28.113015588 +0900
@@ -1 +0,0 @@
-65534;49152;32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 255 + 1
+ n_failed=256
+ return 0
+ assert_compile_success -O ./ushortops2.cb
+ assert_status 0 ../bin/cbc -O ./ushortops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 944 + 1
+ n_tests=945
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ushortops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ushortops2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 945 + 1
+ n_tests=946
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '65534;49152;32768;0' ./ushortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 946 + 1
+ n_tests=947
+ expected='65534;49152;32768;0'
+ shift
+ echo '65534;49152;32768;0'
+ ./ushortops2
./shunit.sh: line 150: 12509 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ushortops2
+ local cmd=./ushortops2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 947 + 1
+ n_tests=948
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "65534;49152;32768;0" and cmd "./ushortops2"'
stdout differ: string "65534;49152;32768;0" and cmd "./ushortops2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:28.273015548 +0900
+++ tc.out.real	2023-04-24 00:00:28.273015548 +0900
@@ -1 +0,0 @@
-65534;49152;32768;0
+ echo ----
----
+ shunit_test_failed
++ expr 256 + 1
+ n_failed=257
+ return 0
+ assert_compile_success -fPIC ./ushortops2.cb
+ assert_status 0 ../bin/cbc -fPIC ./ushortops2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 948 + 1
+ n_tests=949
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ushortops2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ushortops2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 949 + 1
+ n_tests=950
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ushortops2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ushortops2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 257 + 1
+ n_failed=258
+ return 1
+ assert_out '2;1073741824;-2147483648;0' ./intops
+ msg='2;1073741824;-2147483648;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./intops.cb
+ assert_status 0 ../bin/cbc ./intops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 950 + 1
+ n_tests=951
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./intops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./intops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 951 + 1
+ n_tests=952
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;1073741824;-2147483648;0' ./intops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 952 + 1
+ n_tests=953
+ expected='2;1073741824;-2147483648;0'
+ shift
+ echo '2;1073741824;-2147483648;0'
+ ./intops
./shunit.sh: line 150: 12580 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./intops
+ local cmd=./intops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 953 + 1
+ n_tests=954
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;1073741824;-2147483648;0" and cmd "./intops"'
stdout differ: string "2;1073741824;-2147483648;0" and cmd "./intops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:28.543015479 +0900
+++ tc.out.real	2023-04-24 00:00:28.543015479 +0900
@@ -1 +0,0 @@
-2;1073741824;-2147483648;0
+ echo ----
----
+ shunit_test_failed
++ expr 258 + 1
+ n_failed=259
+ return 0
+ assert_compile_success -O ./intops.cb
+ assert_status 0 ../bin/cbc -O ./intops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 954 + 1
+ n_tests=955
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./intops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./intops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 955 + 1
+ n_tests=956
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '2;1073741824;-2147483648;0' ./intops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 956 + 1
+ n_tests=957
+ expected='2;1073741824;-2147483648;0'
+ shift
+ echo '2;1073741824;-2147483648;0'
+ ./intops
./shunit.sh: line 150: 12619 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./intops
+ local cmd=./intops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 957 + 1
+ n_tests=958
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "2;1073741824;-2147483648;0" and cmd "./intops"'
stdout differ: string "2;1073741824;-2147483648;0" and cmd "./intops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:28.663015449 +0900
+++ tc.out.real	2023-04-24 00:00:28.663015449 +0900
@@ -1 +0,0 @@
-2;1073741824;-2147483648;0
+ echo ----
----
+ shunit_test_failed
++ expr 259 + 1
+ n_failed=260
+ return 0
+ assert_compile_success -fPIC ./intops.cb
+ assert_status 0 ../bin/cbc -fPIC ./intops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 958 + 1
+ n_tests=959
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./intops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./intops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 959 + 1
+ n_tests=960
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './intops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./intops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 260 + 1
+ n_failed=261
+ return 1
+ assert_out '2;1073741824;2147483648;0' ./uintops
+ msg='2;1073741824;2147483648;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./uintops.cb
+ assert_status 0 ../bin/cbc ./uintops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 960 + 1
+ n_tests=961
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./uintops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./uintops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 961 + 1
+ n_tests=962
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' './uintops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc ./uintops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 261 + 1
+ n_failed=262
+ return 1
+ assert_out '1;2;1073741824;-2147483648;0' ./longops
+ msg='1;2;1073741824;-2147483648;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./longops.cb
+ assert_status 0 ../bin/cbc ./longops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 962 + 1
+ n_tests=963
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./longops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./longops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 963 + 1
+ n_tests=964
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;1073741824;-2147483648;0' ./longops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 964 + 1
+ n_tests=965
+ expected='1;2;1073741824;-2147483648;0'
+ shift
+ echo '1;2;1073741824;-2147483648;0'
+ ./longops
./shunit.sh: line 150: 12721 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./longops
+ local cmd=./longops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 965 + 1
+ n_tests=966
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;1073741824;-2147483648;0" and cmd "./longops"'
stdout differ: string "1;2;1073741824;-2147483648;0" and cmd "./longops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:29.023015358 +0900
+++ tc.out.real	2023-04-24 00:00:29.023015358 +0900
@@ -1 +0,0 @@
-1;2;1073741824;-2147483648;0
+ echo ----
----
+ shunit_test_failed
++ expr 262 + 1
+ n_failed=263
+ return 0
+ assert_compile_success -O ./longops.cb
+ assert_status 0 ../bin/cbc -O ./longops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 966 + 1
+ n_tests=967
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./longops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./longops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 967 + 1
+ n_tests=968
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;1073741824;-2147483648;0' ./longops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 968 + 1
+ n_tests=969
+ expected='1;2;1073741824;-2147483648;0'
+ shift
+ echo '1;2;1073741824;-2147483648;0'
+ ./longops
./shunit.sh: line 150: 12760 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./longops
+ local cmd=./longops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 969 + 1
+ n_tests=970
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;1073741824;-2147483648;0" and cmd "./longops"'
stdout differ: string "1;2;1073741824;-2147483648;0" and cmd "./longops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:29.143015328 +0900
+++ tc.out.real	2023-04-24 00:00:29.143015328 +0900
@@ -1 +0,0 @@
-1;2;1073741824;-2147483648;0
+ echo ----
----
+ shunit_test_failed
++ expr 263 + 1
+ n_failed=264
+ return 0
+ assert_compile_success -fPIC ./longops.cb
+ assert_status 0 ../bin/cbc -fPIC ./longops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 970 + 1
+ n_tests=971
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./longops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./longops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 971 + 1
+ n_tests=972
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './longops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./longops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 264 + 1
+ n_failed=265
+ return 1
+ assert_out '1;2;1073741824;2147483648;0' ./ulongops
+ msg='1;2;1073741824;2147483648;0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./ulongops.cb
+ assert_status 0 ../bin/cbc ./ulongops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 972 + 1
+ n_tests=973
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./ulongops.cb
+ '[' '' = true ']'
+ ../bin/cbc ./ulongops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 973 + 1
+ n_tests=974
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;1073741824;2147483648;0' ./ulongops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 974 + 1
+ n_tests=975
+ expected='1;2;1073741824;2147483648;0'
+ shift
+ echo '1;2;1073741824;2147483648;0'
+ ./ulongops
./shunit.sh: line 150: 12831 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ulongops
+ local cmd=./ulongops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 975 + 1
+ n_tests=976
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;1073741824;2147483648;0" and cmd "./ulongops"'
stdout differ: string "1;2;1073741824;2147483648;0" and cmd "./ulongops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:29.393015265 +0900
+++ tc.out.real	2023-04-24 00:00:29.393015265 +0900
@@ -1 +0,0 @@
-1;2;1073741824;2147483648;0
+ echo ----
----
+ shunit_test_failed
++ expr 265 + 1
+ n_failed=266
+ return 0
+ assert_compile_success -O ./ulongops.cb
+ assert_status 0 ../bin/cbc -O ./ulongops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 976 + 1
+ n_tests=977
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./ulongops.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./ulongops.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 977 + 1
+ n_tests=978
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;1073741824;2147483648;0' ./ulongops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 978 + 1
+ n_tests=979
+ expected='1;2;1073741824;2147483648;0'
+ shift
+ echo '1;2;1073741824;2147483648;0'
+ ./ulongops
./shunit.sh: line 150: 12869 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./ulongops
+ local cmd=./ulongops
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 979 + 1
+ n_tests=980
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;1073741824;2147483648;0" and cmd "./ulongops"'
stdout differ: string "1;2;1073741824;2147483648;0" and cmd "./ulongops"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:29.513015234 +0900
+++ tc.out.real	2023-04-24 00:00:29.513015234 +0900
@@ -1 +0,0 @@
-1;2;1073741824;2147483648;0
+ echo ----
----
+ shunit_test_failed
++ expr 266 + 1
+ n_failed=267
+ return 0
+ assert_compile_success -fPIC ./ulongops.cb
+ assert_status 0 ../bin/cbc -fPIC ./ulongops.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 980 + 1
+ n_tests=981
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./ulongops.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./ulongops.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 981 + 1
+ n_tests=982
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './ulongops.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./ulongops.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 267 + 1
+ n_failed=268
+ return 1
+ read f
+ echo

++ echo test_24_cast
++ sed 's/^test_//'
+ print 24_cast
+ /bin/echo -n 24_cast
24_cast+ test_24_cast
+ assert_out '25000000;1;1;-1;-1;1;1;-1;-1' ./cast
+ msg='25000000;1;1;-1;-1;1;1;-1;-1'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./cast.cb
+ assert_status 0 ../bin/cbc ./cast.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 982 + 1
+ n_tests=983
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./cast.cb
+ '[' '' = true ']'
+ ../bin/cbc ./cast.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 983 + 1
+ n_tests=984
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '25000000;1;1;-1;-1;1;1;-1;-1' ./cast
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 984 + 1
+ n_tests=985
+ expected='25000000;1;1;-1;-1;1;1;-1;-1'
+ shift
+ echo '25000000;1;1;-1;-1;1;1;-1;-1'
+ ./cast
./shunit.sh: line 150: 12945 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./cast
+ local cmd=./cast
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 985 + 1
+ n_tests=986
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "25000000;1;1;-1;-1;1;1;-1;-1" and cmd "./cast"'
stdout differ: string "25000000;1;1;-1;-1;1;1;-1;-1" and cmd "./cast"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:29.783015166 +0900
+++ tc.out.real	2023-04-24 00:00:29.783015166 +0900
@@ -1 +0,0 @@
-25000000;1;1;-1;-1;1;1;-1;-1
+ echo ----
----
+ shunit_test_failed
++ expr 268 + 1
+ n_failed=269
+ return 0
+ assert_compile_success -O ./cast.cb
+ assert_status 0 ../bin/cbc -O ./cast.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 986 + 1
+ n_tests=987
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./cast.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./cast.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 987 + 1
+ n_tests=988
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '25000000;1;1;-1;-1;1;1;-1;-1' ./cast
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 988 + 1
+ n_tests=989
+ expected='25000000;1;1;-1;-1;1;1;-1;-1'
+ shift
+ echo '25000000;1;1;-1;-1;1;1;-1;-1'
+ ./cast
./shunit.sh: line 150: 12985 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./cast
+ local cmd=./cast
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 989 + 1
+ n_tests=990
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "25000000;1;1;-1;-1;1;1;-1;-1" and cmd "./cast"'
stdout differ: string "25000000;1;1;-1;-1;1;1;-1;-1" and cmd "./cast"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:29.923015131 +0900
+++ tc.out.real	2023-04-24 00:00:29.923015131 +0900
@@ -1 +0,0 @@
-25000000;1;1;-1;-1;1;1;-1;-1
+ echo ----
----
+ shunit_test_failed
++ expr 269 + 1
+ n_failed=270
+ return 0
+ assert_compile_success -fPIC ./cast.cb
+ assert_status 0 ../bin/cbc -fPIC ./cast.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 990 + 1
+ n_tests=991
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./cast.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./cast.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 991 + 1
+ n_tests=992
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './cast.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./cast.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 270 + 1
+ n_failed=271
+ return 1
+ assert_out '777;666' ./cast2
+ msg='777;666'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./cast2.cb
+ assert_status 0 ../bin/cbc ./cast2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 992 + 1
+ n_tests=993
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./cast2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./cast2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 993 + 1
+ n_tests=994
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '777;666' ./cast2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 994 + 1
+ n_tests=995
+ expected='777;666'
+ shift
+ echo '777;666'
+ ./cast2
./shunit.sh: line 150: 13056 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./cast2
+ local cmd=./cast2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 995 + 1
+ n_tests=996
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "777;666" and cmd "./cast2"'
stdout differ: string "777;666" and cmd "./cast2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:30.173015068 +0900
+++ tc.out.real	2023-04-24 00:00:30.173015068 +0900
@@ -1 +0,0 @@
-777;666
+ echo ----
----
+ shunit_test_failed
++ expr 271 + 1
+ n_failed=272
+ return 0
+ assert_compile_success -O ./cast2.cb
+ assert_status 0 ../bin/cbc -O ./cast2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 996 + 1
+ n_tests=997
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./cast2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./cast2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 997 + 1
+ n_tests=998
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '777;666' ./cast2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 998 + 1
+ n_tests=999
+ expected='777;666'
+ shift
+ echo '777;666'
+ ./cast2
./shunit.sh: line 150: 13094 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./cast2
+ local cmd=./cast2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 999 + 1
+ n_tests=1000
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "777;666" and cmd "./cast2"'
stdout differ: string "777;666" and cmd "./cast2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:30.313015032 +0900
+++ tc.out.real	2023-04-24 00:00:30.313015032 +0900
@@ -1 +0,0 @@
-777;666
+ echo ----
----
+ shunit_test_failed
++ expr 272 + 1
+ n_failed=273
+ return 0
+ assert_compile_success -fPIC ./cast2.cb
+ assert_status 0 ../bin/cbc -fPIC ./cast2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1000 + 1
+ n_tests=1001
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./cast2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./cast2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1001 + 1
+ n_tests=1002
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './cast2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./cast2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 273 + 1
+ n_failed=274
+ return 1
+ read f
+ echo

++ echo test_25_block
++ sed 's/^test_//'
+ print 25_block
+ /bin/echo -n 25_block
25_block+ test_25_block
+ assert_out '1;2;3;1;OK' ./block
+ msg='1;2;3;1;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./block.cb
+ assert_status 0 ../bin/cbc ./block.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1002 + 1
+ n_tests=1003
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./block.cb
+ '[' '' = true ']'
+ ../bin/cbc ./block.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1003 + 1
+ n_tests=1004
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;1;OK' ./block
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1004 + 1
+ n_tests=1005
+ expected='1;2;3;1;OK'
+ shift
+ echo '1;2;3;1;OK'
+ ./block
./shunit.sh: line 150: 13170 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./block
+ local cmd=./block
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1005 + 1
+ n_tests=1006
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;1;OK" and cmd "./block"'
stdout differ: string "1;2;3;1;OK" and cmd "./block"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:30.583014964 +0900
+++ tc.out.real	2023-04-24 00:00:30.583014964 +0900
@@ -1 +0,0 @@
-1;2;3;1;OK
+ echo ----
----
+ shunit_test_failed
++ expr 274 + 1
+ n_failed=275
+ return 0
+ assert_compile_success -O ./block.cb
+ assert_status 0 ../bin/cbc -O ./block.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1006 + 1
+ n_tests=1007
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./block.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./block.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1007 + 1
+ n_tests=1008
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3;1;OK' ./block
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1008 + 1
+ n_tests=1009
+ expected='1;2;3;1;OK'
+ shift
+ echo '1;2;3;1;OK'
+ ./block
./shunit.sh: line 150: 13209 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./block
+ local cmd=./block
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1009 + 1
+ n_tests=1010
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3;1;OK" and cmd "./block"'
stdout differ: string "1;2;3;1;OK" and cmd "./block"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:30.713014932 +0900
+++ tc.out.real	2023-04-24 00:00:30.713014932 +0900
@@ -1 +0,0 @@
-1;2;3;1;OK
+ echo ----
----
+ shunit_test_failed
++ expr 275 + 1
+ n_failed=276
+ return 0
+ assert_compile_success -fPIC ./block.cb
+ assert_status 0 ../bin/cbc -fPIC ./block.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1010 + 1
+ n_tests=1011
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./block.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./block.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1011 + 1
+ n_tests=1012
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './block.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./block.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 276 + 1
+ n_failed=277
+ return 1
+ assert_out '1;2;3' ./defvar
+ msg='1;2;3'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./defvar.cb
+ assert_status 0 ../bin/cbc ./defvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1012 + 1
+ n_tests=1013
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./defvar.cb
+ '[' '' = true ']'
+ ../bin/cbc ./defvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1013 + 1
+ n_tests=1014
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3' ./defvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1014 + 1
+ n_tests=1015
+ expected='1;2;3'
+ shift
+ echo '1;2;3'
+ ./defvar
./shunit.sh: line 150: 13280 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./defvar
+ local cmd=./defvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1015 + 1
+ n_tests=1016
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3" and cmd "./defvar"'
stdout differ: string "1;2;3" and cmd "./defvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:30.953014872 +0900
+++ tc.out.real	2023-04-24 00:00:30.953014872 +0900
@@ -1 +0,0 @@
-1;2;3
+ echo ----
----
+ shunit_test_failed
++ expr 277 + 1
+ n_failed=278
+ return 0
+ assert_compile_success -O ./defvar.cb
+ assert_status 0 ../bin/cbc -O ./defvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1016 + 1
+ n_tests=1017
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./defvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./defvar.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1017 + 1
+ n_tests=1018
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3' ./defvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1018 + 1
+ n_tests=1019
+ expected='1;2;3'
+ shift
+ echo '1;2;3'
+ ./defvar
./shunit.sh: line 150: 13319 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./defvar
+ local cmd=./defvar
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1019 + 1
+ n_tests=1020
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3" and cmd "./defvar"'
stdout differ: string "1;2;3" and cmd "./defvar"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:31.093014836 +0900
+++ tc.out.real	2023-04-24 00:00:31.093014836 +0900
@@ -1 +0,0 @@
-1;2;3
+ echo ----
----
+ shunit_test_failed
++ expr 278 + 1
+ n_failed=279
+ return 0
+ assert_compile_success -fPIC ./defvar.cb
+ assert_status 0 ../bin/cbc -fPIC ./defvar.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1020 + 1
+ n_tests=1021
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./defvar.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./defvar.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1021 + 1
+ n_tests=1022
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './defvar.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./defvar.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 279 + 1
+ n_failed=280
+ return 1
+ assert_out 77 ./decloverride
+ msg=77
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./decloverride.cb
+ assert_status 0 ../bin/cbc ./decloverride.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1022 + 1
+ n_tests=1023
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./decloverride.cb
+ '[' '' = true ']'
+ ../bin/cbc ./decloverride.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1023 + 1
+ n_tests=1024
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 77 ./decloverride
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1024 + 1
+ n_tests=1025
+ expected=77
+ shift
+ echo 77
+ ./decloverride
./shunit.sh: line 150: 13390 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./decloverride
+ local cmd=./decloverride
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1025 + 1
+ n_tests=1026
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "77" and cmd "./decloverride"'
stdout differ: string "77" and cmd "./decloverride"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:31.353014770 +0900
+++ tc.out.real	2023-04-24 00:00:31.353014770 +0900
@@ -1 +0,0 @@
-77
+ echo ----
----
+ shunit_test_failed
++ expr 280 + 1
+ n_failed=281
+ return 0
+ assert_compile_success -O ./decloverride.cb
+ assert_status 0 ../bin/cbc -O ./decloverride.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1026 + 1
+ n_tests=1027
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./decloverride.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./decloverride.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1027 + 1
+ n_tests=1028
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 77 ./decloverride
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1028 + 1
+ n_tests=1029
+ expected=77
+ shift
+ echo 77
+ ./decloverride
./shunit.sh: line 150: 13430 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./decloverride
+ local cmd=./decloverride
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1029 + 1
+ n_tests=1030
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "77" and cmd "./decloverride"'
stdout differ: string "77" and cmd "./decloverride"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:31.483014737 +0900
+++ tc.out.real	2023-04-24 00:00:31.483014737 +0900
@@ -1 +0,0 @@
-77
+ echo ----
----
+ shunit_test_failed
++ expr 281 + 1
+ n_failed=282
+ return 0
+ assert_compile_success -fPIC ./decloverride.cb
+ assert_status 0 ../bin/cbc -fPIC ./decloverride.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1030 + 1
+ n_tests=1031
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./decloverride.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./decloverride.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1031 + 1
+ n_tests=1032
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './decloverride.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./decloverride.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 282 + 1
+ n_failed=283
+ return 1
+ assert_compile_error decloverride2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1032 + 1
+ n_tests=1033
+ ../bin/cbc decloverride2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1033 + 1
+ n_tests=1034
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_26_funcptr
++ sed 's/^test_//'
+ print 26_funcptr
+ /bin/echo -n 26_funcptr
26_funcptr+ test_26_funcptr
+ assert_out 'OK;OK;OK;OK' ./funcptr
+ msg='OK;OK;OK;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./funcptr.cb
+ assert_status 0 ../bin/cbc ./funcptr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1034 + 1
+ n_tests=1035
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./funcptr.cb
+ '[' '' = true ']'
+ ../bin/cbc ./funcptr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1035 + 1
+ n_tests=1036
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'OK;OK;OK;OK' ./funcptr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1036 + 1
+ n_tests=1037
+ expected='OK;OK;OK;OK'
+ shift
+ echo 'OK;OK;OK;OK'
+ ./funcptr
./shunit.sh: line 150: 13535 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./funcptr
+ local cmd=./funcptr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1037 + 1
+ n_tests=1038
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK;OK;OK;OK" and cmd "./funcptr"'
stdout differ: string "OK;OK;OK;OK" and cmd "./funcptr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:31.853014643 +0900
+++ tc.out.real	2023-04-24 00:00:31.853014643 +0900
@@ -1 +0,0 @@
-OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 283 + 1
+ n_failed=284
+ return 0
+ assert_compile_success -O ./funcptr.cb
+ assert_status 0 ../bin/cbc -O ./funcptr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1038 + 1
+ n_tests=1039
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./funcptr.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./funcptr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1039 + 1
+ n_tests=1040
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout 'OK;OK;OK;OK' ./funcptr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1040 + 1
+ n_tests=1041
+ expected='OK;OK;OK;OK'
+ shift
+ echo 'OK;OK;OK;OK'
+ ./funcptr
./shunit.sh: line 150: 13574 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./funcptr
+ local cmd=./funcptr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1041 + 1
+ n_tests=1042
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK;OK;OK;OK" and cmd "./funcptr"'
stdout differ: string "OK;OK;OK;OK" and cmd "./funcptr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:31.993014608 +0900
+++ tc.out.real	2023-04-24 00:00:31.993014608 +0900
@@ -1 +0,0 @@
-OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 284 + 1
+ n_failed=285
+ return 0
+ assert_compile_success -fPIC ./funcptr.cb
+ assert_status 0 ../bin/cbc -fPIC ./funcptr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1042 + 1
+ n_tests=1043
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./funcptr.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./funcptr.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1043 + 1
+ n_tests=1044
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './funcptr.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./funcptr.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 285 + 1
+ n_failed=286
+ return 1
+ assert_out ';OK;OK;OK;OK;OK' ./implicitaddr
+ msg=';OK;OK;OK;OK;OK'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./implicitaddr.cb
+ assert_status 0 ../bin/cbc ./implicitaddr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1044 + 1
+ n_tests=1045
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./implicitaddr.cb
+ '[' '' = true ']'
+ ../bin/cbc ./implicitaddr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1045 + 1
+ n_tests=1046
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout ';OK;OK;OK;OK;OK' ./implicitaddr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1046 + 1
+ n_tests=1047
+ expected=';OK;OK;OK;OK;OK'
+ shift
+ echo ';OK;OK;OK;OK;OK'
+ ./implicitaddr
./shunit.sh: line 150: 13646 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./implicitaddr
+ local cmd=./implicitaddr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1047 + 1
+ n_tests=1048
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string ";OK;OK;OK;OK;OK" and cmd "./implicitaddr"'
stdout differ: string ";OK;OK;OK;OK;OK" and cmd "./implicitaddr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:32.253014543 +0900
+++ tc.out.real	2023-04-24 00:00:32.253014543 +0900
@@ -1 +0,0 @@
-;OK;OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 286 + 1
+ n_failed=287
+ return 0
+ assert_compile_success -O ./implicitaddr.cb
+ assert_status 0 ../bin/cbc -O ./implicitaddr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1048 + 1
+ n_tests=1049
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./implicitaddr.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./implicitaddr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1049 + 1
+ n_tests=1050
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout ';OK;OK;OK;OK;OK' ./implicitaddr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1050 + 1
+ n_tests=1051
+ expected=';OK;OK;OK;OK;OK'
+ shift
+ echo ';OK;OK;OK;OK;OK'
+ ./implicitaddr
./shunit.sh: line 150: 13685 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./implicitaddr
+ local cmd=./implicitaddr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1051 + 1
+ n_tests=1052
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string ";OK;OK;OK;OK;OK" and cmd "./implicitaddr"'
stdout differ: string ";OK;OK;OK;OK;OK" and cmd "./implicitaddr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:32.393014507 +0900
+++ tc.out.real	2023-04-24 00:00:32.393014507 +0900
@@ -1 +0,0 @@
-;OK;OK;OK;OK;OK
+ echo ----
----
+ shunit_test_failed
++ expr 287 + 1
+ n_failed=288
+ return 0
+ assert_compile_success -fPIC ./implicitaddr.cb
+ assert_status 0 ../bin/cbc -fPIC ./implicitaddr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1052 + 1
+ n_tests=1053
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./implicitaddr.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./implicitaddr.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1053 + 1
+ n_tests=1054
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './implicitaddr.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./implicitaddr.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 288 + 1
+ n_failed=289
+ return 1
+ assert_compile_error defun-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1054 + 1
+ n_tests=1055
+ ../bin/cbc defun-semcheck.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1055 + 1
+ n_tests=1056
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1056 + 1
+ n_tests=1057
+ ../bin/cbc defun-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1057 + 1
+ n_tests=1058
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1058 + 1
+ n_tests=1059
+ ../bin/cbc defun-semcheck3.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1059 + 1
+ n_tests=1060
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck4.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1060 + 1
+ n_tests=1061
+ ../bin/cbc defun-semcheck4.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1061 + 1
+ n_tests=1062
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck5.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1062 + 1
+ n_tests=1063
+ ../bin/cbc defun-semcheck5.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1063 + 1
+ n_tests=1064
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck6.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1064 + 1
+ n_tests=1065
+ ../bin/cbc defun-semcheck6.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1065 + 1
+ n_tests=1066
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck7.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1066 + 1
+ n_tests=1067
+ ../bin/cbc defun-semcheck7.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1067 + 1
+ n_tests=1068
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error defun-semcheck8.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1068 + 1
+ n_tests=1069
+ ../bin/cbc defun-semcheck8.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1069 + 1
+ n_tests=1070
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error funcall-semcheck.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1070 + 1
+ n_tests=1071
+ ../bin/cbc funcall-semcheck.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1071 + 1
+ n_tests=1072
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error funcall-semcheck2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1072 + 1
+ n_tests=1073
+ ../bin/cbc funcall-semcheck2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1073 + 1
+ n_tests=1074
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ read f
+ echo

++ echo test_27_switch
++ sed 's/^test_//'
+ print 27_switch
+ /bin/echo -n 27_switch
27_switch+ test_27_switch
+ assert_compile_success switch.cb
+ assert_status 0 ../bin/cbc switch.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1074 + 1
+ n_tests=1075
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc switch.cb
+ '[' '' = true ']'
+ ../bin/cbc switch.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1075 + 1
+ n_tests=1076
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1 or 2' ./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1076 + 1
+ n_tests=1077
+ expected='1 or 2'
+ shift
+ echo '1 or 2'
+ ./switch
./shunit.sh: line 150: 14048 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1077 + 1
+ n_tests=1078
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1 or 2" and cmd "./switch"'
stdout differ: string "1 or 2" and cmd "./switch"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.553014215 +0900
+++ tc.out.real	2023-04-24 00:00:33.553014215 +0900
@@ -1 +0,0 @@
-1 or 2
+ echo ----
----
+ shunit_test_failed
++ expr 289 + 1
+ n_failed=290
+ return 0
+ assert_stdout '1 or 2' ./switch x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1078 + 1
+ n_tests=1079
+ expected='1 or 2'
+ shift
+ echo '1 or 2'
+ ./switch x
./shunit.sh: line 150: 14056 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1079 + 1
+ n_tests=1080
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1 or 2" and cmd "./switch' 'x"'
stdout differ: string "1 or 2" and cmd "./switch x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.563014212 +0900
+++ tc.out.real	2023-04-24 00:00:33.563014212 +0900
@@ -1 +0,0 @@
-1 or 2
+ echo ----
----
+ shunit_test_failed
++ expr 290 + 1
+ n_failed=291
+ return 0
+ assert_stdout '3 or 4' ./switch x x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1080 + 1
+ n_tests=1081
+ expected='3 or 4'
+ shift
+ echo '3 or 4'
+ ./switch x x
./shunit.sh: line 150: 14064 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1081 + 1
+ n_tests=1082
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3 or 4" and cmd "./switch' x 'x"'
stdout differ: string "3 or 4" and cmd "./switch x x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.563014212 +0900
+++ tc.out.real	2023-04-24 00:00:33.563014212 +0900
@@ -1 +0,0 @@
-3 or 4
+ echo ----
----
+ shunit_test_failed
++ expr 291 + 1
+ n_failed=292
+ return 0
+ assert_stdout '3 or 4' ./switch x x x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1082 + 1
+ n_tests=1083
+ expected='3 or 4'
+ shift
+ echo '3 or 4'
+ ./switch x x x
./shunit.sh: line 150: 14072 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1083 + 1
+ n_tests=1084
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "3 or 4" and cmd "./switch' x x 'x"'
stdout differ: string "3 or 4" and cmd "./switch x x x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.573014210 +0900
+++ tc.out.real	2023-04-24 00:00:33.573014210 +0900
@@ -1 +0,0 @@
-3 or 4
+ echo ----
----
+ shunit_test_failed
++ expr 292 + 1
+ n_failed=293
+ return 0
+ assert_stdout '5 or 6' ./switch x x x x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1084 + 1
+ n_tests=1085
+ expected='5 or 6'
+ shift
+ echo '5 or 6'
+ ./switch x x x x
./shunit.sh: line 150: 14080 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1085 + 1
+ n_tests=1086
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "5 or 6" and cmd "./switch' x x x 'x"'
stdout differ: string "5 or 6" and cmd "./switch x x x x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.583014207 +0900
+++ tc.out.real	2023-04-24 00:00:33.583014207 +0900
@@ -1 +0,0 @@
-5 or 6
+ echo ----
----
+ shunit_test_failed
++ expr 293 + 1
+ n_failed=294
+ return 0
+ assert_stdout '5 or 6' ./switch x x x x x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1086 + 1
+ n_tests=1087
+ expected='5 or 6'
+ shift
+ echo '5 or 6'
+ ./switch x x x x x
./shunit.sh: line 150: 14088 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1087 + 1
+ n_tests=1088
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "5 or 6" and cmd "./switch' x x x x 'x"'
stdout differ: string "5 or 6" and cmd "./switch x x x x x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.583014207 +0900
+++ tc.out.real	2023-04-24 00:00:33.583014207 +0900
@@ -1 +0,0 @@
-5 or 6
+ echo ----
----
+ shunit_test_failed
++ expr 294 + 1
+ n_failed=295
+ return 0
+ assert_stdout other ./switch x x x x x x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1088 + 1
+ n_tests=1089
+ expected=other
+ shift
+ echo other
+ ./switch x x x x x x
./shunit.sh: line 150: 14096 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1089 + 1
+ n_tests=1090
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "other" and cmd "./switch' x x x x x 'x"'
stdout differ: string "other" and cmd "./switch x x x x x x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.593014205 +0900
+++ tc.out.real	2023-04-24 00:00:33.593014205 +0900
@@ -1 +0,0 @@
-other
+ echo ----
----
+ shunit_test_failed
++ expr 295 + 1
+ n_failed=296
+ return 0
+ assert_stdout other ./switch x x x x x x x
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1090 + 1
+ n_tests=1091
+ expected=other
+ shift
+ echo other
+ ./switch x x x x x x x
./shunit.sh: line 150: 14104 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./switch
+ local cmd=./switch
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1091 + 1
+ n_tests=1092
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "other" and cmd "./switch' x x x x x x 'x"'
stdout differ: string "other" and cmd "./switch x x x x x x x"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:33.603014202 +0900
+++ tc.out.real	2023-04-24 00:00:33.603014202 +0900
@@ -1 +0,0 @@
-other
+ echo ----
----
+ shunit_test_failed
++ expr 296 + 1
+ n_failed=297
+ return 0
+ read f
+ echo

++ echo test_28_syntax
++ sed 's/^test_//'
+ print 28_syntax
+ /bin/echo -n 28_syntax
28_syntax+ test_28_syntax
+ assert_out '1, 2, 0' ./syntax1
+ msg='1, 2, 0'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./syntax1.cb
+ assert_status 0 ../bin/cbc ./syntax1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1092 + 1
+ n_tests=1093
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./syntax1.cb
+ '[' '' = true ']'
+ ../bin/cbc ./syntax1.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1093 + 1
+ n_tests=1094
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' './syntax1.cb]: status 0 expected but was: 1'
shunit[../bin/cbc ./syntax1.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 297 + 1
+ n_failed=298
+ return 1
+ assert_compile_success syntax2.cb
+ assert_status 0 ../bin/cbc syntax2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1094 + 1
+ n_tests=1095
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc syntax2.cb
+ '[' '' = true ']'
+ ../bin/cbc syntax2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1095 + 1
+ n_tests=1096
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stat 0 ./syntax3
+ st=0
+ shift
+ assert_compile_success ./syntax3.cb
+ assert_status 0 ../bin/cbc ./syntax3.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1096 + 1
+ n_tests=1097
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./syntax3.cb
+ '[' '' = true ']'
+ ../bin/cbc ./syntax3.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1097 + 1
+ n_tests=1098
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' './syntax3.cb]: status 0 expected but was: 1'
shunit[../bin/cbc ./syntax3.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 298 + 1
+ n_failed=299
+ return 1
+ read f
+ echo

++ echo test_29_import
++ sed 's/^test_//'
+ print 29_import
+ /bin/echo -n 29_import
29_import+ test_29_import
+ assert_compile_success duplicated-import.cb
+ assert_status 0 ../bin/cbc duplicated-import.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1098 + 1
+ n_tests=1099
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc duplicated-import.cb
+ '[' '' = true ']'
+ ../bin/cbc duplicated-import.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1099 + 1
+ n_tests=1100
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_compile_success vardecl.cb
+ assert_status 0 ../bin/cbc vardecl.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1100 + 1
+ n_tests=1101
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc vardecl.cb
+ '[' '' = true ']'
+ ../bin/cbc vardecl.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1101 + 1
+ n_tests=1102
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' 'vardecl.cb]: status 0 expected but was: 1'
shunit[../bin/cbc vardecl.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 299 + 1
+ n_failed=300
+ return 1
+ assert_compile_success -fPIC vardecl.cb
+ assert_status 0 ../bin/cbc -fPIC vardecl.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1102 + 1
+ n_tests=1103
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC vardecl.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC vardecl.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1103 + 1
+ n_tests=1104
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC 'vardecl.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC vardecl.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 300 + 1
+ n_failed=301
+ return 1
+ read f
+ echo

++ echo test_30_staticfunction
++ sed 's/^test_//'
+ print 30_staticfunction
+ /bin/echo -n 30_staticfunction
30_staticfunction+ test_30_staticfunction
+ assert_compile_success staticfunc.cb
+ assert_status 0 ../bin/cbc staticfunc.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1104 + 1
+ n_tests=1105
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc staticfunc.cb
+ '[' '' = true ']'
+ ../bin/cbc staticfunc.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1105 + 1
+ n_tests=1106
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_private staticfunc private_function
++ symbol_visibility staticfunc private_function
++ bin=staticfunc
++ sym=private_function
+++ readelf -s staticfunc
+++ grep private_function
+++ awk '{print $5}'
++ tmp=LOCAL
++ '[' LOCAL = LOCAL ']'
++ echo private
+ assert_eq private private
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1106 + 1
+ n_tests=1107
+ expected=private
+ really=private
+ '[' private '!=' private ']'
+ return 0
+ read f
+ echo

++ echo test_31_sizeof
++ sed 's/^test_//'
+ print 31_sizeof
+ /bin/echo -n 31_sizeof
31_sizeof+ test_31_sizeof
+ assert_out '1;1;2;2;4;4;4;4;4;4;4;16;12;16;12' ./sizeof-type
+ msg='1;1;2;2;4;4;4;4;4;4;4;16;12;16;12'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./sizeof-type.cb
+ assert_status 0 ../bin/cbc ./sizeof-type.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1107 + 1
+ n_tests=1108
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./sizeof-type.cb
+ '[' '' = true ']'
+ ../bin/cbc ./sizeof-type.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1108 + 1
+ n_tests=1109
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;1;2;2;4;4;4;4;4;4;4;16;12;16;12' ./sizeof-type
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1109 + 1
+ n_tests=1110
+ expected='1;1;2;2;4;4;4;4;4;4;4;16;12;16;12'
+ shift
+ echo '1;1;2;2;4;4;4;4;4;4;4;16;12;16;12'
+ ./sizeof-type
./shunit.sh: line 150: 14390 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-type
+ local cmd=./sizeof-type
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1110 + 1
+ n_tests=1111
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;1;2;2;4;4;4;4;4;4;4;16;12;16;12" and cmd "./sizeof-type"'
stdout differ: string "1;1;2;2;4;4;4;4;4;4;4;16;12;16;12" and cmd "./sizeof-type"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:34.593013952 +0900
+++ tc.out.real	2023-04-24 00:00:34.593013952 +0900
@@ -1 +0,0 @@
-1;1;2;2;4;4;4;4;4;4;4;16;12;16;12
+ echo ----
----
+ shunit_test_failed
++ expr 301 + 1
+ n_failed=302
+ return 0
+ assert_compile_success -O ./sizeof-type.cb
+ assert_status 0 ../bin/cbc -O ./sizeof-type.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1111 + 1
+ n_tests=1112
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./sizeof-type.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./sizeof-type.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1112 + 1
+ n_tests=1113
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;1;2;2;4;4;4;4;4;4;4;16;12;16;12' ./sizeof-type
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1113 + 1
+ n_tests=1114
+ expected='1;1;2;2;4;4;4;4;4;4;4;16;12;16;12'
+ shift
+ echo '1;1;2;2;4;4;4;4;4;4;4;16;12;16;12'
+ ./sizeof-type
./shunit.sh: line 150: 14430 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-type
+ local cmd=./sizeof-type
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1114 + 1
+ n_tests=1115
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;1;2;2;4;4;4;4;4;4;4;16;12;16;12" and cmd "./sizeof-type"'
stdout differ: string "1;1;2;2;4;4;4;4;4;4;4;16;12;16;12" and cmd "./sizeof-type"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:34.733013916 +0900
+++ tc.out.real	2023-04-24 00:00:34.733013916 +0900
@@ -1 +0,0 @@
-1;1;2;2;4;4;4;4;4;4;4;16;12;16;12
+ echo ----
----
+ shunit_test_failed
++ expr 302 + 1
+ n_failed=303
+ return 0
+ assert_compile_success -fPIC ./sizeof-type.cb
+ assert_status 0 ../bin/cbc -fPIC ./sizeof-type.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1115 + 1
+ n_tests=1116
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./sizeof-type.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./sizeof-type.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1116 + 1
+ n_tests=1117
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './sizeof-type.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./sizeof-type.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 303 + 1
+ n_failed=304
+ return 1
+ assert_out '12;20;1;2;6;3' ./sizeof-struct
+ msg='12;20;1;2;6;3'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./sizeof-struct.cb
+ assert_status 0 ../bin/cbc ./sizeof-struct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1117 + 1
+ n_tests=1118
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./sizeof-struct.cb
+ '[' '' = true ']'
+ ../bin/cbc ./sizeof-struct.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1118 + 1
+ n_tests=1119
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '12;20;1;2;6;3' ./sizeof-struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1119 + 1
+ n_tests=1120
+ expected='12;20;1;2;6;3'
+ shift
+ echo '12;20;1;2;6;3'
+ ./sizeof-struct
./shunit.sh: line 150: 14503 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-struct
+ local cmd=./sizeof-struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1120 + 1
+ n_tests=1121
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "12;20;1;2;6;3" and cmd "./sizeof-struct"'
stdout differ: string "12;20;1;2;6;3" and cmd "./sizeof-struct"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:35.003013840 +0900
+++ tc.out.real	2023-04-24 00:00:35.003013840 +0900
@@ -1 +0,0 @@
-12;20;1;2;6;3
+ echo ----
----
+ shunit_test_failed
++ expr 304 + 1
+ n_failed=305
+ return 0
+ assert_compile_success -O ./sizeof-struct.cb
+ assert_status 0 ../bin/cbc -O ./sizeof-struct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1121 + 1
+ n_tests=1122
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./sizeof-struct.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./sizeof-struct.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1122 + 1
+ n_tests=1123
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '12;20;1;2;6;3' ./sizeof-struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1123 + 1
+ n_tests=1124
+ expected='12;20;1;2;6;3'
+ shift
+ echo '12;20;1;2;6;3'
+ ./sizeof-struct
./shunit.sh: line 150: 14543 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-struct
+ local cmd=./sizeof-struct
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1124 + 1
+ n_tests=1125
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "12;20;1;2;6;3" and cmd "./sizeof-struct"'
stdout differ: string "12;20;1;2;6;3" and cmd "./sizeof-struct"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:35.133013799 +0900
+++ tc.out.real	2023-04-24 00:00:35.133013799 +0900
@@ -1 +0,0 @@
-12;20;1;2;6;3
+ echo ----
----
+ shunit_test_failed
++ expr 305 + 1
+ n_failed=306
+ return 0
+ assert_compile_success -fPIC ./sizeof-struct.cb
+ assert_status 0 ../bin/cbc -fPIC ./sizeof-struct.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1125 + 1
+ n_tests=1126
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./sizeof-struct.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./sizeof-struct.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1126 + 1
+ n_tests=1127
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './sizeof-struct.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./sizeof-struct.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 306 + 1
+ n_failed=307
+ return 1
+ assert_out '1;1;4;8' ./sizeof-union
+ msg='1;1;4;8'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./sizeof-union.cb
+ assert_status 0 ../bin/cbc ./sizeof-union.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1127 + 1
+ n_tests=1128
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./sizeof-union.cb
+ '[' '' = true ']'
+ ../bin/cbc ./sizeof-union.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1128 + 1
+ n_tests=1129
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;1;4;8' ./sizeof-union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1129 + 1
+ n_tests=1130
+ expected='1;1;4;8'
+ shift
+ echo '1;1;4;8'
+ ./sizeof-union
./shunit.sh: line 150: 14614 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-union
+ local cmd=./sizeof-union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1130 + 1
+ n_tests=1131
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;1;4;8" and cmd "./sizeof-union"'
stdout differ: string "1;1;4;8" and cmd "./sizeof-union"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:35.393013715 +0900
+++ tc.out.real	2023-04-24 00:00:35.393013715 +0900
@@ -1 +0,0 @@
-1;1;4;8
+ echo ----
----
+ shunit_test_failed
++ expr 307 + 1
+ n_failed=308
+ return 0
+ assert_compile_success -O ./sizeof-union.cb
+ assert_status 0 ../bin/cbc -O ./sizeof-union.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1131 + 1
+ n_tests=1132
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./sizeof-union.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./sizeof-union.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1132 + 1
+ n_tests=1133
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;1;4;8' ./sizeof-union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1133 + 1
+ n_tests=1134
+ expected='1;1;4;8'
+ shift
+ echo '1;1;4;8'
+ ./sizeof-union
./shunit.sh: line 150: 14653 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-union
+ local cmd=./sizeof-union
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1134 + 1
+ n_tests=1135
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;1;4;8" and cmd "./sizeof-union"'
stdout differ: string "1;1;4;8" and cmd "./sizeof-union"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:35.543013669 +0900
+++ tc.out.real	2023-04-24 00:00:35.543013669 +0900
@@ -1 +0,0 @@
-1;1;4;8
+ echo ----
----
+ shunit_test_failed
++ expr 308 + 1
+ n_failed=309
+ return 0
+ assert_compile_success -fPIC ./sizeof-union.cb
+ assert_status 0 ../bin/cbc -fPIC ./sizeof-union.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1135 + 1
+ n_tests=1136
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./sizeof-union.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./sizeof-union.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1136 + 1
+ n_tests=1137
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './sizeof-union.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./sizeof-union.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 309 + 1
+ n_failed=310
+ return 1
+ assert_out '1;2;4;4;4;8;12;16;12' ./sizeof-expr
+ msg='1;2;4;4;4;8;12;16;12'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./sizeof-expr.cb
+ assert_status 0 ../bin/cbc ./sizeof-expr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1137 + 1
+ n_tests=1138
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./sizeof-expr.cb
+ '[' '' = true ']'
+ ../bin/cbc ./sizeof-expr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1138 + 1
+ n_tests=1139
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;4;4;4;8;12;16;12' ./sizeof-expr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1139 + 1
+ n_tests=1140
+ expected='1;2;4;4;4;8;12;16;12'
+ shift
+ echo '1;2;4;4;4;8;12;16;12'
+ ./sizeof-expr
./shunit.sh: line 150: 14725 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-expr
+ local cmd=./sizeof-expr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1140 + 1
+ n_tests=1141
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;4;4;4;8;12;16;12" and cmd "./sizeof-expr"'
stdout differ: string "1;2;4;4;4;8;12;16;12" and cmd "./sizeof-expr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:35.793013588 +0900
+++ tc.out.real	2023-04-24 00:00:35.793013588 +0900
@@ -1 +0,0 @@
-1;2;4;4;4;8;12;16;12
+ echo ----
----
+ shunit_test_failed
++ expr 310 + 1
+ n_failed=311
+ return 0
+ assert_compile_success -O ./sizeof-expr.cb
+ assert_status 0 ../bin/cbc -O ./sizeof-expr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1141 + 1
+ n_tests=1142
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./sizeof-expr.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./sizeof-expr.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1142 + 1
+ n_tests=1143
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;4;4;4;8;12;16;12' ./sizeof-expr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1143 + 1
+ n_tests=1144
+ expected='1;2;4;4;4;8;12;16;12'
+ shift
+ echo '1;2;4;4;4;8;12;16;12'
+ ./sizeof-expr
./shunit.sh: line 150: 14764 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./sizeof-expr
+ local cmd=./sizeof-expr
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1144 + 1
+ n_tests=1145
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;4;4;4;8;12;16;12" and cmd "./sizeof-expr"'
stdout differ: string "1;2;4;4;4;8;12;16;12" and cmd "./sizeof-expr"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:35.943013542 +0900
+++ tc.out.real	2023-04-24 00:00:35.943013542 +0900
@@ -1 +0,0 @@
-1;2;4;4;4;8;12;16;12
+ echo ----
----
+ shunit_test_failed
++ expr 311 + 1
+ n_failed=312
+ return 0
+ assert_compile_success -fPIC ./sizeof-expr.cb
+ assert_status 0 ../bin/cbc -fPIC ./sizeof-expr.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1145 + 1
+ n_tests=1146
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./sizeof-expr.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./sizeof-expr.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1146 + 1
+ n_tests=1147
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './sizeof-expr.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./sizeof-expr.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 312 + 1
+ n_failed=313
+ return 1
+ read f
+ echo

++ sed 's/^test_//'
++ echo test_32_noreturn
+ print 32_noreturn
+ /bin/echo -n 32_noreturn
32_noreturn+ test_32_noreturn
+ assert_stat 0 ./noreturn
+ st=0
+ shift
+ assert_compile_success ./noreturn.cb
+ assert_status 0 ../bin/cbc ./noreturn.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1147 + 1
+ n_tests=1148
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./noreturn.cb
+ '[' '' = true ']'
+ ../bin/cbc ./noreturn.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1148 + 1
+ n_tests=1149
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 0 ./noreturn
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1149 + 1
+ n_tests=1150
+ expected=0
+ shift
+ shunit_invoke ./noreturn
+ '[' '' = true ']'
+ ./noreturn
+ really=0
+ assert_not_coredump ./noreturn
+ local cmd=./noreturn
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1150 + 1
+ n_tests=1151
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ read f
+ echo

++ echo test_33_multipleinput
++ sed 's/^test_//'
+ print 33_multipleinput
+ /bin/echo -n 33_multipleinput
33_multipleinput+ test_33_multipleinput
+ assert_compile_success src1.cb src2.cb -o src
+ assert_status 0 ../bin/cbc src1.cb src2.cb -o src
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1151 + 1
+ n_tests=1152
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc src1.cb src2.cb -o src
+ '[' '' = true ']'
+ ../bin/cbc src1.cb src2.cb -o src
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1152 + 1
+ n_tests=1153
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_status 4 ./src
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1153 + 1
+ n_tests=1154
+ expected=4
+ shift
+ shunit_invoke ./src
+ '[' '' = true ']'
+ ./src
+ really=4
+ assert_not_coredump ./src
+ local cmd=./src
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1154 + 1
+ n_tests=1155
+ '[' -f core ']'
+ return 0
+ '[' 4 '!=' 4 ']'
+ return 0
+ read f
+ echo

++ echo test_34_varargs
++ sed 's/^test_//'
+ print 34_varargs
+ /bin/echo -n 34_varargs
34_varargs+ test_34_varargs
+ assert_out '1;2;3' ./varargs
+ msg='1;2;3'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./varargs.cb
+ assert_status 0 ../bin/cbc ./varargs.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1155 + 1
+ n_tests=1156
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./varargs.cb
+ '[' '' = true ']'
+ ../bin/cbc ./varargs.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1156 + 1
+ n_tests=1157
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3' ./varargs
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1157 + 1
+ n_tests=1158
+ expected='1;2;3'
+ shift
+ echo '1;2;3'
+ ./varargs
./shunit.sh: line 150: 14921 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./varargs
+ local cmd=./varargs
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1158 + 1
+ n_tests=1159
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3" and cmd "./varargs"'
stdout differ: string "1;2;3" and cmd "./varargs"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:36.453013381 +0900
+++ tc.out.real	2023-04-24 00:00:36.453013381 +0900
@@ -1 +0,0 @@
-1;2;3
+ echo ----
----
+ shunit_test_failed
++ expr 313 + 1
+ n_failed=314
+ return 0
+ assert_compile_success -O ./varargs.cb
+ assert_status 0 ../bin/cbc -O ./varargs.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1159 + 1
+ n_tests=1160
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./varargs.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./varargs.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1160 + 1
+ n_tests=1161
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '1;2;3' ./varargs
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1161 + 1
+ n_tests=1162
+ expected='1;2;3'
+ shift
+ echo '1;2;3'
+ ./varargs
./shunit.sh: line 150: 14960 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./varargs
+ local cmd=./varargs
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1162 + 1
+ n_tests=1163
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "1;2;3" and cmd "./varargs"'
stdout differ: string "1;2;3" and cmd "./varargs"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:36.583013340 +0900
+++ tc.out.real	2023-04-24 00:00:36.583013340 +0900
@@ -1 +0,0 @@
-1;2;3
+ echo ----
----
+ shunit_test_failed
++ expr 314 + 1
+ n_failed=315
+ return 0
+ assert_compile_success -fPIC ./varargs.cb
+ assert_status 0 ../bin/cbc -fPIC ./varargs.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1163 + 1
+ n_tests=1164
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./varargs.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./varargs.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1164 + 1
+ n_tests=1165
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './varargs.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./varargs.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 315 + 1
+ n_failed=316
+ return 1
+ read f
+ echo

++ echo test_35_invalidstmt
++ sed 's/^test_//'
+ print 35_invalidstmt
+ /bin/echo -n 35_invalidstmt
35_invalidstmt+ test_35_invalidstmt
+ assert_compile_error invalidstmt1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1165 + 1
+ n_tests=1166
+ ../bin/cbc invalidstmt1.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1166 + 1
+ n_tests=1167
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_error invalidstmt2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1167 + 1
+ n_tests=1168
+ ../bin/cbc invalidstmt2.cb
+ assert_not_coredump
+ local cmd=
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1168 + 1
+ n_tests=1169
+ '[' -f core ']'
+ return 0
+ egrep -qv 'cbc: (error|warning): ' tc.out
+ return 0
+ assert_compile_success validstmt1.cb
+ assert_status 0 ../bin/cbc validstmt1.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1169 + 1
+ n_tests=1170
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc validstmt1.cb
+ '[' '' = true ']'
+ ../bin/cbc validstmt1.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1170 + 1
+ n_tests=1171
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ read f
+ echo

++ echo test_36_alloca
++ sed 's/^test_//'
+ print 36_alloca
+ /bin/echo -n 36_alloca
36_alloca+ test_36_alloca
+ assert_out '<<Hello>>' ./alloca
+ msg='<<Hello>>'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./alloca.cb
+ assert_status 0 ../bin/cbc ./alloca.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1171 + 1
+ n_tests=1172
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./alloca.cb
+ '[' '' = true ']'
+ ../bin/cbc ./alloca.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1172 + 1
+ n_tests=1173
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '<<Hello>>' ./alloca
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1173 + 1
+ n_tests=1174
+ expected='<<Hello>>'
+ shift
+ echo '<<Hello>>'
+ ./alloca
./shunit.sh: line 150: 15129 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./alloca
+ local cmd=./alloca
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1174 + 1
+ n_tests=1175
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "<<Hello>>" and cmd "./alloca"'
stdout differ: string "<<Hello>>" and cmd "./alloca"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:37.143013162 +0900
+++ tc.out.real	2023-04-24 00:00:37.143013162 +0900
@@ -1 +0,0 @@
-<<Hello>>
+ echo ----
----
+ shunit_test_failed
++ expr 316 + 1
+ n_failed=317
+ return 0
+ assert_compile_success -O ./alloca.cb
+ assert_status 0 ../bin/cbc -O ./alloca.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1175 + 1
+ n_tests=1176
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./alloca.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./alloca.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1176 + 1
+ n_tests=1177
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '<<Hello>>' ./alloca
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1177 + 1
+ n_tests=1178
+ expected='<<Hello>>'
+ shift
+ echo '<<Hello>>'
+ ./alloca
./shunit.sh: line 150: 15168 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./alloca
+ local cmd=./alloca
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1178 + 1
+ n_tests=1179
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "<<Hello>>" and cmd "./alloca"'
stdout differ: string "<<Hello>>" and cmd "./alloca"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:37.273013122 +0900
+++ tc.out.real	2023-04-24 00:00:37.273013122 +0900
@@ -1 +0,0 @@
-<<Hello>>
+ echo ----
----
+ shunit_test_failed
++ expr 317 + 1
+ n_failed=318
+ return 0
+ assert_compile_success -fPIC ./alloca.cb
+ assert_status 0 ../bin/cbc -fPIC ./alloca.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1179 + 1
+ n_tests=1180
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./alloca.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./alloca.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1180 + 1
+ n_tests=1181
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './alloca.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./alloca.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 318 + 1
+ n_failed=319
+ return 1
+ assert_out '17;17;17;17' ./alloca2
+ msg='17;17;17;17'
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./alloca2.cb
+ assert_status 0 ../bin/cbc ./alloca2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1181 + 1
+ n_tests=1182
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./alloca2.cb
+ '[' '' = true ']'
+ ../bin/cbc ./alloca2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1182 + 1
+ n_tests=1183
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '17;17;17;17' ./alloca2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1183 + 1
+ n_tests=1184
+ expected='17;17;17;17'
+ shift
+ echo '17;17;17;17'
+ ./alloca2
./shunit.sh: line 150: 15241 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./alloca2
+ local cmd=./alloca2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1184 + 1
+ n_tests=1185
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "17;17;17;17" and cmd "./alloca2"'
stdout differ: string "17;17;17;17" and cmd "./alloca2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:37.543013036 +0900
+++ tc.out.real	2023-04-24 00:00:37.543013036 +0900
@@ -1 +0,0 @@
-17;17;17;17
+ echo ----
----
+ shunit_test_failed
++ expr 319 + 1
+ n_failed=320
+ return 0
+ assert_compile_success -O ./alloca2.cb
+ assert_status 0 ../bin/cbc -O ./alloca2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1185 + 1
+ n_tests=1186
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./alloca2.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./alloca2.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1186 + 1
+ n_tests=1187
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout '17;17;17;17' ./alloca2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1187 + 1
+ n_tests=1188
+ expected='17;17;17;17'
+ shift
+ echo '17;17;17;17'
+ ./alloca2
./shunit.sh: line 150: 15281 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./alloca2
+ local cmd=./alloca2
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1188 + 1
+ n_tests=1189
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "17;17;17;17" and cmd "./alloca2"'
stdout differ: string "17;17;17;17" and cmd "./alloca2"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:37.693012990 +0900
+++ tc.out.real	2023-04-24 00:00:37.693012990 +0900
@@ -1 +0,0 @@
-17;17;17;17
+ echo ----
----
+ shunit_test_failed
++ expr 320 + 1
+ n_failed=321
+ return 0
+ assert_compile_success -fPIC ./alloca2.cb
+ assert_status 0 ../bin/cbc -fPIC ./alloca2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1189 + 1
+ n_tests=1190
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./alloca2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./alloca2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1190 + 1
+ n_tests=1191
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './alloca2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./alloca2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 321 + 1
+ n_failed=322
+ return 1
+ assert_compile_success -fPIE -pie alloca2.cb
+ assert_status 0 ../bin/cbc -fPIE -pie alloca2.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1191 + 1
+ n_tests=1192
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIE -pie alloca2.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIE -pie alloca2.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1192 + 1
+ n_tests=1193
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIE -pie 'alloca2.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIE -pie alloca2.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 322 + 1
+ n_failed=323
+ return 1
+ read f
+ echo

++ echo test_37_setjmp
++ sed 's/^test_//'
+ print 37_setjmp
+ /bin/echo -n 37_setjmp
37_setjmp+ test_37_setjmp
+ assert_out OK ./setjmptest
+ msg=OK
+ shift
+ '[' -n '' ']'
+ assert_compile_success ./setjmptest.cb
+ assert_status 0 ../bin/cbc ./setjmptest.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1193 + 1
+ n_tests=1194
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc ./setjmptest.cb
+ '[' '' = true ']'
+ ../bin/cbc ./setjmptest.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1194 + 1
+ n_tests=1195
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./setjmptest
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1195 + 1
+ n_tests=1196
+ expected=OK
+ shift
+ echo OK
+ ./setjmptest
./shunit.sh: line 150: 15390 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./setjmptest
+ local cmd=./setjmptest
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1196 + 1
+ n_tests=1197
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./setjmptest"'
stdout differ: string "OK" and cmd "./setjmptest"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:38.103012858 +0900
+++ tc.out.real	2023-04-24 00:00:38.103012858 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 323 + 1
+ n_failed=324
+ return 0
+ assert_compile_success -O ./setjmptest.cb
+ assert_status 0 ../bin/cbc -O ./setjmptest.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1197 + 1
+ n_tests=1198
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -O ./setjmptest.cb
+ '[' '' = true ']'
+ ../bin/cbc -O ./setjmptest.cb
+ really=0
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1198 + 1
+ n_tests=1199
+ '[' -f core ']'
+ return 0
+ '[' 0 '!=' 0 ']'
+ return 0
+ assert_stdout OK ./setjmptest
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1199 + 1
+ n_tests=1200
+ expected=OK
+ shift
+ echo OK
+ ./setjmptest
./shunit.sh: line 150: 15431 Segmentation fault      "$@" > tc.out.real 2> /dev/null
+ assert_not_coredump ./setjmptest
+ local cmd=./setjmptest
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1200 + 1
+ n_tests=1201
+ '[' -f core ']'
+ return 0
+ cmp tc.out.expected tc.out.real
+ '[' 1 '!=' 0 ']'
+ echo 'stdout differ: string "OK" and cmd "./setjmptest"'
stdout differ: string "OK" and cmd "./setjmptest"
+ diff -u tc.out.expected tc.out.real
--- tc.out.expected	2023-04-24 00:00:38.263012808 +0900
+++ tc.out.real	2023-04-24 00:00:38.263012808 +0900
@@ -1 +0,0 @@
-OK
+ echo ----
----
+ shunit_test_failed
++ expr 324 + 1
+ n_failed=325
+ return 0
+ assert_compile_success -fPIC ./setjmptest.cb
+ assert_status 0 ../bin/cbc -fPIC ./setjmptest.cb
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1201 + 1
+ n_tests=1202
+ expected=0
+ shift
+ shunit_invoke ../bin/cbc -fPIC ./setjmptest.cb
+ '[' '' = true ']'
+ ../bin/cbc -fPIC ./setjmptest.cb
+ really=1
+ assert_not_coredump ../bin/cbc
+ local cmd=../bin/cbc
+ shunit_begin_test
+ shunit_progress
+ print .
+ /bin/echo -n .
.++ expr 1202 + 1
+ n_tests=1203
+ '[' -f core ']'
+ return 0
+ '[' 1 '!=' 0 ']'
+ echo 'shunit[../bin/cbc' -fPIC './setjmptest.cb]: status 0 expected but was: 1'
shunit[../bin/cbc -fPIC ./setjmptest.cb]: status 0 expected but was: 1
+ shunit_test_failed
++ expr 325 + 1
+ n_failed=326
+ return 1
+ read f
+ shunit_report_result
+ rm -rf tc.out tc.out.expected tc.out.real
+ echo

+ '[' 326 = 0 ']'
++ hostname
++ uname -srm
+ echo 'FAIL (326/1203 failed) -- DESKTOP-G6OAP5L / Linux 5.15.90.1-microsoft-standard-WSL2 x86_64'
FAIL (326/1203 failed) -- DESKTOP-G6OAP5L / Linux 5.15.90.1-microsoft-standard-WSL2 x86_64
+ exit 1
